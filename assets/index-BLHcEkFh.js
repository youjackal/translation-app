(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function rA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gp={exports:{}},_u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function bb(){if(N0)return _u;N0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return _u.Fragment=e,_u.jsx=t,_u.jsxs=t,_u}var x0;function Nb(){return x0||(x0=1,Gp.exports=bb()),Gp.exports}var w=Nb(),Bp={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function xb(){if(M0)return Ve;M0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,U={};function W(O,te,ce){this.props=O,this.context=te,this.refs=U,this.updater=ce||L}W.prototype.isReactComponent={},W.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},W.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function oe(){}oe.prototype=W.prototype;function Z(O,te,ce){this.props=O,this.context=te,this.refs=U,this.updater=ce||L}var ae=Z.prototype=new oe;ae.constructor=Z,H(ae,W.prototype),ae.isPureReactComponent=!0;var pe=Array.isArray;function fe(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function N(O,te,ce){var de=ce.ref;return{$$typeof:n,type:O,key:te,ref:de!==void 0?de:null,props:ce}}function P(O,te){return N(O.type,te,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function q(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return te[ce]})}var D=/\/+/g;function qe(O,te){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):te.toString(36)}function gt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(fe,fe):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function J(O,te,ce,de,be){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Ke=!1;if(O===null)Ke=!0;else switch(Pe){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(O.$$typeof){case n:case e:Ke=!0;break;case v:return Ke=O._init,J(Ke(O._payload),te,ce,de,be)}}if(Ke)return be=be(O),Ke=de===""?"."+qe(O,0):de,pe(be)?(ce="",Ke!=null&&(ce=Ke.replace(D,"$&/")+"/"),J(be,te,ce,"",function(Zn){return Zn})):be!=null&&(k(be)&&(be=P(be,ce+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace(D,"$&/")+"/")+Ke)),te.push(be)),1;Ke=0;var bt=de===""?".":de+":";if(pe(O))for(var at=0;at<O.length;at++)de=O[at],Pe=bt+qe(de,at),Ke+=J(de,te,ce,Pe,be);else if(at=R(O),typeof at=="function")for(O=at.call(O),at=0;!(de=O.next()).done;)de=de.value,Pe=bt+qe(de,at++),Ke+=J(de,te,ce,Pe,be);else if(Pe==="object"){if(typeof O.then=="function")return J(gt(O),te,ce,de,be);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function ue(O,te,ce){if(O==null)return O;var de=[],be=0;return J(O,de,"","",function(Pe){return te.call(ce,Pe,be++)}),de}function Ee(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var ze=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},je={map:ue,forEach:function(O,te,ce){ue(O,function(){te.apply(this,arguments)},ce)},count:function(O){var te=0;return ue(O,function(){te++}),te},toArray:function(O){return ue(O,function(te){return te})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ve.Activity=T,Ve.Children=je,Ve.Component=W,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=Z,Ve.StrictMode=i,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(O,te,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var de=H({},O.props),be=O.key;if(te!=null)for(Pe in te.key!==void 0&&(be=""+te.key),te)!x.call(te,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&te.ref===void 0||(de[Pe]=te[Pe]);var Pe=arguments.length-2;if(Pe===1)de.children=ce;else if(1<Pe){for(var Ke=Array(Pe),bt=0;bt<Pe;bt++)Ke[bt]=arguments[bt+2];de.children=Ke}return N(O.type,be,de)},Ve.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Ve.createElement=function(O,te,ce){var de,be={},Pe=null;if(te!=null)for(de in te.key!==void 0&&(Pe=""+te.key),te)x.call(te,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(be[de]=te[de]);var Ke=arguments.length-2;if(Ke===1)be.children=ce;else if(1<Ke){for(var bt=Array(Ke),at=0;at<Ke;at++)bt[at]=arguments[at+2];be.children=bt}if(O&&O.defaultProps)for(de in Ke=O.defaultProps,Ke)be[de]===void 0&&(be[de]=Ke[de]);return N(O,Pe,be)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=k,Ve.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Ee}},Ve.memo=function(O,te){return{$$typeof:h,type:O,compare:te===void 0?null:te}},Ve.startTransition=function(O){var te=M.T,ce={};M.T=ce;try{var de=O(),be=M.S;be!==null&&be(ce,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(fe,ze)}catch(Pe){ze(Pe)}finally{te!==null&&ce.types!==null&&(te.types=ce.types),M.T=te}},Ve.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ve.use=function(O){return M.H.use(O)},Ve.useActionState=function(O,te,ce){return M.H.useActionState(O,te,ce)},Ve.useCallback=function(O,te){return M.H.useCallback(O,te)},Ve.useContext=function(O){return M.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,te){return M.H.useDeferredValue(O,te)},Ve.useEffect=function(O,te){return M.H.useEffect(O,te)},Ve.useEffectEvent=function(O){return M.H.useEffectEvent(O)},Ve.useId=function(){return M.H.useId()},Ve.useImperativeHandle=function(O,te,ce){return M.H.useImperativeHandle(O,te,ce)},Ve.useInsertionEffect=function(O,te){return M.H.useInsertionEffect(O,te)},Ve.useLayoutEffect=function(O,te){return M.H.useLayoutEffect(O,te)},Ve.useMemo=function(O,te){return M.H.useMemo(O,te)},Ve.useOptimistic=function(O,te){return M.H.useOptimistic(O,te)},Ve.useReducer=function(O,te,ce){return M.H.useReducer(O,te,ce)},Ve.useRef=function(O){return M.H.useRef(O)},Ve.useState=function(O){return M.H.useState(O)},Ve.useSyncExternalStore=function(O,te,ce){return M.H.useSyncExternalStore(O,te,ce)},Ve.useTransition=function(){return M.H.useTransition()},Ve.version="19.2.3",Ve}var D0;function eg(){return D0||(D0=1,Bp.exports=xb()),Bp.exports}var He=eg();const Mb=rA(He);var zp={exports:{}},vu={},Kp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function Db(){return P0||(P0=1,(function(n){function e(J,ue){var Ee=J.length;J.push(ue);e:for(;0<Ee;){var ze=Ee-1>>>1,je=J[ze];if(0<o(je,ue))J[ze]=ue,J[Ee]=je,Ee=ze;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ue=J[0],Ee=J.pop();if(Ee!==ue){J[0]=Ee;e:for(var ze=0,je=J.length,O=je>>>1;ze<O;){var te=2*(ze+1)-1,ce=J[te],de=te+1,be=J[de];if(0>o(ce,Ee))de<je&&0>o(be,ce)?(J[ze]=be,J[de]=Ee,ze=de):(J[ze]=ce,J[te]=Ee,ze=te);else if(de<je&&0>o(be,Ee))J[ze]=be,J[de]=Ee,ze=de;else break e}}return ue}function o(J,ue){var Ee=J.sortIndex-ue.sortIndex;return Ee!==0?Ee:J.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],h=[],v=1,T=null,S=3,R=!1,L=!1,H=!1,U=!1,W=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ae(J){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=J)i(h),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(h)}}function pe(J){if(H=!1,ae(J),!L)if(t(m)!==null)L=!0,fe||(fe=!0,q());else{var ue=t(h);ue!==null&&gt(pe,ue.startTime-J)}}var fe=!1,M=-1,x=5,N=-1;function P(){return U?!0:!(n.unstable_now()-N<x)}function k(){if(U=!1,fe){var J=n.unstable_now();N=J;var ue=!0;try{e:{L=!1,H&&(H=!1,oe(M),M=-1),R=!0;var Ee=S;try{t:{for(ae(J),T=t(m);T!==null&&!(T.expirationTime>J&&P());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,S=T.priorityLevel;var je=ze(T.expirationTime<=J);if(J=n.unstable_now(),typeof je=="function"){T.callback=je,ae(J),ue=!0;break t}T===t(m)&&i(m),ae(J)}else i(m);T=t(m)}if(T!==null)ue=!0;else{var O=t(h);O!==null&&gt(pe,O.startTime-J),ue=!1}}break e}finally{T=null,S=Ee,R=!1}ue=void 0}}finally{ue?q():fe=!1}}}var q;if(typeof Z=="function")q=function(){Z(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,qe=D.port2;D.port1.onmessage=k,q=function(){qe.postMessage(null)}}else q=function(){W(k,0)};function gt(J,ue){M=W(function(){J(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(J){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var Ee=S;S=ue;try{return J()}finally{S=Ee}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ee=S;S=J;try{return ue()}finally{S=Ee}},n.unstable_scheduleCallback=function(J,ue,Ee){var ze=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ze+Ee:ze):Ee=ze,J){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=Ee+je,J={id:v++,callback:ue,priorityLevel:J,startTime:Ee,expirationTime:je,sortIndex:-1},Ee>ze?(J.sortIndex=Ee,e(h,J),t(m)===null&&J===t(h)&&(H?(oe(M),M=-1):H=!0,gt(pe,Ee-ze))):(J.sortIndex=je,e(m,J),L||R||(L=!0,fe||(fe=!0,q()))),J},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(J){var ue=S;return function(){var Ee=S;S=ue;try{return J.apply(this,arguments)}finally{S=Ee}}}})(Yp)),Yp}var V0;function Pb(){return V0||(V0=1,Kp.exports=Db()),Kp.exports}var Jp={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Vb(){if(k0)return mn;k0=1;var n=eg();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mn.createPortal=function(m,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,v)},mn.flushSync=function(m){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=v,i.d.f()}},mn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},mn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},mn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var v=h.as,T=d(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&i.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},mn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=d(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},mn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,T=d(v,h.crossOrigin);i.d.L(m,v,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},mn.preloadModule=function(m,h){if(typeof m=="string")if(h){var v=d(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},mn.requestFormReset=function(m){i.d.r(m)},mn.unstable_batchedUpdates=function(m,h){return m(h)},mn.useFormState=function(m,h,v){return u.H.useFormState(m,h,v)},mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},mn.version="19.2.3",mn}var L0;function kb(){if(L0)return Jp.exports;L0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=Vb(),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function Lb(){if(U0)return vu;U0=1;var n=Pb(),e=eg(),t=kb();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return m(y),s;if(_===c)return m(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,C=y.child;C;){if(C===l){A=!0,l=y,c=_;break}if(C===c){A=!0,c=y,l=_;break}C=C.sibling}if(!A){for(C=_.child;C;){if(C===l){A=!0,l=_,c=y;break}if(C===c){A=!0,c=_,l=y;break}C=C.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function qe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case H:return"Fragment";case W:return"Profiler";case U:return"StrictMode";case pe:return"Suspense";case fe:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case Z:return s.displayName||"Context";case oe:return(s._context.displayName||"Context")+".Consumer";case ae:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:qe(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return qe(s(r))}catch{}}return null}var gt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},ze=[],je=-1;function O(s){return{current:s}}function te(s){0>je||(s.current=ze[je],ze[je]=null,je--)}function ce(s,r){je++,ze[je]=s.current,s.current=r}var de=O(null),be=O(null),Pe=O(null),Ke=O(null);function bt(s,r){switch(ce(Pe,r),ce(be,s),ce(de,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Zv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Zv(r),s=jv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(de),ce(de,s)}function at(){te(de),te(be),te(Pe)}function Zn(s){s.memoizedState!==null&&ce(Ke,s);var r=de.current,l=jv(r,s.type);r!==l&&(ce(be,s),ce(de,l))}function Ws(s){be.current===s&&(te(de),te(be)),Ke.current===s&&(te(Ke),pu._currentValue=Ee)}var Nn,Fn;function qn(s){if(Nn===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Nn=r&&r[1]||"",Fn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nn+s+Fn}var eo=!1;function jt(s,r){if(!s||eo)return"";eo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var Y=Q}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Q){Y=Q}s.call(ne.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],C=_[1];if(A&&C){var V=A.split(`
`),K=C.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===K.length)for(c=V.length-1,y=K.length-1;1<=c&&0<=y&&V[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==K[y]){var X=`
`+V[c].replace(" at new "," at ");return s.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",s.displayName)),X}while(1<=c&&0<=y);break}}}finally{eo=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?qn(l):""}function to(s,r){switch(s.tag){case 26:case 27:case 5:return qn(s.type);case 16:return qn("Lazy");case 13:return s.child!==r&&r!==null?qn("Suspense Fallback"):qn("Suspense");case 19:return qn("SuspenseList");case 0:case 15:return jt(s.type,!1);case 11:return jt(s.type.render,!1);case 1:return jt(s.type,!0);case 31:return qn("Activity");default:return""}}function Xs(s){try{var r="",l=null;do r+=to(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Nt=Object.prototype.hasOwnProperty,At=n.unstable_scheduleCallback,Ii=n.unstable_cancelCallback,no=n.unstable_shouldYield,Bi=n.unstable_requestPaint,se=n.unstable_now,zi=n.unstable_getCurrentPriorityLevel,Zs=n.unstable_ImmediatePriority,io=n.unstable_UserBlockingPriority,Ki=n.unstable_NormalPriority,Sl=n.unstable_LowPriority,Zo=n.unstable_IdlePriority,jo=n.log,ea=n.unstable_setDisableYieldValue,Hn=null,Wt=null;function xn(s){if(typeof jo=="function"&&ea(s),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Hn,s)}catch{}}var yt=Math.clz32?Math.clz32:gs,so=Math.log,js=Math.LN2;function gs(s){return s>>>=0,s===0?32:31-(so(s)/js|0)|0}var jn=256,Yi=262144,xt=4194304;function ei(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ti(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var C=c&134217727;return C!==0?(c=C&~_,c!==0?y=ei(c):(A&=C,A!==0?y=ei(A):l||(l=C&~s,l!==0&&(y=ei(l))))):(C=c&~_,C!==0?y=ei(C):A!==0?y=ei(A):l||(l=c&~s,l!==0&&(y=ei(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Gn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function ta(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(){var s=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),s}function ni(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function ys(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ia(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var C=s.entanglements,V=s.expirationTimes,K=s.hiddenUpdates;for(l=A&~l;0<l;){var X=31-yt(l),ne=1<<X;C[X]=0,V[X]=-1;var Y=K[X];if(Y!==null)for(K[X]=null,X=0;X<Y.length;X++){var Q=Y[X];Q!==null&&(Q.lane&=-536870913)}l&=~ne}c!==0&&_s(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function _s(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-yt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function ee(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-yt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function ye(s,r){var l=r&-r;return l=(l&42)!==0?1:_e(l),(l&(s.suspendedLanes|r))!==0?0:l}function _e(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ie(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Le(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:S0(s.type))}function xe(s,r){var l=ue.p;try{return ue.p=s,r()}finally{ue.p=l}}var en=Math.random().toString(36).slice(2),ft="__reactFiber$"+en,Mt="__reactProps$"+en,En="__reactContainer$"+en,vs="__reactEvents$"+en,sa="__reactListeners$"+en,Dt="__reactHandles$"+en,rt="__reactResources$"+en,ii="__reactMarker$"+en;function si(s){delete s[ft],delete s[Mt],delete s[vs],delete s[sa],delete s[Dt]}function ri(s){var r=s[ft];if(r)return r;for(var l=s.parentNode;l;){if(r=l[En]||l[ft]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=o0(s);s!==null;){if(l=s[ft])return l;s=o0(s)}return r}s=l,l=s.parentNode}return null}function Sn(s){if(s=s[ft]||s[En]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function An(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function oi(s){var r=s[rt];return r||(r=s[rt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Pt(s){s[ii]=!0}var ro=new Set,Ts={};function Ji(s,r){$i(s,r),$i(s+"Capture",r)}function $i(s,r){for(Ts[s]=r,s=0;s<r.length;s++)ro.add(r[s])}var Al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},Cl={};function nc(s){return Nt.call(Cl,s)?!0:Nt.call(Il,s)?!1:Al.test(s)?Cl[s]=!0:(Il[s]=!0,!1)}function ra(s,r,l){if(nc(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Bn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function qt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function tn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function er(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function lt(s){if(!s._valueTracker){var r=er(s)?"checked":"value";s._valueTracker=wl(s,r,""+s[r])}}function oo(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=er(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Qi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ao=/[\n"\\]/g;function Mn(s){return s.replace(ao,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function oa(s,r,l,c,y,_,A,C){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+tn(r)):s.value!==""+tn(r)&&(s.value=""+tn(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Rl(s,A,tn(r)):l!=null?Rl(s,A,tn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+tn(C):s.removeAttribute("name")}function ic(s,r,l,c,y,_,A,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){lt(s);return}l=l!=null?""+tn(l):"",r=r!=null?""+tn(r):l,C||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=C?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),lt(s)}function Rl(s,r,l){r==="number"&&Qi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function tr(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+tn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function sc(s,r,l){if(r!=null&&(r=""+tn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+tn(l):""}function nr(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(gt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=tn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),lt(s)}function Dn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||rc.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Nl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&bl(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&bl(s,_,r[_])}function aa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(s){return ir.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ci(){}var xl=null;function ai(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var sr=null,Wi=null;function lo(s){var r=Sn(s);if(r&&(s=r.stateNode)){var l=s[Mt]||null;e:switch(s=r.stateNode,r.type){case"input":if(oa(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Mn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Mt]||null;if(!y)throw Error(i(90));oa(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&oo(c)}break e;case"textarea":sc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&tr(s,!!l.multiple,r,!1)}}}var ua=!1;function rr(s,r,l){if(ua)return s(r,l);ua=!0;try{var c=s(r);return c}finally{if(ua=!1,(sr!==null||Wi!==null)&&(jc(),sr&&(r=sr,s=Wi,Wi=sr=null,lo(r),s)))for(r=0;r<s.length;r++)lo(s[r])}}function wi(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Mt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=!1;if(li)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){uo=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{uo=!1}var Xi=null,Ml=null,co=null;function Dl(){if(co)return co;var s,r=Ml,l=r.length,c,y="value"in Xi?Xi.value:Xi.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return co=y.slice(s,1<c?1-c:void 0)}function fo(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Es(){return!0}function Ri(){return!1}function an(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(l=s[C],this[C]=l?l(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Es:Ri,this.isPropagationStopped=Ri,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),r}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=an(Ss),or=T({},Ss,{view:0,detail:0}),Pl=an(or),ar,ca,ji,fa=T({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ji&&(ji&&s.type==="mousemove"?(ar=s.screenX-ji.screenX,ca=s.screenY-ji.screenY):ca=ar=0,ji=s),ar)},movementY:function(s){return"movementY"in s?s.movementY:ca}}),Vl=an(fa),ho=T({},fa,{dataTransfer:0}),ac=an(ho),lc=T({},or,{relatedTarget:0}),po=an(lc),kl=T({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),uc=an(kl),da=T({},Ss,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),cc=an(da),fc=T({},Ss,{data:0}),es=an(fc),dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=pc[s])?!!r[s]:!1}function lr(){return mc}var In=T({},or,{key:function(s){if(s.key){var r=dc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=fo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(s){return s.type==="keypress"?fo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),gc=an(In),yc=T({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),As=an(yc),g=T({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),E=an(g),I=T({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=an(I),B=T({},fa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$=an(B),le=T({},Ss,{newState:0,oldState:0}),Ue=an(le),Lt=[9,13,27,32],it=li&&"CompositionEvent"in window,It=null;li&&"documentMode"in document&&(It=document.documentMode);var ui=li&&"TextEvent"in window&&!It,ts=li&&(!it||It&&8<It&&11>=It),bi=" ",Ni=!1;function mo(s,r){switch(s){case"keyup":return Lt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ha(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var pa=!1;function Zw(s,r){switch(s){case"compositionend":return ha(r);case"keypress":return r.which!==32?null:(Ni=!0,bi);case"textInput":return s=r.data,s===bi&&Ni?null:s;default:return null}}function jw(s,r){if(pa)return s==="compositionend"||!it&&mo(s,r)?(s=Dl(),co=Ml=Xi=null,pa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ts&&r.locale!=="ko"?null:r.data;default:return null}}var eR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!eR[s.type]:r==="textarea"}function cy(s,r,l,c){sr?Wi?Wi.push(c):Wi=[c]:sr=c,r=af(r,"onChange"),0<r.length&&(l=new Zi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Ll=null,Ul=null;function tR(s){Yv(s,0)}function _c(s){var r=An(s);if(oo(r))return s}function fy(s,r){if(s==="change")return r}var dy=!1;if(li){var Qd;if(li){var Wd="oninput"in document;if(!Wd){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),Wd=typeof hy.oninput=="function"}Qd=Wd}else Qd=!1;dy=Qd&&(!document.documentMode||9<document.documentMode)}function py(){Ll&&(Ll.detachEvent("onpropertychange",my),Ul=Ll=null)}function my(s){if(s.propertyName==="value"&&_c(Ul)){var r=[];cy(r,Ul,s,ai(s)),rr(tR,r)}}function nR(s,r,l){s==="focusin"?(py(),Ll=r,Ul=l,Ll.attachEvent("onpropertychange",my)):s==="focusout"&&py()}function iR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return _c(Ul)}function sR(s,r){if(s==="click")return _c(r)}function rR(s,r){if(s==="input"||s==="change")return _c(r)}function oR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var zn=typeof Object.is=="function"?Object.is:oR;function Ol(s,r){if(zn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Nt.call(r,y)||!zn(s[y],r[y]))return!1}return!0}function gy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function yy(s,r){var l=gy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gy(l)}}function _y(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?_y(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function vy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Qi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Qi(s.document)}return r}function Xd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var aR=li&&"documentMode"in document&&11>=document.documentMode,ma=null,Zd=null,Fl=null,jd=!1;function Ty(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jd||ma==null||ma!==Qi(c)||(c=ma,"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Fl&&Ol(Fl,c)||(Fl=c,c=af(Zd,"onSelect"),0<c.length&&(r=new Zi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=ma)))}function go(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var ga={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionrun:go("Transition","TransitionRun"),transitionstart:go("Transition","TransitionStart"),transitioncancel:go("Transition","TransitionCancel"),transitionend:go("Transition","TransitionEnd")},eh={},Ey={};li&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function yo(s){if(eh[s])return eh[s];if(!ga[s])return s;var r=ga[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Ey)return eh[s]=r[l];return s}var Sy=yo("animationend"),Ay=yo("animationiteration"),Iy=yo("animationstart"),lR=yo("transitionrun"),uR=yo("transitionstart"),cR=yo("transitioncancel"),Cy=yo("transitionend"),wy=new Map,th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");th.push("scrollEnd");function xi(s,r){wy.set(s,r),Ji(r,[s])}var vc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ci=[],ya=0,nh=0;function Tc(){for(var s=ya,r=nh=ya=0;r<s;){var l=ci[r];ci[r++]=null;var c=ci[r];ci[r++]=null;var y=ci[r];ci[r++]=null;var _=ci[r];if(ci[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Ry(l,y,_)}}function Ec(s,r,l,c){ci[ya++]=s,ci[ya++]=r,ci[ya++]=l,ci[ya++]=c,nh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function ih(s,r,l,c){return Ec(s,r,l,c),Sc(s)}function _o(s,r){return Ec(s,null,null,r),Sc(s)}function Ry(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-yt(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function Sc(s){if(50<au)throw au=0,dp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var _a={};function fR(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,r,l,c){return new fR(s,r,l,c)}function sh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Is(s,r){var l=s.alternate;return l===null?(l=Kn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function by(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Ac(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")sh(s)&&(A=1);else if(typeof s=="string")A=gb(s,l,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Kn(31,l,r,y),s.elementType=N,s.lanes=_,s;case H:return vo(l.children,y,_,r);case U:A=8,y|=24;break;case W:return s=Kn(12,l,r,y|2),s.elementType=W,s.lanes=_,s;case pe:return s=Kn(13,l,r,y),s.elementType=pe,s.lanes=_,s;case fe:return s=Kn(19,l,r,y),s.elementType=fe,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:A=10;break e;case oe:A=9;break e;case ae:A=11;break e;case M:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Kn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function vo(s,r,l,c){return s=Kn(7,s,c,r),s.lanes=l,s}function rh(s,r,l){return s=Kn(6,s,null,r),s.lanes=l,s}function Ny(s){var r=Kn(18,null,null,0);return r.stateNode=s,r}function oh(s,r,l){return r=Kn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var xy=new WeakMap;function fi(s,r){if(typeof s=="object"&&s!==null){var l=xy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Xs(r)},xy.set(s,r),r)}return{value:s,source:r,stack:Xs(r)}}var va=[],Ta=0,Ic=null,ql=0,di=[],hi=0,ur=null,ns=1,is="";function Cs(s,r){va[Ta++]=ql,va[Ta++]=Ic,Ic=s,ql=r}function My(s,r,l){di[hi++]=ns,di[hi++]=is,di[hi++]=ur,ur=s;var c=ns;s=is;var y=32-yt(c)-1;c&=~(1<<y),l+=1;var _=32-yt(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,ns=1<<32-yt(r)+y|l<<y|c,is=_+s}else ns=1<<_|l<<y|c,is=s}function ah(s){s.return!==null&&(Cs(s,1),My(s,1,0))}function lh(s){for(;s===Ic;)Ic=va[--Ta],va[Ta]=null,ql=va[--Ta],va[Ta]=null;for(;s===ur;)ur=di[--hi],di[hi]=null,is=di[--hi],di[hi]=null,ns=di[--hi],di[hi]=null}function Dy(s,r){di[hi++]=ns,di[hi++]=is,di[hi++]=ur,ns=r.id,is=r.overflow,ur=s}var ln=null,Et=null,Xe=!1,cr=null,pi=!1,uh=Error(i(519));function fr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(fi(r,s)),uh}function Py(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[ft]=s,r[Mt]=c,l){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(l=0;l<uu.length;l++)Be(uu[l],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),ic(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),nr(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Wv(r.textContent,l)?(c.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),c.onScroll!=null&&Be("scroll",r),c.onScrollEnd!=null&&Be("scrollend",r),c.onClick!=null&&(r.onclick=Ci),r=!0):r=!1,r||fr(s,!0)}function Vy(s){for(ln=s.return;ln;)switch(ln.tag){case 5:case 31:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:ln=ln.return}}function Ea(s){if(s!==ln)return!1;if(!Xe)return Vy(s),Xe=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Rp(s.type,s.memoizedProps)),l=!l),l&&Et&&fr(s),Vy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Et=r0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Et=r0(s)}else r===27?(r=Et,Cr(s.type)?(s=Dp,Dp=null,Et=s):Et=r):Et=ln?gi(s.stateNode.nextSibling):null;return!0}function To(){Et=ln=null,Xe=!1}function ch(){var s=cr;return s!==null&&(Ln===null?Ln=s:Ln.push.apply(Ln,s),cr=null),s}function Hl(s){cr===null?cr=[s]:cr.push(s)}var fh=O(null),Eo=null,ws=null;function dr(s,r,l){ce(fh,r._currentValue),r._currentValue=l}function Rs(s){s._currentValue=fh.current,te(fh)}function dh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function hh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=y;for(var V=0;V<r.length;V++)if(C.context===r[V]){_.lanes|=l,C=_.alternate,C!==null&&(C.lanes|=l),dh(_.return,l,s),c||(A=null);break e}_=C.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),dh(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Sa(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var C=y.type;zn(y.pendingProps.value,A.value)||(s!==null?s.push(C):s=[C])}}else if(y===Ke.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(pu):s=[pu])}y=y.return}s!==null&&hh(r,s,l,c),r.flags|=262144}function Cc(s){for(s=s.firstContext;s!==null;){if(!zn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function So(s){Eo=s,ws=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function un(s){return ky(Eo,s)}function wc(s,r){return Eo===null&&So(s),ky(s,r)}function ky(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ws===null){if(s===null)throw Error(i(308));ws=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ws=ws.next=r;return l}var dR=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},hR=n.unstable_scheduleCallback,pR=n.unstable_NormalPriority,Ht={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ph(){return{controller:new dR,data:new Map,refCount:0}}function Gl(s){s.refCount--,s.refCount===0&&hR(pR,function(){s.controller.abort()})}var Bl=null,mh=0,Aa=0,Ia=null;function mR(s,r){if(Bl===null){var l=Bl=[];mh=0,Aa=_p(),Ia={status:"pending",value:void 0,then:function(c){l.push(c)}}}return mh++,r.then(Ly,Ly),r}function Ly(){if(--mh===0&&Bl!==null){Ia!==null&&(Ia.status="fulfilled");var s=Bl;Bl=null,Aa=0,Ia=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function gR(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Uy=J.S;J.S=function(s,r){Tv=se(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&mR(s,r),Uy!==null&&Uy(s,r)};var Ao=O(null);function gh(){var s=Ao.current;return s!==null?s:_t.pooledCache}function Rc(s,r){r===null?ce(Ao,Ao.current):ce(Ao,r.pool)}function Oy(){var s=gh();return s===null?null:{parent:Ht._currentValue,pool:s}}var Ca=Error(i(460)),yh=Error(i(474)),bc=Error(i(542)),Nc={then:function(){}};function Fy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function qy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Ci,Ci),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Gy(s),s;default:if(typeof r.status=="string")r.then(Ci,Ci);else{if(s=_t,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Gy(s),s}throw Co=r,Ca}}function Io(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Co=l,Ca):l}}var Co=null;function Hy(){if(Co===null)throw Error(i(459));var s=Co;return Co=null,s}function Gy(s){if(s===Ca||s===bc)throw Error(i(483))}var wa=null,zl=0;function xc(s){var r=zl;return zl+=1,wa===null&&(wa=[]),qy(wa,s,r)}function Kl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Mc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function By(s){function r(G,F){if(s){var z=G.deletions;z===null?(G.deletions=[F],G.flags|=16):z.push(F)}}function l(G,F){if(!s)return null;for(;F!==null;)r(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function y(G,F){return G=Is(G,F),G.index=0,G.sibling=null,G}function _(G,F,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<F?(G.flags|=67108866,F):z):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function A(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function C(G,F,z,j){return F===null||F.tag!==6?(F=rh(z,G.mode,j),F.return=G,F):(F=y(F,z),F.return=G,F)}function V(G,F,z,j){var Se=z.type;return Se===H?X(G,F,z.props.children,j,z.key):F!==null&&(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===x&&Io(Se)===F.type)?(F=y(F,z.props),Kl(F,z),F.return=G,F):(F=Ac(z.type,z.key,z.props,null,G.mode,j),Kl(F,z),F.return=G,F)}function K(G,F,z,j){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=oh(z,G.mode,j),F.return=G,F):(F=y(F,z.children||[]),F.return=G,F)}function X(G,F,z,j,Se){return F===null||F.tag!==7?(F=vo(z,G.mode,j,Se),F.return=G,F):(F=y(F,z),F.return=G,F)}function ne(G,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=rh(""+F,G.mode,z),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return z=Ac(F.type,F.key,F.props,null,G.mode,z),Kl(z,F),z.return=G,z;case L:return F=oh(F,G.mode,z),F.return=G,F;case x:return F=Io(F),ne(G,F,z)}if(gt(F)||q(F))return F=vo(F,G.mode,z,null),F.return=G,F;if(typeof F.then=="function")return ne(G,xc(F),z);if(F.$$typeof===Z)return ne(G,wc(G,F),z);Mc(G,F)}return null}function Y(G,F,z,j){var Se=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Se!==null?null:C(G,F,""+z,j);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return z.key===Se?V(G,F,z,j):null;case L:return z.key===Se?K(G,F,z,j):null;case x:return z=Io(z),Y(G,F,z,j)}if(gt(z)||q(z))return Se!==null?null:X(G,F,z,j,null);if(typeof z.then=="function")return Y(G,F,xc(z),j);if(z.$$typeof===Z)return Y(G,F,wc(G,z),j);Mc(G,z)}return null}function Q(G,F,z,j,Se){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(z)||null,C(F,G,""+j,Se);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case R:return G=G.get(j.key===null?z:j.key)||null,V(F,G,j,Se);case L:return G=G.get(j.key===null?z:j.key)||null,K(F,G,j,Se);case x:return j=Io(j),Q(G,F,z,j,Se)}if(gt(j)||q(j))return G=G.get(z)||null,X(F,G,j,Se,null);if(typeof j.then=="function")return Q(G,F,z,xc(j),Se);if(j.$$typeof===Z)return Q(G,F,z,wc(F,j),Se);Mc(F,j)}return null}function ve(G,F,z,j){for(var Se=null,et=null,Te=F,Fe=F=0,Je=null;Te!==null&&Fe<z.length;Fe++){Te.index>Fe?(Je=Te,Te=null):Je=Te.sibling;var tt=Y(G,Te,z[Fe],j);if(tt===null){Te===null&&(Te=Je);break}s&&Te&&tt.alternate===null&&r(G,Te),F=_(tt,F,Fe),et===null?Se=tt:et.sibling=tt,et=tt,Te=Je}if(Fe===z.length)return l(G,Te),Xe&&Cs(G,Fe),Se;if(Te===null){for(;Fe<z.length;Fe++)Te=ne(G,z[Fe],j),Te!==null&&(F=_(Te,F,Fe),et===null?Se=Te:et.sibling=Te,et=Te);return Xe&&Cs(G,Fe),Se}for(Te=c(Te);Fe<z.length;Fe++)Je=Q(Te,G,Fe,z[Fe],j),Je!==null&&(s&&Je.alternate!==null&&Te.delete(Je.key===null?Fe:Je.key),F=_(Je,F,Fe),et===null?Se=Je:et.sibling=Je,et=Je);return s&&Te.forEach(function(xr){return r(G,xr)}),Xe&&Cs(G,Fe),Se}function Ce(G,F,z,j){if(z==null)throw Error(i(151));for(var Se=null,et=null,Te=F,Fe=F=0,Je=null,tt=z.next();Te!==null&&!tt.done;Fe++,tt=z.next()){Te.index>Fe?(Je=Te,Te=null):Je=Te.sibling;var xr=Y(G,Te,tt.value,j);if(xr===null){Te===null&&(Te=Je);break}s&&Te&&xr.alternate===null&&r(G,Te),F=_(xr,F,Fe),et===null?Se=xr:et.sibling=xr,et=xr,Te=Je}if(tt.done)return l(G,Te),Xe&&Cs(G,Fe),Se;if(Te===null){for(;!tt.done;Fe++,tt=z.next())tt=ne(G,tt.value,j),tt!==null&&(F=_(tt,F,Fe),et===null?Se=tt:et.sibling=tt,et=tt);return Xe&&Cs(G,Fe),Se}for(Te=c(Te);!tt.done;Fe++,tt=z.next())tt=Q(Te,G,Fe,tt.value,j),tt!==null&&(s&&tt.alternate!==null&&Te.delete(tt.key===null?Fe:tt.key),F=_(tt,F,Fe),et===null?Se=tt:et.sibling=tt,et=tt);return s&&Te.forEach(function(Rb){return r(G,Rb)}),Xe&&Cs(G,Fe),Se}function mt(G,F,z,j){if(typeof z=="object"&&z!==null&&z.type===H&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case R:e:{for(var Se=z.key;F!==null;){if(F.key===Se){if(Se=z.type,Se===H){if(F.tag===7){l(G,F.sibling),j=y(F,z.props.children),j.return=G,G=j;break e}}else if(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===x&&Io(Se)===F.type){l(G,F.sibling),j=y(F,z.props),Kl(j,z),j.return=G,G=j;break e}l(G,F);break}else r(G,F);F=F.sibling}z.type===H?(j=vo(z.props.children,G.mode,j,z.key),j.return=G,G=j):(j=Ac(z.type,z.key,z.props,null,G.mode,j),Kl(j,z),j.return=G,G=j)}return A(G);case L:e:{for(Se=z.key;F!==null;){if(F.key===Se)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(G,F.sibling),j=y(F,z.children||[]),j.return=G,G=j;break e}else{l(G,F);break}else r(G,F);F=F.sibling}j=oh(z,G.mode,j),j.return=G,G=j}return A(G);case x:return z=Io(z),mt(G,F,z,j)}if(gt(z))return ve(G,F,z,j);if(q(z)){if(Se=q(z),typeof Se!="function")throw Error(i(150));return z=Se.call(z),Ce(G,F,z,j)}if(typeof z.then=="function")return mt(G,F,xc(z),j);if(z.$$typeof===Z)return mt(G,F,wc(G,z),j);Mc(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(G,F.sibling),j=y(F,z),j.return=G,G=j):(l(G,F),j=rh(z,G.mode,j),j.return=G,G=j),A(G)):l(G,F)}return function(G,F,z,j){try{zl=0;var Se=mt(G,F,z,j);return wa=null,Se}catch(Te){if(Te===Ca||Te===bc)throw Te;var et=Kn(29,Te,null,G.mode);return et.lanes=j,et.return=G,et}finally{}}}var wo=By(!0),zy=By(!1),hr=!1;function _h(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function mr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Sc(s),Ry(s,null,l),r}return Ec(s,c,r,l),Sc(s)}function Yl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ee(s,l)}}function Th(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Eh=!1;function Jl(){if(Eh){var s=Ia;if(s!==null)throw s}}function $l(s,r,l,c){Eh=!1;var y=s.updateQueue;hr=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var V=C,K=V.next;V.next=null,A===null?_=K:A.next=K,A=V;var X=s.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==A&&(C===null?X.firstBaseUpdate=K:C.next=K,X.lastBaseUpdate=V))}if(_!==null){var ne=y.baseState;A=0,X=K=V=null,C=_;do{var Y=C.lane&-536870913,Q=Y!==C.lane;if(Q?(Ye&Y)===Y:(c&Y)===Y){Y!==0&&Y===Aa&&(Eh=!0),X!==null&&(X=X.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ve=s,Ce=C;Y=r;var mt=l;switch(Ce.tag){case 1:if(ve=Ce.payload,typeof ve=="function"){ne=ve.call(mt,ne,Y);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ce.payload,Y=typeof ve=="function"?ve.call(mt,ne,Y):ve,Y==null)break e;ne=T({},ne,Y);break e;case 2:hr=!0}}Y=C.callback,Y!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(K=X=Q,V=ne):X=X.next=Q,A|=Y;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);X===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=K,y.lastBaseUpdate=X,_===null&&(y.shared.lanes=0),Tr|=A,s.lanes=A,s.memoizedState=ne}}function Ky(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Yy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Ky(l[s],r)}var Ra=O(null),Dc=O(0);function Jy(s,r){s=Ls,ce(Dc,s),ce(Ra,r),Ls=s|r.baseLanes}function Sh(){ce(Dc,Ls),ce(Ra,Ra.current)}function Ah(){Ls=Dc.current,te(Ra),te(Dc)}var Yn=O(null),mi=null;function gr(s){var r=s.alternate;ce(Ut,Ut.current&1),ce(Yn,s),mi===null&&(r===null||Ra.current!==null||r.memoizedState!==null)&&(mi=s)}function Ih(s){ce(Ut,Ut.current),ce(Yn,s),mi===null&&(mi=s)}function $y(s){s.tag===22?(ce(Ut,Ut.current),ce(Yn,s),mi===null&&(mi=s)):yr()}function yr(){ce(Ut,Ut.current),ce(Yn,Yn.current)}function Jn(s){te(Yn),mi===s&&(mi=null),te(Ut)}var Ut=O(0);function Pc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||xp(l)||Mp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var bs=0,Oe=null,ht=null,Gt=null,Vc=!1,ba=!1,Ro=!1,kc=0,Ql=0,Na=null,yR=0;function Vt(){throw Error(i(321))}function Ch(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!zn(s[l],r[l]))return!1;return!0}function wh(s,r,l,c,y,_){return bs=_,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=s===null||s.memoizedState===null?M_:Hh,Ro=!1,_=l(c,y),Ro=!1,ba&&(_=Wy(r,l,c,y)),Qy(s),_}function Qy(s){J.H=Zl;var r=ht!==null&&ht.next!==null;if(bs=0,Gt=ht=Oe=null,Vc=!1,Ql=0,Na=null,r)throw Error(i(300));s===null||Bt||(s=s.dependencies,s!==null&&Cc(s)&&(Bt=!0))}function Wy(s,r,l,c){Oe=s;var y=0;do{if(ba&&(Na=null),Ql=0,ba=!1,25<=y)throw Error(i(301));if(y+=1,Gt=ht=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=D_,_=r(l,c)}while(ba);return _}function _R(){var s=J.H,r=s.useState()[0];return r=typeof r.then=="function"?Wl(r):r,s=s.useState()[0],(ht!==null?ht.memoizedState:null)!==s&&(Oe.flags|=1024),r}function Rh(){var s=kc!==0;return kc=0,s}function bh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Nh(s){if(Vc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Vc=!1}bs=0,Gt=ht=Oe=null,ba=!1,Ql=kc=0,Na=null}function Cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Oe.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function Ot(){if(ht===null){var s=Oe.alternate;s=s!==null?s.memoizedState:null}else s=ht.next;var r=Gt===null?Oe.memoizedState:Gt.next;if(r!==null)Gt=r,ht=s;else{if(s===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));ht=s,s={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Gt===null?Oe.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function Lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(s){var r=Ql;return Ql+=1,Na===null&&(Na=[]),s=qy(Na,s,r),r=Oe,(Gt===null?r.memoizedState:Gt.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?M_:Hh),s}function Uc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Wl(s);if(s.$$typeof===Z)return un(s)}throw Error(i(438,String(s)))}function xh(s){var r=null,l=Oe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Lc(),Oe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=P;return r.index++,l}function Ns(s,r){return typeof r=="function"?r(s):r}function Oc(s){var r=Ot();return Mh(r,ht,s)}function Mh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var C=A=null,V=null,K=r,X=!1;do{var ne=K.lane&-536870913;if(ne!==K.lane?(Ye&ne)===ne:(bs&ne)===ne){var Y=K.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ne===Aa&&(X=!0);else if((bs&Y)===Y){K=K.next,Y===Aa&&(X=!0);continue}else ne={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(C=V=ne,A=_):V=V.next=ne,Oe.lanes|=Y,Tr|=Y;ne=K.action,Ro&&l(_,ne),_=K.hasEagerState?K.eagerState:l(_,ne)}else Y={lane:ne,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(C=V=Y,A=_):V=V.next=Y,Oe.lanes|=ne,Tr|=ne;K=K.next}while(K!==null&&K!==r);if(V===null?A=_:V.next=C,!zn(_,s.memoizedState)&&(Bt=!0,X&&(l=Ia,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=V,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Dh(s){var r=Ot(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);zn(_,r.memoizedState)||(Bt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Xy(s,r,l){var c=Oe,y=Ot(),_=Xe;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!zn((ht||y).memoizedState,l);if(A&&(y.memoizedState=l,Bt=!0),y=y.queue,kh(e_.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,xa(9,{destroy:void 0},jy.bind(null,c,y,l,r),null),_t===null)throw Error(i(349));_||(bs&127)!==0||Zy(c,r,l)}return l}function Zy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Oe.updateQueue,r===null?(r=Lc(),Oe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function jy(s,r,l,c){r.value=l,r.getSnapshot=c,t_(r)&&n_(s)}function e_(s,r,l){return l(function(){t_(r)&&n_(s)})}function t_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!zn(s,l)}catch{return!0}}function n_(s){var r=_o(s,2);r!==null&&Un(r,s,2)}function Ph(s){var r=Cn();if(typeof s=="function"){var l=s;if(s=l(),Ro){xn(!0);try{l()}finally{xn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:s},r}function i_(s,r,l,c){return s.baseState=l,Mh(s,ht,typeof c=="function"?c:Ns)}function vR(s,r,l,c,y){if(Hc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};J.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,s_(r,_)):(_.next=l.next,r.pending=l.next=_)}}function s_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=J.T,A={};J.T=A;try{var C=l(y,c),V=J.S;V!==null&&V(A,C),r_(s,r,C)}catch(K){Vh(s,r,K)}finally{_!==null&&A.types!==null&&(_.types=A.types),J.T=_}}else try{_=l(y,c),r_(s,r,_)}catch(K){Vh(s,r,K)}}function r_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){o_(s,r,c)},function(c){return Vh(s,r,c)}):o_(s,r,l)}function o_(s,r,l){r.status="fulfilled",r.value=l,a_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,s_(s,l)))}function Vh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,a_(r),r=r.next;while(r!==c)}s.action=null}function a_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function l_(s,r){return r}function u_(s,r){if(Xe){var l=_t.formState;if(l!==null){e:{var c=Oe;if(Xe){if(Et){t:{for(var y=Et,_=pi;y.nodeType!==8;){if(!_){y=null;break t}if(y=gi(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Et=gi(y.nextSibling),c=y.data==="F!";break e}}fr(c)}c=!1}c&&(r=l[0])}}return l=Cn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l_,lastRenderedState:r},l.queue=c,l=b_.bind(null,Oe,c),c.dispatch=l,c=Ph(!1),_=qh.bind(null,Oe,!1,c.queue),c=Cn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=vR.bind(null,Oe,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function c_(s){var r=Ot();return f_(r,ht,s)}function f_(s,r,l){if(r=Mh(s,r,l_)[0],s=Oc(Ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Wl(r)}catch(A){throw A===Ca?bc:A}else c=r;r=Ot();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Oe.flags|=2048,xa(9,{destroy:void 0},TR.bind(null,y,l),null)),[c,_,s]}function TR(s,r){s.action=r}function d_(s){var r=Ot(),l=ht;if(l!==null)return f_(r,l,s);Ot(),r=r.memoizedState,l=Ot();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function xa(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Oe.updateQueue,r===null&&(r=Lc(),Oe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function h_(){return Ot().memoizedState}function Fc(s,r,l,c){var y=Cn();Oe.flags|=s,y.memoizedState=xa(1|r,{destroy:void 0},l,c===void 0?null:c)}function qc(s,r,l,c){var y=Ot();c=c===void 0?null:c;var _=y.memoizedState.inst;ht!==null&&c!==null&&Ch(c,ht.memoizedState.deps)?y.memoizedState=xa(r,_,l,c):(Oe.flags|=s,y.memoizedState=xa(1|r,_,l,c))}function p_(s,r){Fc(8390656,8,s,r)}function kh(s,r){qc(2048,8,s,r)}function ER(s){Oe.flags|=4;var r=Oe.updateQueue;if(r===null)r=Lc(),Oe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function m_(s){var r=Ot().memoizedState;return ER({ref:r,nextImpl:s}),function(){if((st&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function g_(s,r){return qc(4,2,s,r)}function y_(s,r){return qc(4,4,s,r)}function __(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function v_(s,r,l){l=l!=null?l.concat([s]):null,qc(4,4,__.bind(null,r,s),l)}function Lh(){}function T_(s,r){var l=Ot();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Ch(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function E_(s,r){var l=Ot();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Ch(r,c[1]))return c[0];if(c=s(),Ro){xn(!0);try{s()}finally{xn(!1)}}return l.memoizedState=[c,r],c}function Uh(s,r,l){return l===void 0||(bs&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Sv(),Oe.lanes|=s,Tr|=s,l)}function S_(s,r,l,c){return zn(l,r)?l:Ra.current!==null?(s=Uh(s,l,c),zn(s,r)||(Bt=!0),s):(bs&42)===0||(bs&1073741824)!==0&&(Ye&261930)===0?(Bt=!0,s.memoizedState=l):(s=Sv(),Oe.lanes|=s,Tr|=s,r)}function A_(s,r,l,c,y){var _=ue.p;ue.p=_!==0&&8>_?_:8;var A=J.T,C={};J.T=C,qh(s,!1,r,l);try{var V=y(),K=J.S;if(K!==null&&K(C,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var X=gR(V,c);Xl(s,r,X,Wn(s))}else Xl(s,r,c,Wn(s))}catch(ne){Xl(s,r,{then:function(){},status:"rejected",reason:ne},Wn())}finally{ue.p=_,A!==null&&C.types!==null&&(A.types=C.types),J.T=A}}function SR(){}function Oh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=I_(s).queue;A_(s,y,r,Ee,l===null?SR:function(){return C_(s),l(c)})}function I_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:Ee},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function C_(s){var r=I_(s);r.next===null&&(r=s.alternate.memoizedState),Xl(s,r.next.queue,{},Wn())}function Fh(){return un(pu)}function w_(){return Ot().memoizedState}function R_(){return Ot().memoizedState}function AR(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Wn();s=pr(l);var c=mr(r,s,l);c!==null&&(Un(c,r,l),Yl(c,r,l)),r={cache:ph()},s.payload=r;return}r=r.return}}function IR(s,r,l){var c=Wn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Hc(s)?N_(r,l):(l=ih(s,r,l,c),l!==null&&(Un(l,s,c),x_(l,r,c)))}function b_(s,r,l){var c=Wn();Xl(s,r,l,c)}function Xl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Hc(s))N_(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,C=_(A,l);if(y.hasEagerState=!0,y.eagerState=C,zn(C,A))return Ec(s,r,y,0),_t===null&&Tc(),!1}catch{}finally{}if(l=ih(s,r,y,c),l!==null)return Un(l,s,c),x_(l,r,c),!0}return!1}function qh(s,r,l,c){if(c={lane:2,revertLane:_p(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Hc(s)){if(r)throw Error(i(479))}else r=ih(s,l,c,2),r!==null&&Un(r,s,2)}function Hc(s){var r=s.alternate;return s===Oe||r!==null&&r===Oe}function N_(s,r){ba=Vc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function x_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ee(s,l)}}var Zl={readContext:un,use:Uc,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Zl.useEffectEvent=Vt;var M_={readContext:un,use:Uc,useCallback:function(s,r){return Cn().memoizedState=[s,r===void 0?null:r],s},useContext:un,useEffect:p_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Fc(4194308,4,__.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Fc(4194308,4,s,r)},useInsertionEffect:function(s,r){Fc(4,2,s,r)},useMemo:function(s,r){var l=Cn();r=r===void 0?null:r;var c=s();if(Ro){xn(!0);try{s()}finally{xn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=Cn();if(l!==void 0){var y=l(r);if(Ro){xn(!0);try{l(r)}finally{xn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=IR.bind(null,Oe,s),[c.memoizedState,s]},useRef:function(s){var r=Cn();return s={current:s},r.memoizedState=s},useState:function(s){s=Ph(s);var r=s.queue,l=b_.bind(null,Oe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Lh,useDeferredValue:function(s,r){var l=Cn();return Uh(l,s,r)},useTransition:function(){var s=Ph(!1);return s=A_.bind(null,Oe,s.queue,!0,!1),Cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Oe,y=Cn();if(Xe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),_t===null)throw Error(i(349));(Ye&127)!==0||Zy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,p_(e_.bind(null,c,_,s),[s]),c.flags|=2048,xa(9,{destroy:void 0},jy.bind(null,c,_,l,r),null),l},useId:function(){var s=Cn(),r=_t.identifierPrefix;if(Xe){var l=is,c=ns;l=(c&~(1<<32-yt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=kc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=yR++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Fh,useFormState:u_,useActionState:u_,useOptimistic:function(s){var r=Cn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=qh.bind(null,Oe,!0,l),l.dispatch=r,[s,r]},useMemoCache:xh,useCacheRefresh:function(){return Cn().memoizedState=AR.bind(null,Oe)},useEffectEvent:function(s){var r=Cn(),l={impl:s};return r.memoizedState=l,function(){if((st&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Hh={readContext:un,use:Uc,useCallback:T_,useContext:un,useEffect:kh,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:Oc,useRef:h_,useState:function(){return Oc(Ns)},useDebugValue:Lh,useDeferredValue:function(s,r){var l=Ot();return S_(l,ht.memoizedState,s,r)},useTransition:function(){var s=Oc(Ns)[0],r=Ot().memoizedState;return[typeof s=="boolean"?s:Wl(s),r]},useSyncExternalStore:Xy,useId:w_,useHostTransitionStatus:Fh,useFormState:c_,useActionState:c_,useOptimistic:function(s,r){var l=Ot();return i_(l,ht,s,r)},useMemoCache:xh,useCacheRefresh:R_};Hh.useEffectEvent=m_;var D_={readContext:un,use:Uc,useCallback:T_,useContext:un,useEffect:kh,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:Dh,useRef:h_,useState:function(){return Dh(Ns)},useDebugValue:Lh,useDeferredValue:function(s,r){var l=Ot();return ht===null?Uh(l,s,r):S_(l,ht.memoizedState,s,r)},useTransition:function(){var s=Dh(Ns)[0],r=Ot().memoizedState;return[typeof s=="boolean"?s:Wl(s),r]},useSyncExternalStore:Xy,useId:w_,useHostTransitionStatus:Fh,useFormState:d_,useActionState:d_,useOptimistic:function(s,r){var l=Ot();return ht!==null?i_(l,ht,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:xh,useCacheRefresh:R_};D_.useEffectEvent=m_;function Gh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Bh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Wn(),y=pr(c);y.payload=r,l!=null&&(y.callback=l),r=mr(s,y,c),r!==null&&(Un(r,s,c),Yl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Wn(),y=pr(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=mr(s,y,c),r!==null&&(Un(r,s,c),Yl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Wn(),c=pr(l);c.tag=2,r!=null&&(c.callback=r),r=mr(s,c,l),r!==null&&(Un(r,s,l),Yl(r,s,l))}};function P_(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!Ol(l,c)||!Ol(y,_):!0}function V_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Bh.enqueueReplaceState(r,r.state,null)}function bo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function k_(s){vc(s)}function L_(s){console.error(s)}function U_(s){vc(s)}function Gc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function O_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function zh(s,r,l){return l=pr(l),l.tag=3,l.payload={element:null},l.callback=function(){Gc(s,r)},l}function F_(s){return s=pr(s),s.tag=3,s}function q_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){O_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){O_(r,l,c),typeof y!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function CR(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Sa(r,l,y,!0),l=Yn.current,l!==null){switch(l.tag){case 31:case 13:return mi===null?ef():l.alternate===null&&kt===0&&(kt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Nc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),mp(s,c,y)),!1;case 22:return l.flags|=65536,c===Nc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),mp(s,c,y)),!1}throw Error(i(435,l.tag))}return mp(s,c,y),ef(),!1}if(Xe)return r=Yn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==uh&&(s=Error(i(422),{cause:c}),Hl(fi(s,l)))):(c!==uh&&(r=Error(i(423),{cause:c}),Hl(fi(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=fi(c,l),y=zh(s.stateNode,c,y),Th(s,y),kt!==4&&(kt=2)),!1;var _=Error(i(520),{cause:c});if(_=fi(_,l),ou===null?ou=[_]:ou.push(_),kt!==4&&(kt=2),r===null)return!0;c=fi(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=zh(l.stateNode,c,s),Th(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Er===null||!Er.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=F_(y),q_(y,s,l,c),Th(l,y),!1}l=l.return}while(l!==null);return!1}var Kh=Error(i(461)),Bt=!1;function cn(s,r,l,c){r.child=s===null?zy(r,null,l,c):wo(r,s.child,l,c)}function H_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var C in c)C!=="ref"&&(A[C]=c[C])}else A=c;return So(r),c=wh(s,r,l,A,_,y),C=Rh(),s!==null&&!Bt?(bh(s,r,y),xs(s,r,y)):(Xe&&C&&ah(r),r.flags|=1,cn(s,r,c,y),r.child)}function G_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!sh(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,B_(s,r,_,c,y)):(s=Ac(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!jh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:Ol,l(A,c)&&s.ref===r.ref)return xs(s,r,y)}return r.flags|=1,s=Is(_,c),s.ref=r.ref,s.return=r,r.child=s}function B_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(Ol(_,c)&&s.ref===r.ref)if(Bt=!1,r.pendingProps=c=_,jh(s,y))(s.flags&131072)!==0&&(Bt=!0);else return r.lanes=s.lanes,xs(s,r,y)}return Yh(s,r,l,c,y)}function z_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return K_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Rc(r,_!==null?_.cachePool:null),_!==null?Jy(r,_):Sh(),$y(r);else return c=r.lanes=536870912,K_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(Rc(r,_.cachePool),Jy(r,_),yr(),r.memoizedState=null):(s!==null&&Rc(r,null),Sh(),yr());return cn(s,r,y,l),r.child}function jl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function K_(s,r,l,c,y){var _=gh();return _=_===null?null:{parent:Ht._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&Rc(r,null),Sh(),$y(r),s!==null&&Sa(s,r,c,!0),r.childLanes=y,null}function Bc(s,r){return r=Kc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function Y_(s,r,l){return wo(r,s.child,null,l),s=Bc(r,r.pendingProps),s.flags|=2,Jn(r),r.memoizedState=null,s}function wR(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Xe){if(c.mode==="hidden")return s=Bc(r,c),r.lanes=536870912,jl(null,s);if(Ih(r),(s=Et)?(s=s0(s,pi),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:ur!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},l=Ny(s),l.return=r,r.child=l,ln=r,Et=null)):s=null,s===null)throw fr(r);return r.lanes=536870912,null}return Bc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(Ih(r),y)if(r.flags&256)r.flags&=-257,r=Y_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Bt||Sa(s,r,l,!1),y=(l&s.childLanes)!==0,Bt||y){if(c=_t,c!==null&&(A=ye(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,_o(s,A),Un(c,s,A),Kh;ef(),r=Y_(s,r,l)}else s=_.treeContext,Et=gi(A.nextSibling),ln=r,Xe=!0,cr=null,pi=!1,s!==null&&Dy(r,s),r=Bc(r,c),r.flags|=4096;return r}return s=Is(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function zc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Yh(s,r,l,c,y){return So(r),l=wh(s,r,l,c,void 0,y),c=Rh(),s!==null&&!Bt?(bh(s,r,y),xs(s,r,y)):(Xe&&c&&ah(r),r.flags|=1,cn(s,r,l,y),r.child)}function J_(s,r,l,c,y,_){return So(r),r.updateQueue=null,l=Wy(r,c,l,y),Qy(s),c=Rh(),s!==null&&!Bt?(bh(s,r,_),xs(s,r,_)):(Xe&&c&&ah(r),r.flags|=1,cn(s,r,l,_),r.child)}function $_(s,r,l,c,y){if(So(r),r.stateNode===null){var _=_a,A=l.contextType;typeof A=="object"&&A!==null&&(_=un(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Bh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},_h(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?un(A):_a,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Gh(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Bh.enqueueReplaceState(_,_.state,null),$l(r,c,_,y),Jl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var C=r.memoizedProps,V=bo(l,C);_.props=V;var K=_.context,X=l.contextType;A=_a,typeof X=="object"&&X!==null&&(A=un(X));var ne=l.getDerivedStateFromProps;X=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||K!==A)&&V_(r,_,c,A),hr=!1;var Y=r.memoizedState;_.state=Y,$l(r,c,_,y),Jl(),K=r.memoizedState,C||Y!==K||hr?(typeof ne=="function"&&(Gh(r,l,ne,c),K=r.memoizedState),(V=hr||P_(r,l,V,c,Y,K,A))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),_.props=c,_.state=K,_.context=A,c=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,vh(s,r),A=r.memoizedProps,X=bo(l,A),_.props=X,ne=r.pendingProps,Y=_.context,K=l.contextType,V=_a,typeof K=="object"&&K!==null&&(V=un(K)),C=l.getDerivedStateFromProps,(K=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||Y!==V)&&V_(r,_,c,V),hr=!1,Y=r.memoizedState,_.state=Y,$l(r,c,_,y),Jl();var Q=r.memoizedState;A!==ne||Y!==Q||hr||s!==null&&s.dependencies!==null&&Cc(s.dependencies)?(typeof C=="function"&&(Gh(r,l,C,c),Q=r.memoizedState),(X=hr||P_(r,l,X,c,Y,Q,V)||s!==null&&s.dependencies!==null&&Cc(s.dependencies))?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=V,c=X):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,zc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=wo(r,s.child,null,y),r.child=wo(r,null,l,y)):cn(s,r,l,y),r.memoizedState=_.state,s=r.child):s=xs(s,r,y),s}function Q_(s,r,l,c){return To(),r.flags|=256,cn(s,r,l,c),r.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $h(s){return{baseLanes:s,cachePool:Oy()}}function Qh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Qn),s}function W_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Ut.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Xe){if(y?gr(r):yr(),(s=Et)?(s=s0(s,pi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:ur!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},l=Ny(s),l.return=r,r.child=l,ln=r,Et=null)):s=null,s===null)throw fr(r);return Mp(s)?r.lanes=32:r.lanes=536870912,null}var C=c.children;return c=c.fallback,y?(yr(),y=r.mode,C=Kc({mode:"hidden",children:C},y),c=vo(c,y,l,null),C.return=r,c.return=r,C.sibling=c,r.child=C,c=r.child,c.memoizedState=$h(l),c.childLanes=Qh(s,A,l),r.memoizedState=Jh,jl(null,c)):(gr(r),Wh(r,C))}var V=s.memoizedState;if(V!==null&&(C=V.dehydrated,C!==null)){if(_)r.flags&256?(gr(r),r.flags&=-257,r=Xh(s,r,l)):r.memoizedState!==null?(yr(),r.child=s.child,r.flags|=128,r=null):(yr(),C=c.fallback,y=r.mode,c=Kc({mode:"visible",children:c.children},y),C=vo(C,y,l,null),C.flags|=2,c.return=r,C.return=r,c.sibling=C,r.child=c,wo(r,s.child,null,l),c=r.child,c.memoizedState=$h(l),c.childLanes=Qh(s,A,l),r.memoizedState=Jh,r=jl(null,c));else if(gr(r),Mp(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(i(419)),c.stack="",c.digest=A,Hl({value:c,source:null,stack:null}),r=Xh(s,r,l)}else if(Bt||Sa(s,r,l,!1),A=(l&s.childLanes)!==0,Bt||A){if(A=_t,A!==null&&(c=ye(A,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,_o(s,c),Un(A,s,c),Kh;xp(C)||ef(),r=Xh(s,r,l)}else xp(C)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,Et=gi(C.nextSibling),ln=r,Xe=!0,cr=null,pi=!1,s!==null&&Dy(r,s),r=Wh(r,c.children),r.flags|=4096);return r}return y?(yr(),C=c.fallback,y=r.mode,V=s.child,K=V.sibling,c=Is(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,K!==null?C=Is(K,C):(C=vo(C,y,l,null),C.flags|=2),C.return=r,c.return=r,c.sibling=C,r.child=c,jl(null,c),c=r.child,C=s.child.memoizedState,C===null?C=$h(l):(y=C.cachePool,y!==null?(V=Ht._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Oy(),C={baseLanes:C.baseLanes|l,cachePool:y}),c.memoizedState=C,c.childLanes=Qh(s,A,l),r.memoizedState=Jh,jl(s.child,c)):(gr(r),l=s.child,s=l.sibling,l=Is(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Wh(s,r){return r=Kc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Kc(s,r){return s=Kn(22,s,null,r),s.lanes=0,s}function Xh(s,r,l){return wo(r,s.child,null,l),s=Wh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function X_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),dh(s.return,r,l)}function Zh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function Z_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Ut.current,C=(A&2)!==0;if(C?(A=A&1|2,r.flags|=128):A&=1,ce(Ut,A),cn(s,r,c,l),c=Xe?ql:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&X_(s,l,r);else if(s.tag===19)X_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Pc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Zh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Pc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Zh(r,!0,l,null,_,c);break;case"together":Zh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function xs(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Tr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Sa(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Is(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Is(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function jh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Cc(s)))}function RR(s,r,l){switch(r.tag){case 3:bt(r,r.stateNode.containerInfo),dr(r,Ht,s.memoizedState.cache),To();break;case 27:case 5:Zn(r);break;case 4:bt(r,r.stateNode.containerInfo);break;case 10:dr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ih(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(gr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?W_(s,r,l):(gr(r),s=xs(s,r,l),s!==null?s.sibling:null);gr(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Sa(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return Z_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Ut,Ut.current),c)break;return null;case 22:return r.lanes=0,z_(s,r,l,r.pendingProps);case 24:dr(r,Ht,s.memoizedState.cache)}return xs(s,r,l)}function j_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Bt=!0;else{if(!jh(s,l)&&(r.flags&128)===0)return Bt=!1,RR(s,r,l);Bt=(s.flags&131072)!==0}else Bt=!1,Xe&&(r.flags&1048576)!==0&&My(r,ql,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Io(r.elementType),r.type=s,typeof s=="function")sh(s)?(c=bo(s,c),r.tag=1,r=$_(null,r,s,c,l)):(r.tag=0,r=Yh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ae){r.tag=11,r=H_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=G_(null,r,s,c,l);break e}}throw r=qe(s)||s,Error(i(306,r,""))}}return r;case 0:return Yh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=bo(c,r.pendingProps),$_(s,r,c,y,l);case 3:e:{if(bt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,vh(s,r),$l(r,c,null,l);var A=r.memoizedState;if(c=A.cache,dr(r,Ht,c),c!==_.cache&&hh(r,[Ht],l,!0),Jl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Q_(s,r,c,l);break e}else if(c!==y){y=fi(Error(i(424)),r),Hl(y),r=Q_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Et=gi(s.firstChild),ln=r,Xe=!0,cr=null,pi=!0,l=zy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(To(),c===y){r=xs(s,r,l);break e}cn(s,r,c,l)}r=r.child}return r;case 26:return zc(s,r),s===null?(l=c0(r.type,null,r.pendingProps,null))?r.memoizedState=l:Xe||(l=r.type,s=r.pendingProps,c=lf(Pe.current).createElement(l),c[ft]=r,c[Mt]=s,fn(c,l,s),Pt(c),r.stateNode=c):r.memoizedState=c0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Zn(r),s===null&&Xe&&(c=r.stateNode=a0(r.type,r.pendingProps,Pe.current),ln=r,pi=!0,y=Et,Cr(r.type)?(Dp=y,Et=gi(c.firstChild)):Et=y),cn(s,r,r.pendingProps.children,l),zc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Xe&&((y=c=Et)&&(c=ib(c,r.type,r.pendingProps,pi),c!==null?(r.stateNode=c,ln=r,Et=gi(c.firstChild),pi=!1,y=!0):y=!1),y||fr(r)),Zn(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,Rp(y,_)?c=null:A!==null&&Rp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=wh(s,r,_R,null,null,l),pu._currentValue=y),zc(s,r),cn(s,r,c,l),r.child;case 6:return s===null&&Xe&&((s=l=Et)&&(l=sb(l,r.pendingProps,pi),l!==null?(r.stateNode=l,ln=r,Et=null,s=!0):s=!1),s||fr(r)),null;case 13:return W_(s,r,l);case 4:return bt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=wo(r,null,c,l):cn(s,r,c,l),r.child;case 11:return H_(s,r,r.type,r.pendingProps,l);case 7:return cn(s,r,r.pendingProps,l),r.child;case 8:return cn(s,r,r.pendingProps.children,l),r.child;case 12:return cn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,dr(r,r.type,c.value),cn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,So(r),y=un(y),c=c(y),r.flags|=1,cn(s,r,c,l),r.child;case 14:return G_(s,r,r.type,r.pendingProps,l);case 15:return B_(s,r,r.type,r.pendingProps,l);case 19:return Z_(s,r,l);case 31:return wR(s,r,l);case 22:return z_(s,r,l,r.pendingProps);case 24:return So(r),c=un(Ht),s===null?(y=gh(),y===null&&(y=_t,_=ph(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},_h(r),dr(r,Ht,y)):((s.lanes&l)!==0&&(vh(s,r),$l(r,null,null,l),Jl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),dr(r,Ht,c)):(c=_.cache,dr(r,Ht,c),c!==y.cache&&hh(r,[Ht],l,!0))),cn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ms(s){s.flags|=4}function ep(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(wv())s.flags|=8192;else throw Co=Nc,yh}else s.flags&=-16777217}function ev(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!m0(r))if(wv())s.flags|=8192;else throw Co=Nc,yh}function Yc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?na():536870912,s.lanes|=r,Va|=r)}function eu(s,r){if(!Xe)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function St(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function bR(s,r,l){var c=r.pendingProps;switch(lh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(r),null;case 1:return St(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Rs(Ht),at(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ea(r)?Ms(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ch())),St(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(Ms(r),_!==null?(St(r),ev(r,_)):(St(r),ep(r,y,null,c,l))):_?_!==s.memoizedState?(Ms(r),St(r),ev(r,_)):(St(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ms(r),St(r),ep(r,y,s,c,l)),null;case 27:if(Ws(r),l=Pe.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return St(r),null}s=de.current,Ea(r)?Py(r):(s=a0(y,c,l),r.stateNode=s,Ms(r))}return St(r),null;case 5:if(Ws(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return St(r),null}if(_=de.current,Ea(r))Py(r);else{var A=lf(Pe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[ft]=r,_[Mt]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(fn(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ms(r)}}return St(r),ep(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Pe.current,Ea(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=ln,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[ft]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Wv(s.nodeValue,l)),s||fr(r,!0)}else s=lf(s).createTextNode(c),s[ft]=r,r.stateNode=s}return St(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Ea(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[ft]=r}else To(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;St(r),s=!1}else l=ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Jn(r),r):(Jn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return St(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ea(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[ft]=r}else To(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;St(r),y=!1}else y=ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Jn(r),r):(Jn(r),null)}return Jn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Yc(r,r.updateQueue),St(r),null);case 4:return at(),s===null&&Sp(r.stateNode.containerInfo),St(r),null;case 10:return Rs(r.type),St(r),null;case 19:if(te(Ut),c=r.memoizedState,c===null)return St(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)eu(c,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=Pc(s),_!==null){for(r.flags|=128,eu(c,!1),s=_.updateQueue,r.updateQueue=s,Yc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)by(l,s),l=l.sibling;return ce(Ut,Ut.current&1|2),Xe&&Cs(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&se()>Xc&&(r.flags|=128,y=!0,eu(c,!1),r.lanes=4194304)}else{if(!y)if(s=Pc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Yc(r,s),eu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Xe)return St(r),null}else 2*se()-c.renderingStartTime>Xc&&l!==536870912&&(r.flags|=128,y=!0,eu(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=se(),s.sibling=null,l=Ut.current,ce(Ut,y?l&1|2:l&1),Xe&&Cs(r,c.treeForkCount),s):(St(r),null);case 22:case 23:return Jn(r),Ah(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(St(r),r.subtreeFlags&6&&(r.flags|=8192)):St(r),l=r.updateQueue,l!==null&&Yc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&te(Ao),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Rs(Ht),St(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function NR(s,r){switch(lh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Rs(Ht),at(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ws(r),null;case 31:if(r.memoizedState!==null){if(Jn(r),r.alternate===null)throw Error(i(340));To()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Jn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));To()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return te(Ut),null;case 4:return at(),null;case 10:return Rs(r.type),null;case 22:case 23:return Jn(r),Ah(),s!==null&&te(Ao),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Rs(Ht),null;case 25:return null;default:return null}}function tv(s,r){switch(lh(r),r.tag){case 3:Rs(Ht),at();break;case 26:case 27:case 5:Ws(r);break;case 4:at();break;case 31:r.memoizedState!==null&&Jn(r);break;case 13:Jn(r);break;case 19:te(Ut);break;case 10:Rs(r.type);break;case 22:case 23:Jn(r),Ah(),s!==null&&te(Ao);break;case 24:Rs(Ht)}}function tu(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(C){ct(r,r.return,C)}}function _r(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,y=r;var V=l,K=C;try{K()}catch(X){ct(y,V,X)}}}c=c.next}while(c!==_)}}catch(X){ct(r,r.return,X)}}function nv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Yy(r,l)}catch(c){ct(s,s.return,c)}}}function iv(s,r,l){l.props=bo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){ct(s,r,c)}}function nu(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){ct(s,r,y)}}function ss(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){ct(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ct(s,r,y)}else l.current=null}function sv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){ct(s,s.return,y)}}function tp(s,r,l){try{var c=s.stateNode;XR(c,s.type,l,r),c[Mt]=r}catch(y){ct(s,s.return,y)}}function rv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cr(s.type)||s.tag===4}function np(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ip(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ci));else if(c!==4&&(c===27&&Cr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(ip(s,r,l),s=s.sibling;s!==null;)ip(s,r,l),s=s.sibling}function Jc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Cr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Jc(s,r,l),s=s.sibling;s!==null;)Jc(s,r,l),s=s.sibling}function ov(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);fn(r,c,l),r[ft]=s,r[Mt]=l}catch(_){ct(s,s.return,_)}}var Ds=!1,zt=!1,sp=!1,av=typeof WeakSet=="function"?WeakSet:Set,nn=null;function xR(s,r){if(s=s.containerInfo,Cp=mf,s=vy(s),Xd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,C=-1,V=-1,K=0,X=0,ne=s,Y=null;t:for(;;){for(var Q;ne!==l||y!==0&&ne.nodeType!==3||(C=A+y),ne!==_||c!==0&&ne.nodeType!==3||(V=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)Y=ne,ne=Q;for(;;){if(ne===s)break t;if(Y===l&&++K===y&&(C=A),Y===_&&++X===c&&(V=A),(Q=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=Q}l=C===-1||V===-1?null:{start:C,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(wp={focusedElem:s,selectionRange:l},mf=!1,nn=r;nn!==null;)if(r=nn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,nn=s;else for(;nn!==null;){switch(r=nn,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ve=bo(l.type,y);s=c.getSnapshotBeforeUpdate(ve,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ce){ct(l,l.return,Ce)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Np(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Np(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,nn=s;break}nn=r.return}}function lv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Vs(s,l),c&4&&tu(5,l);break;case 1:if(Vs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){ct(l,l.return,A)}else{var y=bo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){ct(l,l.return,A)}}c&64&&nv(l),c&512&&nu(l,l.return);break;case 3:if(Vs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Yy(s,r)}catch(A){ct(l,l.return,A)}}break;case 27:r===null&&c&4&&ov(l);case 26:case 5:Vs(s,l),r===null&&c&4&&sv(l),c&512&&nu(l,l.return);break;case 12:Vs(s,l);break;case 31:Vs(s,l),c&4&&fv(s,l);break;case 13:Vs(s,l),c&4&&dv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=FR.bind(null,l),rb(s,l))));break;case 22:if(c=l.memoizedState!==null||Ds,!c){r=r!==null&&r.memoizedState!==null||zt,y=Ds;var _=zt;Ds=c,(zt=r)&&!_?ks(s,l,(l.subtreeFlags&8772)!==0):Vs(s,l),Ds=y,zt=_}break;case 30:break;default:Vs(s,l)}}function uv(s){var r=s.alternate;r!==null&&(s.alternate=null,uv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&si(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ct=null,Pn=!1;function Ps(s,r,l){for(l=l.child;l!==null;)cv(s,r,l),l=l.sibling}function cv(s,r,l){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Hn,l)}catch{}switch(l.tag){case 26:zt||ss(l,r),Ps(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||ss(l,r);var c=Ct,y=Pn;Cr(l.type)&&(Ct=l.stateNode,Pn=!1),Ps(s,r,l),fu(l.stateNode),Ct=c,Pn=y;break;case 5:zt||ss(l,r);case 6:if(c=Ct,y=Pn,Ct=null,Ps(s,r,l),Ct=c,Pn=y,Ct!==null)if(Pn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(l.stateNode)}catch(_){ct(l,r,_)}else try{Ct.removeChild(l.stateNode)}catch(_){ct(l,r,_)}break;case 18:Ct!==null&&(Pn?(s=Ct,n0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Ga(s)):n0(Ct,l.stateNode));break;case 4:c=Ct,y=Pn,Ct=l.stateNode.containerInfo,Pn=!0,Ps(s,r,l),Ct=c,Pn=y;break;case 0:case 11:case 14:case 15:_r(2,l,r),zt||_r(4,l,r),Ps(s,r,l);break;case 1:zt||(ss(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&iv(l,r,c)),Ps(s,r,l);break;case 21:Ps(s,r,l);break;case 22:zt=(c=zt)||l.memoizedState!==null,Ps(s,r,l),zt=c;break;default:Ps(s,r,l)}}function fv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Ga(s)}catch(l){ct(r,r.return,l)}}}function dv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ga(s)}catch(l){ct(r,r.return,l)}}function MR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new av),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new av),r;default:throw Error(i(435,s.tag))}}function $c(s,r){var l=MR(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=qR.bind(null,s,c);c.then(y,y)}})}function Vn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(Cr(C.type)){Ct=C.stateNode,Pn=!1;break e}break;case 5:Ct=C.stateNode,Pn=!1;break e;case 3:case 4:Ct=C.stateNode.containerInfo,Pn=!0;break e}C=C.return}if(Ct===null)throw Error(i(160));cv(_,A,y),Ct=null,Pn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)hv(r,s),r=r.sibling}var Mi=null;function hv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vn(r,s),kn(s),c&4&&(_r(3,s,s.return),tu(3,s),_r(5,s,s.return));break;case 1:Vn(r,s),kn(s),c&512&&(zt||l===null||ss(l,l.return)),c&64&&Ds&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Mi;if(Vn(r,s),kn(s),c&512&&(zt||l===null||ss(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[ii]||_[ft]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),fn(_,c,l),_[ft]=s,Pt(_),c=_;break e;case"link":var A=h0("link","href",y).get(c+(l.href||""));if(A){for(var C=0;C<A.length;C++)if(_=A[C],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(C,1);break t}}_=y.createElement(c),fn(_,c,l),y.head.appendChild(_);break;case"meta":if(A=h0("meta","content",y).get(c+(l.content||""))){for(C=0;C<A.length;C++)if(_=A[C],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(C,1);break t}}_=y.createElement(c),fn(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[ft]=s,Pt(_),c=_}s.stateNode=c}else p0(y,s.type,s.stateNode);else s.stateNode=d0(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?p0(y,s.type,s.stateNode):d0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&tp(s,s.memoizedProps,l.memoizedProps)}break;case 27:Vn(r,s),kn(s),c&512&&(zt||l===null||ss(l,l.return)),l!==null&&c&4&&tp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Vn(r,s),kn(s),c&512&&(zt||l===null||ss(l,l.return)),s.flags&32){y=s.stateNode;try{Dn(y,"")}catch(ve){ct(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,tp(s,y,l!==null?l.memoizedProps:y)),c&1024&&(sp=!0);break;case 6:if(Vn(r,s),kn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){ct(s,s.return,ve)}}break;case 3:if(ff=null,y=Mi,Mi=uf(r.containerInfo),Vn(r,s),Mi=y,kn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ga(r.containerInfo)}catch(ve){ct(s,s.return,ve)}sp&&(sp=!1,pv(s));break;case 4:c=Mi,Mi=uf(s.stateNode.containerInfo),Vn(r,s),kn(s),Mi=c;break;case 12:Vn(r,s),kn(s);break;case 31:Vn(r,s),kn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,$c(s,c)));break;case 13:Vn(r,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wc=se()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,$c(s,c)));break;case 22:y=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,K=Ds,X=zt;if(Ds=K||y,zt=X||V,Vn(r,s),zt=X,Ds=K,kn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||V||Ds||zt||No(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){V=l=r;try{if(_=V.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=V.stateNode;var ne=V.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ve){ct(V,V.return,ve)}}}else if(r.tag===6){if(l===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ve){ct(V,V.return,ve)}}}else if(r.tag===18){if(l===null){V=r;try{var Q=V.stateNode;y?i0(Q,!0):i0(V.stateNode,!1)}catch(ve){ct(V,V.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,$c(s,l))));break;case 19:Vn(r,s),kn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,$c(s,c)));break;case 30:break;case 21:break;default:Vn(r,s),kn(s)}}function kn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(rv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=np(s);Jc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(Dn(A,""),l.flags&=-33);var C=np(s);Jc(s,C,A);break;case 3:case 4:var V=l.stateNode.containerInfo,K=np(s);ip(s,K,V);break;default:throw Error(i(161))}}catch(X){ct(s,s.return,X)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function pv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;pv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Vs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)lv(s,r.alternate,r),r=r.sibling}function No(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:_r(4,r,r.return),No(r);break;case 1:ss(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&iv(r,r.return,l),No(r);break;case 27:fu(r.stateNode);case 26:case 5:ss(r,r.return),No(r);break;case 22:r.memoizedState===null&&No(r);break;case 30:No(r);break;default:No(r)}s=s.sibling}}function ks(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:ks(y,_,l),tu(4,_);break;case 1:if(ks(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){ct(c,c.return,K)}if(c=_,y=c.updateQueue,y!==null){var C=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Ky(V[y],C)}catch(K){ct(c,c.return,K)}}l&&A&64&&nv(_),nu(_,_.return);break;case 27:ov(_);case 26:case 5:ks(y,_,l),l&&c===null&&A&4&&sv(_),nu(_,_.return);break;case 12:ks(y,_,l);break;case 31:ks(y,_,l),l&&A&4&&fv(y,_);break;case 13:ks(y,_,l),l&&A&4&&dv(y,_);break;case 22:_.memoizedState===null&&ks(y,_,l),nu(_,_.return);break;case 30:break;default:ks(y,_,l)}r=r.sibling}}function rp(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Gl(l))}function op(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Gl(s))}function Di(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mv(s,r,l,c),r=r.sibling}function mv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Di(s,r,l,c),y&2048&&tu(9,r);break;case 1:Di(s,r,l,c);break;case 3:Di(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Gl(s)));break;case 12:if(y&2048){Di(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,C=_.onPostCommit;typeof C=="function"&&C(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ct(r,r.return,V)}}else Di(s,r,l,c);break;case 31:Di(s,r,l,c);break;case 13:Di(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?Di(s,r,l,c):iu(s,r):_._visibility&2?Di(s,r,l,c):(_._visibility|=2,Ma(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&rp(A,r);break;case 24:Di(s,r,l,c),y&2048&&op(r.alternate,r);break;default:Di(s,r,l,c)}}function Ma(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,C=l,V=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:Ma(_,A,C,V,y),tu(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Ma(_,A,C,V,y):iu(_,A):(X._visibility|=2,Ma(_,A,C,V,y)),y&&K&2048&&rp(A.alternate,A);break;case 24:Ma(_,A,C,V,y),y&&K&2048&&op(A.alternate,A);break;default:Ma(_,A,C,V,y)}r=r.sibling}}function iu(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:iu(l,c),y&2048&&rp(c.alternate,c);break;case 24:iu(l,c),y&2048&&op(c.alternate,c);break;default:iu(l,c)}r=r.sibling}}var su=8192;function Da(s,r,l){if(s.subtreeFlags&su)for(s=s.child;s!==null;)gv(s,r,l),s=s.sibling}function gv(s,r,l){switch(s.tag){case 26:Da(s,r,l),s.flags&su&&s.memoizedState!==null&&yb(l,Mi,s.memoizedState,s.memoizedProps);break;case 5:Da(s,r,l);break;case 3:case 4:var c=Mi;Mi=uf(s.stateNode.containerInfo),Da(s,r,l),Mi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=su,su=16777216,Da(s,r,l),su=c):Da(s,r,l));break;default:Da(s,r,l)}}function yv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function ru(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];nn=c,vv(c,s)}yv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_v(s),s=s.sibling}function _v(s){switch(s.tag){case 0:case 11:case 15:ru(s),s.flags&2048&&_r(9,s,s.return);break;case 3:ru(s);break;case 12:ru(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Qc(s)):ru(s);break;default:ru(s)}}function Qc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];nn=c,vv(c,s)}yv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:_r(8,r,r.return),Qc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Qc(r));break;default:Qc(r)}s=s.sibling}}function vv(s,r){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:_r(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Gl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,nn=c;else e:for(l=s;nn!==null;){c=nn;var y=c.sibling,_=c.return;if(uv(c),c===l){nn=null;break e}if(y!==null){y.return=_,nn=y;break e}nn=_}}}var DR={getCacheForType:function(s){var r=un(Ht),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return un(Ht).controller.signal}},PR=typeof WeakMap=="function"?WeakMap:Map,st=0,_t=null,Ge=null,Ye=0,ut=0,$n=null,vr=!1,Pa=!1,ap=!1,Ls=0,kt=0,Tr=0,xo=0,lp=0,Qn=0,Va=0,ou=null,Ln=null,up=!1,Wc=0,Tv=0,Xc=1/0,Zc=null,Er=null,Xt=0,Sr=null,ka=null,Us=0,cp=0,fp=null,Ev=null,au=0,dp=null;function Wn(){return(st&2)!==0&&Ye!==0?Ye&-Ye:J.T!==null?_p():Le()}function Sv(){if(Qn===0)if((Ye&536870912)===0||Xe){var s=Yi;Yi<<=1,(Yi&3932160)===0&&(Yi=262144),Qn=s}else Qn=536870912;return s=Yn.current,s!==null&&(s.flags|=32),Qn}function Un(s,r,l){(s===_t&&(ut===2||ut===9)||s.cancelPendingCommit!==null)&&(La(s,0),Ar(s,Ye,Qn,!1)),ys(s,l),((st&2)===0||s!==_t)&&(s===_t&&((st&2)===0&&(xo|=l),kt===4&&Ar(s,Ye,Qn,!1)),rs(s))}function Av(s,r,l){if((st&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Gn(s,r),y=c?LR(s,r):pp(s,r,!0),_=c;do{if(y===0){Pa&&!c&&Ar(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!VR(l)){y=pp(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var C=s;y=ou;var V=C.current.memoizedState.isDehydrated;if(V&&(La(C,A).flags|=256),A=pp(C,A,!1),A!==2){if(ap&&!V){C.errorRecoveryDisabledLanes|=_,xo|=_,y=4;break e}_=Ln,Ln=y,_!==null&&(Ln===null?Ln=_:Ln.push.apply(Ln,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){La(s,0),Ar(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ar(c,r,Qn,!vr);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Wc+300-se(),10<y)){if(Ar(c,r,Qn,!vr),ti(c,0,!0)!==0)break e;Us=r,c.timeoutHandle=e0(Iv.bind(null,c,l,Ln,Zc,up,r,Qn,xo,Va,vr,_,"Throttled",-0,0),y);break e}Iv(c,l,Ln,Zc,up,r,Qn,xo,Va,vr,_,null,-0,0)}}break}while(!0);rs(s)}function Iv(s,r,l,c,y,_,A,C,V,K,X,ne,Y,Q){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ci},gv(r,_,ne);var ve=(_&62914560)===_?Wc-se():(_&4194048)===_?Tv-se():0;if(ve=_b(ne,ve),ve!==null){Us=_,s.cancelPendingCommit=ve(Dv.bind(null,s,r,_,l,c,y,A,C,V,X,ne,null,Y,Q)),Ar(s,_,A,!K);return}}Dv(s,r,_,l,c,y,A,C,V)}function VR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!zn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ar(s,r,l,c){r&=~lp,r&=~xo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-yt(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&_s(s,l,r)}function jc(){return(st&6)===0?(lu(0),!1):!0}function hp(){if(Ge!==null){if(ut===0)var s=Ge.return;else s=Ge,ws=Eo=null,Nh(s),wa=null,zl=0,s=Ge;for(;s!==null;)tv(s.alternate,s),s=s.return;Ge=null}}function La(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,eb(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Us=0,hp(),_t=s,Ge=l=Is(s.current,null),Ye=r,ut=0,$n=null,vr=!1,Pa=Gn(s,r),ap=!1,Va=Qn=lp=xo=Tr=kt=0,Ln=ou=null,up=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-yt(c),_=1<<y;r|=s[y],c&=~_}return Ls=r,Tc(),l}function Cv(s,r){Oe=null,J.H=Zl,r===Ca||r===bc?(r=Hy(),ut=3):r===yh?(r=Hy(),ut=4):ut=r===Kh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,$n=r,Ge===null&&(kt=1,Gc(s,fi(r,s.current)))}function wv(){var s=Yn.current;return s===null?!0:(Ye&4194048)===Ye?mi===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===mi:!1}function Rv(){var s=J.H;return J.H=Zl,s===null?Zl:s}function bv(){var s=J.A;return J.A=DR,s}function ef(){kt=4,vr||(Ye&4194048)!==Ye&&Yn.current!==null||(Pa=!0),(Tr&134217727)===0&&(xo&134217727)===0||_t===null||Ar(_t,Ye,Qn,!1)}function pp(s,r,l){var c=st;st|=2;var y=Rv(),_=bv();(_t!==s||Ye!==r)&&(Zc=null,La(s,r)),r=!1;var A=kt;e:do try{if(ut!==0&&Ge!==null){var C=Ge,V=$n;switch(ut){case 8:hp(),A=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(r=!0);var K=ut;if(ut=0,$n=null,Ua(s,C,V,K),l&&Pa){A=0;break e}break;default:K=ut,ut=0,$n=null,Ua(s,C,V,K)}}kR(),A=kt;break}catch(X){Cv(s,X)}while(!0);return r&&s.shellSuspendCounter++,ws=Eo=null,st=c,J.H=y,J.A=_,Ge===null&&(_t=null,Ye=0,Tc()),A}function kR(){for(;Ge!==null;)Nv(Ge)}function LR(s,r){var l=st;st|=2;var c=Rv(),y=bv();_t!==s||Ye!==r?(Zc=null,Xc=se()+500,La(s,r)):Pa=Gn(s,r);e:do try{if(ut!==0&&Ge!==null){r=Ge;var _=$n;t:switch(ut){case 1:ut=0,$n=null,Ua(s,r,_,1);break;case 2:case 9:if(Fy(_)){ut=0,$n=null,xv(r);break}r=function(){ut!==2&&ut!==9||_t!==s||(ut=7),rs(s)},_.then(r,r);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Fy(_)?(ut=0,$n=null,xv(r)):(ut=0,$n=null,Ua(s,r,_,7));break;case 5:var A=null;switch(Ge.tag){case 26:A=Ge.memoizedState;case 5:case 27:var C=Ge;if(A?m0(A):C.stateNode.complete){ut=0,$n=null;var V=C.sibling;if(V!==null)Ge=V;else{var K=C.return;K!==null?(Ge=K,tf(K)):Ge=null}break t}}ut=0,$n=null,Ua(s,r,_,5);break;case 6:ut=0,$n=null,Ua(s,r,_,6);break;case 8:hp(),kt=6;break e;default:throw Error(i(462))}}UR();break}catch(X){Cv(s,X)}while(!0);return ws=Eo=null,J.H=c,J.A=y,st=l,Ge!==null?0:(_t=null,Ye=0,Tc(),kt)}function UR(){for(;Ge!==null&&!no();)Nv(Ge)}function Nv(s){var r=j_(s.alternate,s,Ls);s.memoizedProps=s.pendingProps,r===null?tf(s):Ge=r}function xv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=J_(l,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=J_(l,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:Nh(r);default:tv(l,r),r=Ge=by(r,Ls),r=j_(l,r,Ls)}s.memoizedProps=s.pendingProps,r===null?tf(s):Ge=r}function Ua(s,r,l,c){ws=Eo=null,Nh(r),wa=null,zl=0;var y=r.return;try{if(CR(s,y,r,l,Ye)){kt=1,Gc(s,fi(l,s.current)),Ge=null;return}}catch(_){if(y!==null)throw Ge=y,_;kt=1,Gc(s,fi(l,s.current)),Ge=null;return}r.flags&32768?(Xe||c===1?s=!0:Pa||(Ye&536870912)!==0?s=!1:(vr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Mv(r,s)):tf(r)}function tf(s){var r=s;do{if((r.flags&32768)!==0){Mv(r,vr);return}s=r.return;var l=bR(r.alternate,r,Ls);if(l!==null){Ge=l;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=s}while(r!==null);kt===0&&(kt=5)}function Mv(s,r){do{var l=NR(s.alternate,s);if(l!==null){l.flags&=32767,Ge=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ge=s;return}Ge=s=l}while(s!==null);kt=6,Ge=null}function Dv(s,r,l,c,y,_,A,C,V){s.cancelPendingCommit=null;do nf();while(Xt!==0);if((st&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=nh,ia(s,l,_,A,C,V),s===_t&&(Ge=_t=null,Ye=0),ka=r,Sr=s,Us=l,cp=_,fp=y,Ev=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,HR(Ki,function(){return Uv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,y=ue.p,ue.p=2,A=st,st|=4;try{xR(s,r,l)}finally{st=A,ue.p=y,J.T=c}}Xt=1,Pv(),Vv(),kv()}}function Pv(){if(Xt===1){Xt=0;var s=Sr,r=ka,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=ue.p;ue.p=2;var y=st;st|=4;try{hv(r,s);var _=wp,A=vy(s.containerInfo),C=_.focusedElem,V=_.selectionRange;if(A!==C&&C&&C.ownerDocument&&_y(C.ownerDocument.documentElement,C)){if(V!==null&&Xd(C)){var K=V.start,X=V.end;if(X===void 0&&(X=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(X,C.value.length);else{var ne=C.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),ve=C.textContent.length,Ce=Math.min(V.start,ve),mt=V.end===void 0?Ce:Math.min(V.end,ve);!Q.extend&&Ce>mt&&(A=mt,mt=Ce,Ce=A);var G=yy(C,Ce),F=yy(C,mt);if(G&&F&&(Q.rangeCount!==1||Q.anchorNode!==G.node||Q.anchorOffset!==G.offset||Q.focusNode!==F.node||Q.focusOffset!==F.offset)){var z=ne.createRange();z.setStart(G.node,G.offset),Q.removeAllRanges(),Ce>mt?(Q.addRange(z),Q.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),Q.addRange(z))}}}}for(ne=[],Q=C;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ne.length;C++){var j=ne[C];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}mf=!!Cp,wp=Cp=null}finally{st=y,ue.p=c,J.T=l}}s.current=r,Xt=2}}function Vv(){if(Xt===2){Xt=0;var s=Sr,r=ka,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=ue.p;ue.p=2;var y=st;st|=4;try{lv(s,r.alternate,r)}finally{st=y,ue.p=c,J.T=l}}Xt=3}}function kv(){if(Xt===4||Xt===3){Xt=0,Bi();var s=Sr,r=ka,l=Us,c=Ev;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,ka=Sr=null,Lv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Er=null),Ie(l),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Hn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=J.T,y=ue.p,ue.p=2,J.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var C=c[A];_(C.value,{componentStack:C.stack})}}finally{J.T=r,ue.p=y}}(Us&3)!==0&&nf(),rs(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===dp?au++:(au=0,dp=s):au=0,lu(0)}}function Lv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Gl(r)))}function nf(){return Pv(),Vv(),kv(),Uv()}function Uv(){if(Xt!==5)return!1;var s=Sr,r=cp;cp=0;var l=Ie(Us),c=J.T,y=ue.p;try{ue.p=32>l?32:l,J.T=null,l=fp,fp=null;var _=Sr,A=Us;if(Xt=0,ka=Sr=null,Us=0,(st&6)!==0)throw Error(i(331));var C=st;if(st|=4,_v(_.current),mv(_,_.current,A,l),st=C,lu(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Hn,_)}catch{}return!0}finally{ue.p=y,J.T=c,Lv(s,r)}}function Ov(s,r,l){r=fi(l,r),r=zh(s.stateNode,r,2),s=mr(s,r,2),s!==null&&(ys(s,2),rs(s))}function ct(s,r,l){if(s.tag===3)Ov(s,s,l);else for(;r!==null;){if(r.tag===3){Ov(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Er===null||!Er.has(c))){s=fi(l,s),l=F_(2),c=mr(r,l,2),c!==null&&(q_(l,c,r,s),ys(c,2),rs(c));break}}r=r.return}}function mp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new PR;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(ap=!0,y.add(l),s=OR.bind(null,s,r,l),r.then(s,s))}function OR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,_t===s&&(Ye&l)===l&&(kt===4||kt===3&&(Ye&62914560)===Ye&&300>se()-Wc?(st&2)===0&&La(s,0):lp|=l,Va===Ye&&(Va=0)),rs(s)}function Fv(s,r){r===0&&(r=na()),s=_o(s,r),s!==null&&(ys(s,r),rs(s))}function FR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Fv(s,l)}function qR(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Fv(s,l)}function HR(s,r){return At(s,r)}var sf=null,Oa=null,gp=!1,rf=!1,yp=!1,Ir=0;function rs(s){s!==Oa&&s.next===null&&(Oa===null?sf=Oa=s:Oa=Oa.next=s),rf=!0,gp||(gp=!0,BR())}function lu(s,r){if(!yp&&rf){yp=!0;do for(var l=!1,c=sf;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,C=c.pingedLanes;_=(1<<31-yt(42|s)+1)-1,_&=y&~(A&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Bv(c,_))}else _=Ye,_=ti(c,c===_t?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Gn(c,_)||(l=!0,Bv(c,_));c=c.next}while(l);yp=!1}}function GR(){qv()}function qv(){rf=gp=!1;var s=0;Ir!==0&&jR()&&(s=Ir);for(var r=se(),l=null,c=sf;c!==null;){var y=c.next,_=Hv(c,r);_===0?(c.next=null,l===null?sf=y:l.next=y,y===null&&(Oa=l)):(l=c,(s!==0||(_&3)!==0)&&(rf=!0)),c=y}Xt!==0&&Xt!==5||lu(s),Ir!==0&&(Ir=0)}function Hv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-yt(_),C=1<<A,V=y[A];V===-1?((C&l)===0||(C&c)!==0)&&(y[A]=ta(C,r)):V<=r&&(s.expiredLanes|=C),_&=~C}if(r=_t,l=Ye,l=ti(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(ut===2||ut===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ii(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Gn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Ii(c),Ie(l)){case 2:case 8:l=io;break;case 32:l=Ki;break;case 268435456:l=Zo;break;default:l=Ki}return c=Gv.bind(null,s),l=At(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Ii(c),s.callbackPriority=2,s.callbackNode=null,2}function Gv(s,r){if(Xt!==0&&Xt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(nf()&&s.callbackNode!==l)return null;var c=Ye;return c=ti(s,s===_t?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Av(s,c,r),Hv(s,se()),s.callbackNode!=null&&s.callbackNode===l?Gv.bind(null,s):null)}function Bv(s,r){if(nf())return null;Av(s,r,!0)}function BR(){tb(function(){(st&6)!==0?At(Zs,GR):qv()})}function _p(){if(Ir===0){var s=Aa;s===0&&(s=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ir=s}return Ir}function zv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:la(""+s)}function Kv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function zR(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=zv((y[Mt]||null).action),A=c.submitter;A&&(r=(r=A[Mt]||null)?zv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var C=new Zi("action","action",null,c,y);s.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ir!==0){var V=A?Kv(y,A):new FormData(y);Oh(l,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(C.preventDefault(),V=A?Kv(y,A):new FormData(y),Oh(l,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var vp=0;vp<th.length;vp++){var Tp=th[vp],KR=Tp.toLowerCase(),YR=Tp[0].toUpperCase()+Tp.slice(1);xi(KR,"on"+YR)}xi(Sy,"onAnimationEnd"),xi(Ay,"onAnimationIteration"),xi(Iy,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(lR,"onTransitionRun"),xi(uR,"onTransitionStart"),xi(cR,"onTransitionCancel"),xi(Cy,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function Yv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var C=c[A],V=C.instance,K=C.currentTarget;if(C=C.listener,V!==_&&y.isPropagationStopped())break e;_=C,y.currentTarget=K;try{_(y)}catch(X){vc(X)}y.currentTarget=null,_=V}else for(A=0;A<c.length;A++){if(C=c[A],V=C.instance,K=C.currentTarget,C=C.listener,V!==_&&y.isPropagationStopped())break e;_=C,y.currentTarget=K;try{_(y)}catch(X){vc(X)}y.currentTarget=null,_=V}}}}function Be(s,r){var l=r[vs];l===void 0&&(l=r[vs]=new Set);var c=s+"__bubble";l.has(c)||(Jv(r,s,2,!1),l.add(c))}function Ep(s,r,l){var c=0;r&&(c|=4),Jv(l,s,c,r)}var of="_reactListening"+Math.random().toString(36).slice(2);function Sp(s){if(!s[of]){s[of]=!0,ro.forEach(function(l){l!=="selectionchange"&&(JR.has(l)||Ep(l,!1,s),Ep(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[of]||(r[of]=!0,Ep("selectionchange",!1,r))}}function Jv(s,r,l,c){switch(S0(r)){case 2:var y=Eb;break;case 8:y=Sb;break;default:y=Up}l=y.bind(null,r,l,s),y=void 0,!uo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Ap(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var C=c.stateNode.containerInfo;if(C===y)break;if(A===4)for(A=c.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;C!==null;){if(A=ri(C),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){c=_=A;continue e}C=C.parentNode}}c=c.return}rr(function(){var K=_,X=ai(l),ne=[];e:{var Y=wy.get(s);if(Y!==void 0){var Q=Zi,ve=s;switch(s){case"keypress":if(fo(l)===0)break e;case"keydown":case"keyup":Q=gc;break;case"focusin":ve="focus",Q=po;break;case"focusout":ve="blur",Q=po;break;case"beforeblur":case"afterblur":Q=po;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=E;break;case Sy:case Ay:case Iy:Q=uc;break;case Cy:Q=b;break;case"scroll":case"scrollend":Q=Pl;break;case"wheel":Q=$;break;case"copy":case"cut":case"paste":Q=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=As;break;case"toggle":case"beforetoggle":Q=Ue}var Ce=(r&4)!==0,mt=!Ce&&(s==="scroll"||s==="scrollend"),G=Ce?Y!==null?Y+"Capture":null:Y;Ce=[];for(var F=K,z;F!==null;){var j=F;if(z=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||z===null||G===null||(j=wi(F,G),j!=null&&Ce.push(cu(F,j,z))),mt)break;F=F.return}0<Ce.length&&(Y=new Q(Y,ve,null,l,X),ne.push({event:Y,listeners:Ce}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Y&&l!==xl&&(ve=l.relatedTarget||l.fromElement)&&(ri(ve)||ve[En]))break e;if((Q||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(ve=l.relatedTarget||l.toElement,Q=K,ve=ve?ri(ve):null,ve!==null&&(mt=a(ve),Ce=ve.tag,ve!==mt||Ce!==5&&Ce!==27&&Ce!==6)&&(ve=null)):(Q=null,ve=K),Q!==ve)){if(Ce=Vl,j="onMouseLeave",G="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=As,j="onPointerLeave",G="onPointerEnter",F="pointer"),mt=Q==null?Y:An(Q),z=ve==null?Y:An(ve),Y=new Ce(j,F+"leave",Q,l,X),Y.target=mt,Y.relatedTarget=z,j=null,ri(X)===K&&(Ce=new Ce(G,F+"enter",ve,l,X),Ce.target=z,Ce.relatedTarget=mt,j=Ce),mt=j,Q&&ve)t:{for(Ce=$R,G=Q,F=ve,z=0,j=G;j;j=Ce(j))z++;j=0;for(var Se=F;Se;Se=Ce(Se))j++;for(;0<z-j;)G=Ce(G),z--;for(;0<j-z;)F=Ce(F),j--;for(;z--;){if(G===F||F!==null&&G===F.alternate){Ce=G;break t}G=Ce(G),F=Ce(F)}Ce=null}else Ce=null;Q!==null&&$v(ne,Y,Q,Ce,!1),ve!==null&&mt!==null&&$v(ne,mt,ve,Ce,!0)}}e:{if(Y=K?An(K):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var et=fy;else if(uy(Y))if(dy)et=rR;else{et=iR;var Te=nR}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&aa(K.elementType)&&(et=fy):et=sR;if(et&&(et=et(s,K))){cy(ne,et,l,X);break e}Te&&Te(s,Y,K),s==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&Rl(Y,"number",Y.value)}switch(Te=K?An(K):window,s){case"focusin":(uy(Te)||Te.contentEditable==="true")&&(ma=Te,Zd=K,Fl=null);break;case"focusout":Fl=Zd=ma=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,Ty(ne,l,X);break;case"selectionchange":if(aR)break;case"keydown":case"keyup":Ty(ne,l,X)}var Fe;if(it)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else pa?mo(s,l)&&(Je="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Je="onCompositionStart");Je&&(ts&&l.locale!=="ko"&&(pa||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&pa&&(Fe=Dl()):(Xi=X,Ml="value"in Xi?Xi.value:Xi.textContent,pa=!0)),Te=af(K,Je),0<Te.length&&(Je=new es(Je,s,null,l,X),ne.push({event:Je,listeners:Te}),Fe?Je.data=Fe:(Fe=ha(l),Fe!==null&&(Je.data=Fe)))),(Fe=ui?Zw(s,l):jw(s,l))&&(Je=af(K,"onBeforeInput"),0<Je.length&&(Te=new es("onBeforeInput","beforeinput",null,l,X),ne.push({event:Te,listeners:Je}),Te.data=Fe)),zR(ne,s,K,l,X)}Yv(ne,r)})}function cu(s,r,l){return{instance:s,listener:r,currentTarget:l}}function af(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=wi(s,l),y!=null&&c.unshift(cu(s,y,_)),y=wi(s,r),y!=null&&c.push(cu(s,y,_))),s.tag===3)return c;s=s.return}return[]}function $R(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function $v(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var C=l,V=C.alternate,K=C.stateNode;if(C=C.tag,V!==null&&V===c)break;C!==5&&C!==26&&C!==27||K===null||(V=K,y?(K=wi(l,_),K!=null&&A.unshift(cu(l,K,V))):y||(K=wi(l,_),K!=null&&A.push(cu(l,K,V)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var QR=/\r\n?/g,WR=/\u0000|\uFFFD/g;function Qv(s){return(typeof s=="string"?s:""+s).replace(QR,`
`).replace(WR,"")}function Wv(s,r){return r=Qv(r),Qv(s)===r}function pt(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Dn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Dn(s,""+c);break;case"className":Bn(s,"class",c);break;case"tabIndex":Bn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(s,l,c);break;case"style":Nl(s,c,_);break;case"data":if(r!=="object"){Bn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=la(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&pt(s,r,"name",y.name,y,null),pt(s,r,"formEncType",y.formEncType,y,null),pt(s,r,"formMethod",y.formMethod,y,null),pt(s,r,"formTarget",y.formTarget,y,null)):(pt(s,r,"encType",y.encType,y,null),pt(s,r,"method",y.method,y,null),pt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=la(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ci);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=la(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),ra(s,"popover",c);break;case"xlinkActuate":qt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ra(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=oc.get(l)||l,ra(s,l,c))}}function Ip(s,r,l,c,y,_){switch(l){case"style":Nl(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Dn(s,c):(typeof c=="number"||typeof c=="bigint")&&Dn(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ts.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Mt]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):ra(s,l,c)}}}function fn(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:pt(s,r,_,A,l,null)}}y&&pt(s,r,"srcSet",l.srcSet,l,null),c&&pt(s,r,"src",l.src,l,null);return;case"input":Be("invalid",s);var C=_=A=y=null,V=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var X=l[c];if(X!=null)switch(c){case"name":y=X;break;case"type":A=X;break;case"checked":V=X;break;case"defaultChecked":K=X;break;case"value":_=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:pt(s,r,c,X,l,null)}}ic(s,_,C,V,K,A,y,!1);return;case"select":Be("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(C=l[y],C!=null))switch(y){case"value":_=C;break;case"defaultValue":A=C;break;case"multiple":c=C;default:pt(s,r,y,C,l,null)}r=_,l=A,s.multiple=!!c,r!=null?tr(s,!!c,r,!1):l!=null&&tr(s,!!c,l,!0);return;case"textarea":Be("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(C=l[A],C!=null))switch(A){case"value":c=C;break;case"defaultValue":y=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:pt(s,r,A,C,l,null)}nr(s,c,y,_);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:pt(s,r,V,c,l,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<uu.length;c++)Be(uu[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:pt(s,r,K,c,l,null)}return;default:if(aa(r)){for(X in l)l.hasOwnProperty(X)&&(c=l[X],c!==void 0&&Ip(s,r,X,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&pt(s,r,C,c,l,null))}function XR(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,C=null,V=null,K=null,X=null;for(Q in l){var ne=l[Q];if(l.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=ne;default:c.hasOwnProperty(Q)||pt(s,r,Q,null,c,ne)}}for(var Y in c){var Q=c[Y];if(ne=l[Y],c.hasOwnProperty(Y)&&(Q!=null||ne!=null))switch(Y){case"type":_=Q;break;case"name":y=Q;break;case"checked":K=Q;break;case"defaultChecked":X=Q;break;case"value":A=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ne&&pt(s,r,Y,Q,c,ne)}}oa(s,A,C,V,K,X,_,y);return;case"select":Q=A=C=Y=null;for(_ in l)if(V=l[_],l.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":Q=V;default:c.hasOwnProperty(_)||pt(s,r,_,null,c,V)}for(y in c)if(_=c[y],V=l[y],c.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":Y=_;break;case"defaultValue":C=_;break;case"multiple":A=_;default:_!==V&&pt(s,r,y,_,c,V)}r=C,l=A,c=Q,Y!=null?tr(s,!!l,Y,!1):!!c!=!!l&&(r!=null?tr(s,!!l,r,!0):tr(s,!!l,l?[]:"",!1));return;case"textarea":Q=Y=null;for(C in l)if(y=l[C],l.hasOwnProperty(C)&&y!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:pt(s,r,C,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":Y=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&pt(s,r,A,y,c,_)}sc(s,Y,Q);return;case"option":for(var ve in l)if(Y=l[ve],l.hasOwnProperty(ve)&&Y!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:pt(s,r,ve,null,c,Y)}for(V in c)if(Y=c[V],Q=l[V],c.hasOwnProperty(V)&&Y!==Q&&(Y!=null||Q!=null))switch(V){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:pt(s,r,V,Y,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)Y=l[Ce],l.hasOwnProperty(Ce)&&Y!=null&&!c.hasOwnProperty(Ce)&&pt(s,r,Ce,null,c,Y);for(K in c)if(Y=c[K],Q=l[K],c.hasOwnProperty(K)&&Y!==Q&&(Y!=null||Q!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:pt(s,r,K,Y,c,Q)}return;default:if(aa(r)){for(var mt in l)Y=l[mt],l.hasOwnProperty(mt)&&Y!==void 0&&!c.hasOwnProperty(mt)&&Ip(s,r,mt,void 0,c,Y);for(X in c)Y=c[X],Q=l[X],!c.hasOwnProperty(X)||Y===Q||Y===void 0&&Q===void 0||Ip(s,r,X,Y,c,Q);return}}for(var G in l)Y=l[G],l.hasOwnProperty(G)&&Y!=null&&!c.hasOwnProperty(G)&&pt(s,r,G,null,c,Y);for(ne in c)Y=c[ne],Q=l[ne],!c.hasOwnProperty(ne)||Y===Q||Y==null&&Q==null||pt(s,r,ne,Y,c,Q)}function Xv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,C=y.duration;if(_&&C&&Xv(A)){for(A=0,C=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],K=V.startTime;if(K>C)break;var X=V.transferSize,ne=V.initiatorType;X&&Xv(ne)&&(V=V.responseEnd,A+=X*(V<C?1:(C-K)/(V-K)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Cp=null,wp=null;function lf(s){return s.nodeType===9?s:s.ownerDocument}function Zv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Rp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var bp=null;function jR(){var s=window.event;return s&&s.type==="popstate"?s===bp?!1:(bp=s,!0):(bp=null,!1)}var e0=typeof setTimeout=="function"?setTimeout:void 0,eb=typeof clearTimeout=="function"?clearTimeout:void 0,t0=typeof Promise=="function"?Promise:void 0,tb=typeof queueMicrotask=="function"?queueMicrotask:typeof t0<"u"?function(s){return t0.resolve(null).then(s).catch(nb)}:e0;function nb(s){setTimeout(function(){throw s})}function Cr(s){return s==="head"}function n0(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Ga(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")fu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,fu(l);for(var _=l.firstChild;_;){var A=_.nextSibling,C=_.nodeName;_[ii]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&fu(s.ownerDocument.body);l=y}while(l);Ga(r)}function i0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Np(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Np(l),si(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function ib(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[ii])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=gi(s.nextSibling),s===null)break}return null}function sb(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=gi(s.nextSibling),s===null))return null;return s}function s0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=gi(s.nextSibling),s===null))return null;return s}function xp(s){return s.data==="$?"||s.data==="$~"}function Mp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function rb(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function gi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Dp=null;function r0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return gi(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function o0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function a0(s,r,l){switch(r=lf(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function fu(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);si(s)}var yi=new Map,l0=new Set;function uf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Os=ue.d;ue.d={f:ob,r:ab,D:lb,C:ub,L:cb,m:fb,X:hb,S:db,M:pb};function ob(){var s=Os.f(),r=jc();return s||r}function ab(s){var r=Sn(s);r!==null&&r.tag===5&&r.type==="form"?C_(r):Os.r(s)}var Fa=typeof document>"u"?null:document;function u0(s,r,l){var c=Fa;if(c&&typeof r=="string"&&r){var y=Mn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),l0.has(y)||(l0.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),fn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function lb(s){Os.D(s),u0("dns-prefetch",s,null)}function ub(s,r){Os.C(s,r),u0("preconnect",s,r)}function cb(s,r,l){Os.L(s,r,l);var c=Fa;if(c&&s&&r){var y='link[rel="preload"][as="'+Mn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Mn(l.imageSizes)+'"]')):y+='[href="'+Mn(s)+'"]';var _=y;switch(r){case"style":_=qa(s);break;case"script":_=Ha(s)}yi.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),yi.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(du(_))||r==="script"&&c.querySelector(hu(_))||(r=c.createElement("link"),fn(r,"link",s),Pt(r),c.head.appendChild(r)))}}function fb(s,r){Os.m(s,r);var l=Fa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Mn(c)+'"][href="'+Mn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ha(s)}if(!yi.has(_)&&(s=T({rel:"modulepreload",href:s},r),yi.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(hu(_)))return}c=l.createElement("link"),fn(c,"link",s),Pt(c),l.head.appendChild(c)}}}function db(s,r,l){Os.S(s,r,l);var c=Fa;if(c&&s){var y=oi(c).hoistableStyles,_=qa(s);r=r||"default";var A=y.get(_);if(!A){var C={loading:0,preload:null};if(A=c.querySelector(du(_)))C.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=yi.get(_))&&Pp(s,l);var V=A=c.createElement("link");Pt(V),fn(V,"link",s),V._p=new Promise(function(K,X){V.onload=K,V.onerror=X}),V.addEventListener("load",function(){C.loading|=1}),V.addEventListener("error",function(){C.loading|=2}),C.loading|=4,cf(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:C},y.set(_,A)}}}function hb(s,r){Os.X(s,r);var l=Fa;if(l&&s){var c=oi(l).hoistableScripts,y=Ha(s),_=c.get(y);_||(_=l.querySelector(hu(y)),_||(s=T({src:s,async:!0},r),(r=yi.get(y))&&Vp(s,r),_=l.createElement("script"),Pt(_),fn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function pb(s,r){Os.M(s,r);var l=Fa;if(l&&s){var c=oi(l).hoistableScripts,y=Ha(s),_=c.get(y);_||(_=l.querySelector(hu(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=yi.get(y))&&Vp(s,r),_=l.createElement("script"),Pt(_),fn(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function c0(s,r,l,c){var y=(y=Pe.current)?uf(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=qa(l.href),l=oi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=qa(l.href);var _=oi(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(du(s)))&&!_._p&&(A.instance=_,A.state.loading=5),yi.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},yi.set(s,l),_||mb(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ha(l),l=oi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function qa(s){return'href="'+Mn(s)+'"'}function du(s){return'link[rel="stylesheet"]['+s+"]"}function f0(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function mb(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),fn(r,"link",l),Pt(r),s.head.appendChild(r))}function Ha(s){return'[src="'+Mn(s)+'"]'}function hu(s){return"script[async]"+s}function d0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Mn(l.href)+'"]');if(c)return r.instance=c,Pt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Pt(c),fn(c,"style",y),cf(c,l.precedence,s),r.instance=c;case"stylesheet":y=qa(l.href);var _=s.querySelector(du(y));if(_)return r.state.loading|=4,r.instance=_,Pt(_),_;c=f0(l),(y=yi.get(y))&&Pp(c,y),_=(s.ownerDocument||s).createElement("link"),Pt(_);var A=_;return A._p=new Promise(function(C,V){A.onload=C,A.onerror=V}),fn(_,"link",c),r.state.loading|=4,cf(_,l.precedence,s),r.instance=_;case"script":return _=Ha(l.src),(y=s.querySelector(hu(_)))?(r.instance=y,Pt(y),y):(c=l,(y=yi.get(_))&&(c=T({},l),Vp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Pt(y),fn(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,cf(c,l.precedence,s));return r.instance}function cf(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var C=c[A];if(C.dataset.precedence===r)_=C;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Pp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Vp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var ff=null;function h0(s,r,l){if(ff===null){var c=new Map,y=ff=new Map;y.set(l,c)}else y=ff,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[ii]||_[ft]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var C=c.get(A);C?C.push(_):c.set(A,[_])}}return c}function p0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function gb(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function m0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function yb(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=qa(c.href),_=r.querySelector(du(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=df.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,Pt(_);return}_=r.ownerDocument||r,c=f0(c),(y=yi.get(y))&&Pp(c,y),_=_.createElement("link"),Pt(_);var A=_;A._p=new Promise(function(C,V){A.onload=C,A.onerror=V}),fn(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=df.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var kp=0;function _b(s,r){return s.stylesheets&&s.count===0&&pf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&pf(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&kp===0&&(kp=62500*ZR());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&pf(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>kp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function df(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var hf=null;function pf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,hf=new Map,r.forEach(vb,s),hf=null,df.call(s))}function vb(s,r){if(!(r.state.loading&4)){var l=hf.get(s);if(l)var c=l.get(null);else{l=new Map,hf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=df.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var pu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function Tb(s,r,l,c,y,_,A,C,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.hiddenUpdates=ni(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function g0(s,r,l,c,y,_,A,C,V,K,X,ne){return s=new Tb(s,r,l,A,V,K,X,ne,C),r=1,_===!0&&(r|=24),_=Kn(3,null,null,r),s.current=_,_.stateNode=s,r=ph(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},_h(_),s}function y0(s){return s?(s=_a,s):_a}function _0(s,r,l,c,y,_){y=y0(y),c.context===null?c.context=y:c.pendingContext=y,c=pr(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=mr(s,c,r),l!==null&&(Un(l,s,r),Yl(l,s,r))}function v0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Lp(s,r){v0(s,r),(s=s.alternate)&&v0(s,r)}function T0(s){if(s.tag===13||s.tag===31){var r=_o(s,67108864);r!==null&&Un(r,s,67108864),Lp(s,67108864)}}function E0(s){if(s.tag===13||s.tag===31){var r=Wn();r=_e(r);var l=_o(s,r);l!==null&&Un(l,s,r),Lp(s,r)}}var mf=!0;function Eb(s,r,l,c){var y=J.T;J.T=null;var _=ue.p;try{ue.p=2,Up(s,r,l,c)}finally{ue.p=_,J.T=y}}function Sb(s,r,l,c){var y=J.T;J.T=null;var _=ue.p;try{ue.p=8,Up(s,r,l,c)}finally{ue.p=_,J.T=y}}function Up(s,r,l,c){if(mf){var y=Op(c);if(y===null)Ap(s,r,c,gf,l),A0(s,c);else if(Ib(y,s,r,l,c))c.stopPropagation();else if(A0(s,c),r&4&&-1<Ab.indexOf(s)){for(;y!==null;){var _=Sn(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ei(_.pendingLanes);if(A!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var V=1<<31-yt(A);C.entanglements[1]|=V,A&=~V}rs(_),(st&6)===0&&(Xc=se()+500,lu(0))}}break;case 31:case 13:C=_o(_,2),C!==null&&Un(C,_,2),jc(),Lp(_,2)}if(_=Op(c),_===null&&Ap(s,r,c,gf,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else Ap(s,r,c,null,l)}}function Op(s){return s=ai(s),Fp(s)}var gf=null;function Fp(s){if(gf=null,s=ri(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return gf=s,null}function S0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zi()){case Zs:return 2;case io:return 8;case Ki:case Sl:return 32;case Zo:return 268435456;default:return 32}default:return 32}}var qp=!1,wr=null,Rr=null,br=null,mu=new Map,gu=new Map,Nr=[],Ab="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A0(s,r){switch(s){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":mu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":gu.delete(r.pointerId)}}function yu(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Sn(r),r!==null&&T0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function Ib(s,r,l,c,y){switch(r){case"focusin":return wr=yu(wr,s,r,l,c,y),!0;case"dragenter":return Rr=yu(Rr,s,r,l,c,y),!0;case"mouseover":return br=yu(br,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return mu.set(_,yu(mu.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,gu.set(_,yu(gu.get(_)||null,s,r,l,c,y)),!0}return!1}function I0(s){var r=ri(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,xe(s.priority,function(){E0(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,xe(s.priority,function(){E0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Op(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);xl=c,l.target.dispatchEvent(c),xl=null}else return r=Sn(l),r!==null&&T0(r),s.blockedOn=l,!1;r.shift()}return!0}function C0(s,r,l){yf(s)&&l.delete(r)}function Cb(){qp=!1,wr!==null&&yf(wr)&&(wr=null),Rr!==null&&yf(Rr)&&(Rr=null),br!==null&&yf(br)&&(br=null),mu.forEach(C0),gu.forEach(C0)}function _f(s,r){s.blockedOn===r&&(s.blockedOn=null,qp||(qp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Cb)))}var vf=null;function w0(s){vf!==s&&(vf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vf===s&&(vf=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Fp(c||l)===null)continue;break}var _=Sn(l);_!==null&&(s.splice(r,3),r-=3,Oh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Ga(s){function r(V){return _f(V,s)}wr!==null&&_f(wr,s),Rr!==null&&_f(Rr,s),br!==null&&_f(br,s),mu.forEach(r),gu.forEach(r);for(var l=0;l<Nr.length;l++){var c=Nr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Nr.length&&(l=Nr[0],l.blockedOn===null);)I0(l),l.blockedOn===null&&Nr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[Mt]||null;if(typeof _=="function")A||w0(l);else if(A){var C=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[Mt]||null)C=A.formAction;else if(Fp(y)!==null)continue}else C=A.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),w0(l)}}}function R0(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Hp(s){this._internalRoot=s}Tf.prototype.render=Hp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Wn();_0(l,c,s,r,null,null)},Tf.prototype.unmount=Hp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;_0(s.current,2,null,s,null,null),jc(),r[En]=null}};function Tf(s){this._internalRoot=s}Tf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Le();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Nr.length&&r!==0&&r<Nr[l].priority;l++);Nr.splice(l,0,s),l===0&&I0(s)}};var b0=e.version;if(b0!=="19.2.3")throw Error(i(527,b0,"19.2.3"));ue.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var wb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{Hn=Ef.inject(wb),Wt=Ef}catch{}}return vu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=k_,_=L_,A=U_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=g0(s,1,!1,null,null,l,c,null,y,_,A,R0),s[En]=r.current,Sp(s),new Hp(r)},vu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=k_,A=L_,C=U_,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),r=g0(s,1,!0,r,l??null,c,y,V,_,A,C,R0),r.context=y0(null),l=r.current,c=Wn(),c=_e(c),y=pr(c),y.callback=null,mr(l,y,c),l=c,r.current.lanes=l,ys(r,l),rs(r),s[En]=r.current,Sp(s),new Tf(r)},vu.version="19.2.3",vu}var O0;function Ub(){if(O0)return zp.exports;O0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zp.exports=Lb(),zp.exports}var Ob=Ub();const Fb=rA(Ob);var Ne=(n=>(n.LANDING="LANDING",n.HOME="HOME",n.UPLOAD="UPLOAD",n.LOADING="LOADING",n.MENU="MENU",n.CHECKOUT="CHECKOUT",n.HISTORY="HISTORY",n.RECEIPT="RECEIPT",n.WORDPAL_HOME="WORDPAL_HOME",n.WORDPAL_UPLOAD="WORDPAL_UPLOAD",n.WORDPAL_RESULT="WORDPAL_RESULT",n))(Ne||{});const Kt={Camera:()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a48.324 48.324 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})]}),Photo:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),History:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Plus:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Minus:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})}),Navigation:()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),Check:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),ChevronLeft:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),Speaker:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),Settings:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),Logout:()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})}),Locate:()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]})},qb={en:{settings:"Settings",uiLanguage:"Interface Language",targetLanguage:"Target Language",apiKey:"API Key",apiKeyPlaceholder:"Paste API Key here...",getKey:"Get a free key here",save:"Save",saved:"Saved",cancel:"Cancel",appTitle:"AI Assistant",chooseTool:"Choose your tool",flavorPal:"FlavorPal",flavorPalDesc:"Smart Menu Translator & Order Manager",wordPal:"WordPal",wordPalDesc:"Instant Text Translation & OCR",takePhoto:"Take Photo",uploadGallery:"Upload from Gallery",analyzeMenu:"Analyze Menu",translateText:"Translate Text",originalText:"Original Text",translation:"Translation",translateNew:"Translate New Text",history:"History",menu:"Menu",checkout:"Checkout",receipt:"Receipt",finishOrder:"Finish Order",estTotal:"Estimated Total",tip:"Tip: Ensure text is clear and well-lit.",didYouKnow:"DID YOU KNOW?",diningEtiquette:"Dining Etiquette",languageFact:"Language Fact",factFlavor:`"Did you know? In Italy, it's considered a crime to add parmesan cheese to a seafood pasta!"`,factWord:`"The word 'alphabet' comes from the first two letters of the Greek alphabet: alpha and beta."`,loadingFlavor:"Waking up FlavorPal...",loadingFlavor1:"Scanning the menu ingredients...",loadingFlavor2:"Translating for your appetite...",loadingFlavor3:"Finding the best food pairings...",loadingFlavor4:"Calculating local currency...",loadingFlavor5:"Finalizing the details...",loadingWord:"Waking up WordPal...",loadingWord1:"Scanning text...",loadingWord2:"Detecting language...",loadingWord3:"Translating content...",loadingWord4:"Refining grammar...",loadingWord5:"Finalizing translation...",recentVisits:"Recent Visits",details:"Details",swap:"Swap",receiptImg:"Receipt Img",navigate:"Navigate",viewReceipt:"View Receipt",items:"items",subtotal:"Subtotal",total:"TOTAL",estHkd:"Est. HKD",continueOrdering:"+ Continue Ordering",thankYou:"thank you for using flavorpal",deleteHistoryConfirm:"Are you sure you want to delete this order history?",failedAnalyze:"Failed to analyze. Please check your API key or try a clearer photo.",enterKey:"Enter API Key",apiKeyDesc:"Paste your Google Gemini API Key below to enable AI features. It will be safely stored for your next visit.",saveContinue:"Save & Continue",login:"Log In",rememberMe:"Remember Email",signup:"Sign Up",email:"Email",password:"Password",logout:"Log Out",welcome:"Welcome",loggedInAs:"Logged in as",noAccount:"Don't have an account?",hasAccount:"Already have an account?",authError:"Authentication failed. Please check your credentials.",loginPrompt:"Please log in to save your history and preferences.",restaurantName:"Restaurant Name",restaurantAddress:"Location / Address",enterRestName:"Enter restaurant name...",enterRestAddr:"Enter location or address...",locate:"Locate",locateSuccess:"Location Found",locating:"Locating...",locateError:"Could not find location",savedToGallery:"Receipt saved to gallery!",currencyDisclaimer:"Rates are estimates"},zh:{settings:"",uiLanguage:"",targetLanguage:"",apiKey:"API ",apiKeyPlaceholder:" API ...",getKey:"",save:"",saved:"",cancel:"",appTitle:"AI ",chooseTool:"",flavorPal:"FlavorPal",flavorPalDesc:"",wordPal:"WordPal",wordPalDesc:" OCR",takePhoto:"",uploadGallery:"",analyzeMenu:"",translateText:"",originalText:"",translation:"",translateNew:"",history:"",menu:"",checkout:"",receipt:"",finishOrder:"",estTotal:"",tip:"",didYouKnow:"",diningEtiquette:"",languageFact:"",factFlavor:"",factWord:"AlphabetAlpha  Beta",loadingFlavor:" FlavorPal...",loadingFlavor1:"...",loadingFlavor2:"...",loadingFlavor3:"...",loadingFlavor4:"...",loadingFlavor5:"...",loadingWord:" WordPal...",loadingWord1:"...",loadingWord2:"...",loadingWord3:"...",loadingWord4:"...",loadingWord5:"...",recentVisits:"",details:"",swap:"",receiptImg:"",navigate:"",viewReceipt:"",items:"",subtotal:"",total:"",estHkd:"",continueOrdering:"+ ",thankYou:" FlavorPal",deleteHistoryConfirm:"",failedAnalyze:" API ",enterKey:" API ",apiKeyDesc:" Google Gemini API  AI ",saveContinue:"",login:"",rememberMe:"",signup:"",email:"",password:"",logout:"",welcome:"",loggedInAs:"",noAccount:"",hasAccount:"",authError:"",loginPrompt:"",restaurantName:" ()",restaurantAddress:" /  ()",enterRestName:"...",enterRestAddr:"...",locate:"",locateSuccess:"",locating:"...",locateError:"",savedToGallery:"",currencyDisclaimer:""}},Mr=({children:n,title:e,onBack:t,actions:i})=>w.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col relative pb-24 shadow-2xl bg-slate-950 overflow-hidden text-slate-100",children:[w.jsxs("header",{className:"px-6 pt-8 pb-4 flex items-center justify-between sticky top-0 bg-slate-950/80 backdrop-blur-md z-10 border-b border-slate-800/50",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[t&&w.jsx("button",{onClick:t,className:"p-2 -ml-2 hover:bg-slate-800 rounded-full transition-colors text-slate-300",children:w.jsx(Kt.ChevronLeft,{})}),w.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:e})]}),w.jsx("div",{className:"flex gap-2 text-slate-300",children:i})]}),w.jsx("main",{className:"flex-1 px-6",children:n})]});var Hb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Gb,Bb;function zb(){return{geminiUrl:Gb,vertexUrl:Bb}}function Kb(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=zb();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $s{}function he(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const v=m[h];p(v,e.slice(a+1),t[h])}else for(const h of m)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];p(m[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function Yb(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&a.length>d)for(let m=d;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}dm(n,o,a,0,u)}}function dm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const m of d[u])dm(m,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of d)m[h]=u[h];for(const[h,v]of Object.entries(m)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,v)}for(const h of d)delete u[h]}}else{const u=n;a in u&&dm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jb(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function $b(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Wb(u)),e}function Qb(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],Xb(u)),e}function Wb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Zb(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function Xb(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>jb(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function Zb(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],rN(t)),e}function jb(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],oN(t)),e}function eN(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function tN(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function nN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],iN(u)),e}function iN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function oA(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],sN(u)),e}function sN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function rN(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],tg(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function oN(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],tg(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var F0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(F0||(F0={}));var q0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(q0||(q0={}));var H0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(H0||(H0={}));var wt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(wt||(wt={}));var G0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(G0||(G0={}));var B0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(B0||(B0={}));var z0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(z0||(z0={}));var K0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(K0||(K0={}));var Y0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Y0||(Y0={}));var J0;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(J0||(J0={}));var $0;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($0||($0={}));var Q0;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Q0||(Q0={}));var W0;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(W0||(W0={}));var X0;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(X0||(X0={}));var Z0;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Z0||(Z0={}));var j0;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(j0||(j0={}));var eT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eT||(eT={}));var tT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(tT||(tT={}));var nT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nT||(nT={}));var Yf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Yf||(Yf={}));var iT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iT||(iT={}));var sT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sT||(sT={}));var rT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rT||(rT={}));var hm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hm||(hm={}));var oT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(oT||(oT={}));var aT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(aT||(aT={}));var lT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(lT||(lT={}));var uT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uT||(uT={}));var cT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cT||(cT={}));var fT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fT||(fT={}));var dT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(dT||(dT={}));var hT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var pT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(pT||(pT={}));var mT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(mT||(mT={}));var gT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var yT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yT||(yT={}));var _T;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_T||(_T={}));var vT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vT||(vT={}));var TT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(TT||(TT={}));var ET;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ET||(ET={}));var ST;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ST||(ST={}));var AT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(AT||(AT={}));var IT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IT||(IT={}));var CT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(CT||(CT={}));var wT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wT||(wT={}));var RT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(RT||(RT={}));var bT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bT||(bT={}));var NT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(NT||(NT={}));var xT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(xT||(xT={}));var MT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MT||(MT={}));var DT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DT||(DT={}));var PT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(PT||(PT={}));var VT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(VT||(VT={}));var kT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kT||(kT={}));var LT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(LT||(LT={}));var $a;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($a||($a={}));class pm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Tu{get text(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const T=[];for(const S of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[R,L]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(L!==null||L!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const T of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class UT{}class OT{}class aN{}class lN{}class uN{}class cN{}class FT{}class qT{}class HT{}class fN{}class Jf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Jf;let o;const a=e;return t?o=Qb(a):o=$b(a),Object.assign(i,o),i}}class GT{}class BT{}class zT{}class KT{}class dN{}class hN{}class pN{}class ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ng,a=nN(e);return Object.assign(i,a),i}}class mN{}class gN{}class yN{}class YT{}class _N{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class vN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ig{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ig,a=oA(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aA(n,e){const t=nt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function lA(n){return Array.isArray(n)?n.map(e=>$f(e)):[$f(n)]}function $f(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function uA(n){const e=$f(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cA(n){const e=$f(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function fA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>JT(e)):[JT(n)]}function mm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function $T(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function QT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function vn(n){if(n==null)throw new Error("ContentUnion is required");return mm(n)?n:{role:"user",parts:fA(n)}}function sg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=vn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=vn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>vn(t)):[vn(e)]}function Ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if($T(n)||QT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vn(n)]}const e=[],t=[],i=mm(n[0]);for(const o of n){const a=mm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if($T(o)||QT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:fA(t)}),e}function TN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(wt).includes(t[0].toUpperCase())?t[0].toUpperCase():wt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(wt).includes(i.toUpperCase())?i.toUpperCase():wt.TYPE_UNSPECIFIED})}}function Xa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&TN(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(wt).includes(d.toUpperCase())?d.toUpperCase():wt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Xa(d);else if(i.includes(u)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(Xa(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,v]of Object.entries(d))m[h]=Xa(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function rg(n){return Xa(n)}function og(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ag(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function fl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xa(e.response));return n}function dl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function EN(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Qs(n,e){if(typeof e!="string")throw new Error("name must be a string");return EN(n,e,"cachedContents")}function dA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Wr(n){return tg(n)}function SN(n){return n!=null&&typeof n=="object"&&"name"in n}function AN(n){return n!=null&&typeof n=="object"&&"video"in n}function IN(n){return n!=null&&typeof n=="object"&&"uri"in n}function hA(n){var e;let t;if(SN(n)&&(t=n.name),!(IN(n)&&(t=n.uri,t===void 0))&&!(AN(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function pA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mA(n){for(const e of["models","tunedModels","publisherModels"])if(CN(n,e))return n[e];return[]}function CN(n,e){return n!==null&&typeof n=="object"&&e in n}function wN(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function RN(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=wN(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function gA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function bN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function hl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function _A(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NN(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>ux(u))),p(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function xN(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function MN(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vf(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&p(e,["state"],_A(o));const a=f(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(n,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(n,["metadata","output"]);return h!=null&&p(e,["dest"],NN(yA(h))),e}function gm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["state"]);o!=null&&p(e,["state"],_A(o));const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=f(n,["model"]);v!=null&&p(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&p(e,["src"],DN(T));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],xN(yA(S)));const R=f(n,["completionStats"]);return R!=null&&p(e,["completionStats"],R),e}function DN(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function PN(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>lx(n,u))),p(t,["requests","requests"],a)}return t}function VN(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kN(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function LN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function UN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function ON(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],FN(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),p(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function FN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function vA(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>gx(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function qN(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function HN(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],MN(bN(o))),t}function WT(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],PN(n,gA(n,o)));const a=f(e,["config"]);return a!=null&&qN(a,t),t}function GN(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],nt(n,i));const o=f(e,["src"]);o!=null&&p(t,["inputConfig"],VN(gA(n,o)));const a=f(e,["config"]);return a!=null&&HN(a,t),t}function BN(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function zN(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],XN(n,o));const a=f(e,["config"]);return a!=null&&BN(a,t),t}function KN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function YN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function JN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function $N(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function QN(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=sg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(p(t,["_self"],WN(o,t)),Yb(t,{"requests[].*":"requests[].request.*"})),t}function WN(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function XN(n,e){const t={},i=f(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],QN(n,o)),t}function ZN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function jN(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ex(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tx(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],vA(vn(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&p(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const H=f(e,["seed"]);H!=null&&p(i,["seed"],H);const U=f(e,["responseMimeType"]);U!=null&&p(i,["responseMimeType"],U);const W=f(e,["responseSchema"]);W!=null&&p(i,["responseSchema"],rg(W));const oe=f(e,["responseJsonSchema"]);if(oe!=null&&p(i,["responseJsonSchema"],oe),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(qe=>yx(qe))),p(t,["safetySettings"],D)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let D=dl(ae);Array.isArray(D)&&(D=D.map(qe=>vx(fl(qe)))),p(t,["tools"],D)}const pe=f(e,["toolConfig"]);if(t!==void 0&&pe!=null&&p(t,["toolConfig"],_x(pe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&p(t,["cachedContent"],Qs(n,fe));const M=f(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&p(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],og(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&p(i,["thinkingConfig"],P);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],ax(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function nx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>ON(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function ix(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function sx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],hl(n,i)),t}function rx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function ox(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function ax(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lx(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["request","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let d=Ei(o);Array.isArray(d)&&(d=d.map(m=>vA(m))),p(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],tx(n,u,f(t,["request"],{}))),t}function ux(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],nx(t));const i=f(n,["error"]);return i!=null&&p(e,["error"],i),e}function cx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function fx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function dx(n){const e={},t=f(n,["config"]);return t!=null&&cx(t,e),e}function hx(n){const e={},t=f(n,["config"]);return t!=null&&fx(t,e),e}function px(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Vf(u))),p(e,["batchJobs"],a)}return e}function mx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>gm(u))),p(e,["batchJobs"],a)}return e}function gx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],ZN(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],jN(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],kN(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function yx(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function _x(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],ex(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function vx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],rx(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],ox(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Bs||(Bs={}));class Bo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tx extends $s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Bo(Bs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=WT(this.apiClient,e),i=t._url,o=he("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,m=d.requests,h=[];for(const v of m){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=GN(this.apiClient,e);return d=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const h=WT(this.apiClient,e);return d=he("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Vf(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zN(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Vf(m))}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=sx(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const h=ix(this.apiClient,e);return d=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Vf(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const m=UN(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=LN(this.apiClient,e);u=he("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=hx(e);return d=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=mx(v),S=new YT;return Object.assign(S,T),S})}else{const h=dx(e);return d=he("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=px(v),S=new YT;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=YN(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>$N(v))}else{const h=KN(this.apiClient,e);return d=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>JN(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ex(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function XT(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>zx(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function Sx(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=Ei(u);Array.isArray(v)&&(v=v.map(T=>XT(T))),p(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],XT(vn(d)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>Yx(T))),p(e,["tools"],v)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],Kx(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ax(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Ei(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],vn(d));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>Jx(S))),p(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function Ix(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],aA(n,i));const o=f(e,["config"]);return o!=null&&Sx(o,t),t}function Cx(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],aA(n,i));const o=f(e,["config"]);return o!=null&&Ax(o,t),t}function wx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Qs(n,i)),t}function Rx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Qs(n,i)),t}function bx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Nx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function xx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Mx(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Dx(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Px(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function Vx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Qs(n,i)),t}function kx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Qs(n,i)),t}function Lx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Ux(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Ox(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function Fx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function qx(n){const e={},t=f(n,["config"]);return t!=null&&Ox(t,e),e}function Hx(n){const e={},t=f(n,["config"]);return t!=null&&Fx(t,e),e}function Gx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function Bx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function zx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],xx(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],Mx(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],Ex(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function Kx(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Dx(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function Yx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],Lx(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],Ux(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Jx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Px(S))),p(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function $x(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function Qx(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function Wx(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Qs(n,i));const o=f(e,["config"]);return o!=null&&$x(o,t),t}function Xx(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Qs(n,i));const o=f(e,["config"]);return o!=null&&Qx(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zx extends $s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Bo(Bs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Cx(this.apiClient,e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=Ix(this.apiClient,e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=kx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=Vx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Rx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Nx(v),S=new zT;return Object.assign(S,T),S})}else{const h=wx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=bx(v),S=new zT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Xx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=Wx(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Hx(e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Bx(v),S=new KT;return Object.assign(S,T),S})}else{const h=qx(e);return d=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Gx(v),S=new KT;return Object.assign(S,T),S})}}}function Qf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function ZT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(n){return this instanceof Me?(this.v=n,this):new Me(n)}function ki(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(R){return function(L){return Promise.resolve(L).then(R,T)}}function d(R,L){i[R]&&(o[R]=function(H){return new Promise(function(U,W){a.push([R,H,U,W])>1||m(R,H)})},L&&(o[R]=L(o[R])))}function m(R,L){try{h(i[R](L))}catch(H){S(a[0][3],H)}}function h(R){R.value instanceof Me?Promise.resolve(R.value.v).then(v,T):S(a[0][2],R)}function v(R){m("next",R)}function T(R){m("throw",R)}function S(R,L){R(L),a.shift(),a.length&&m(a[0][0],a[0][1])}}function Li(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZT=="function"?ZT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,m){u=n[a](u),o(d,m,u.done,u.value)})}}function o(a,u,d,m){Promise.resolve(m).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jx(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:TA(t)}function TA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function e1(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!TA(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class t1{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new n1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class n1{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),e1(a)}async sendMessage(e){var t;await this.sendPromise;const i=vn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const R=h?[h]:[];this.recordHistory(i,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=vn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?jT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ki(this,arguments,function*(){var o,a,u,d,m,h;const v=[];try{for(var T=!0,S=Li(e),R;R=yield Me(S.next()),o=R.done,!o;T=!0){d=R.value,T=!1;const L=d;if(jx(L)){const H=(h=(m=L.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;H!==void 0&&v.push(H)}yield yield Me(L)}}catch(L){a={error:L}}finally{try{!T&&!o&&(u=S.return)&&(yield Me(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...jT(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Td extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Td.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i1(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function s1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function r1(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],hA(t)),e}function o1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function a1(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],hA(t)),e}function l1(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function u1(n){const e={},t=f(n,["config"]);return t!=null&&l1(t,e),e}function c1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f1 extends $s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Bo(Bs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u1(e);return a=he("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=c1(m),v=new mN;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=i1(e);return a=he("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=s1(m),v=new gN;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=a1(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r1(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=o1(m),v=new yN;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kf(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function d1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>b1(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function h1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function p1(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function g1(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&p(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&p(e,["responseModalities"],L);const H=f(n,["responseSchema"]);H!=null&&p(e,["responseSchema"],H);const U=f(n,["routingConfig"]);U!=null&&p(e,["routingConfig"],U);const W=f(n,["seed"]);W!=null&&p(e,["seed"],W);const oe=f(n,["speechConfig"]);oe!=null&&p(e,["speechConfig"],oe);const Z=f(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&p(e,["temperature"],ae);const pe=f(n,["thinkingConfig"]);pe!=null&&p(e,["thinkingConfig"],pe);const fe=f(n,["topK"]);fe!=null&&p(e,["topK"],fe);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function y1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function _1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function v1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],d1(vn(L)));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let fe=dl(H);Array.isArray(fe)&&(fe=fe.map(M=>x1(fl(M)))),p(e,["setup","tools"],fe)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],N1(U));const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","inputAudioTranscription"],W);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&p(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const pe=f(n,["proactivity"]);if(e!==void 0&&pe!=null&&p(e,["setup","proactivity"],pe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function T1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],g1(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],vn(L));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let M=dl(H);Array.isArray(M)&&(M=M.map(x=>M1(fl(x)))),p(e,["setup","tools"],M)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],U);const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","inputAudioTranscription"],W);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&p(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const pe=f(n,["proactivity"]);e!==void 0&&pe!=null&&p(e,["setup","proactivity"],pe);const fe=f(n,["explicitVadSignal"]);return e!==void 0&&fe!=null&&p(e,["setup","explicitVadSignal"],fe),t}function E1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],nt(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],v1(o,t)),t}function S1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],nt(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],T1(o,t)),t}function A1(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function I1(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function C1(n){const e={},t=f(n,["media"]);if(t!=null){let h=lA(t);Array.isArray(h)&&(h=h.map(v=>kf(v))),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],kf(cA(i)));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],kf(uA(a)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function w1(n){const e={},t=f(n,["media"]);if(t!=null){let h=lA(t);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],cA(i));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],uA(a));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function R1(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],D1(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(n,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function b1(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],h1(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],p1(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],kf(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function N1(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function x1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],y1(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],_1(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function M1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>m1(S))),p(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function D1(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(n,["promptTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(L=>L)),p(e,["promptTokensDetails"],R)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(L=>L)),p(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(L=>L)),p(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(L=>L)),p(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function V1(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],k1(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),p(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function k1(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function L1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let a=Ei(o);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["contents"],a)}return t}function U1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["tokensInfo"],o)}return e}function O1(n){const e={},t=f(n,["values"]);t!=null&&p(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&p(e,["statistics"],F1(i)),e}function F1(n){const e={},t=f(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function Ed(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>$M(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function q1(n){const e={},t=f(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function H1(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function G1(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],vn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>IA(d))),p(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],PM(a)),t}function B1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let u=Ei(o);Array.isArray(u)&&(u=u.map(d=>Ed(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&H1(a),t}function z1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let u=Ei(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&G1(a,t),t}function K1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function Y1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function J1(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],nt(n,i)),t}function $1(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],nt(n,i)),t}function Q1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function W1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function X1(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&p(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const H=f(n,["outputCompressionQuality"]);e!==void 0&&H!=null&&p(e,["parameters","outputOptions","compressionQuality"],H);const U=f(n,["addWatermark"]);e!==void 0&&U!=null&&p(e,["parameters","addWatermark"],U);const W=f(n,["labels"]);e!==void 0&&W!=null&&p(e,["labels"],W);const oe=f(n,["editMode"]);e!==void 0&&oe!=null&&p(e,["parameters","editMode"],oe);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&p(e,["parameters","editConfig","baseSteps"],Z),t}function Z1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>eD(m))),p(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&X1(u,t),t}function j1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Sd(a))),p(e,["generatedImages"],o)}return e}function eM(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function tM(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),t}function nM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let d=sg(n,o);Array.isArray(d)&&(d=d.map(m=>m)),p(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&eM(a,t);const u=f(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],nt(n,u)),t}function iM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let u=sg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&tM(a,t),t}function sM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function rM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>O1(u))),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function oM(n){const e={},t=f(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function aM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function lM(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uM(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cM(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function fM(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],Ed(vn(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&p(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const H=f(e,["seed"]);H!=null&&p(i,["seed"],H);const U=f(e,["responseMimeType"]);U!=null&&p(i,["responseMimeType"],U);const W=f(e,["responseSchema"]);W!=null&&p(i,["responseSchema"],rg(W));const oe=f(e,["responseJsonSchema"]);if(oe!=null&&p(i,["responseJsonSchema"],oe),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(qe=>tD(qe))),p(t,["safetySettings"],D)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let D=dl(ae);Array.isArray(D)&&(D=D.map(qe=>lD(fl(qe)))),p(t,["tools"],D)}const pe=f(e,["toolConfig"]);if(t!==void 0&&pe!=null&&p(t,["toolConfig"],aD(pe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=f(e,["cachedContent"]);t!==void 0&&fe!=null&&p(t,["cachedContent"],Qs(n,fe));const M=f(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&p(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],og(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&p(i,["thinkingConfig"],P);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],OM(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function dM(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],vn(o));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=f(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&p(i,["presencePenalty"],R);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const H=f(e,["seed"]);H!=null&&p(i,["seed"],H);const U=f(e,["responseMimeType"]);U!=null&&p(i,["responseMimeType"],U);const W=f(e,["responseSchema"]);W!=null&&p(i,["responseSchema"],rg(W));const oe=f(e,["responseJsonSchema"]);oe!=null&&p(i,["responseJsonSchema"],oe);const Z=f(e,["routingConfig"]);Z!=null&&p(i,["routingConfig"],Z);const ae=f(e,["modelSelectionConfig"]);ae!=null&&p(i,["modelConfig"],ae);const pe=f(e,["safetySettings"]);if(t!==void 0&&pe!=null){let J=pe;Array.isArray(J)&&(J=J.map(ue=>ue)),p(t,["safetySettings"],J)}const fe=f(e,["tools"]);if(t!==void 0&&fe!=null){let J=dl(fe);Array.isArray(J)&&(J=J.map(ue=>IA(fl(ue)))),p(t,["tools"],J)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const x=f(e,["labels"]);t!==void 0&&x!=null&&p(t,["labels"],x);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&p(t,["cachedContent"],Qs(n,N));const P=f(e,["responseModalities"]);P!=null&&p(i,["responseModalities"],P);const k=f(e,["mediaResolution"]);k!=null&&p(i,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],og(q));const D=f(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const qe=f(e,["thinkingConfig"]);qe!=null&&p(i,["thinkingConfig"],qe);const gt=f(e,["imageConfig"]);if(gt!=null&&p(i,["imageConfig"],FM(gt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function eE(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let u=Ei(o);Array.isArray(u)&&(u=u.map(d=>Ed(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],fM(n,a,t)),t}function tE(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["contents"]);if(o!=null){let u=Ei(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],dM(n,a,t)),t}function nE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>V1(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function iE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),p(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(e,["responseId"],d);const m=f(n,["usageMetadata"]);return m!=null&&p(e,["usageMetadata"],m),e}function hM(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const v=f(n,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&p(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function pM(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&p(e,["parameters","language"],R);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const H=f(n,["outputCompressionQuality"]);e!==void 0&&H!=null&&p(e,["parameters","outputOptions","compressionQuality"],H);const U=f(n,["addWatermark"]);e!==void 0&&U!=null&&p(e,["parameters","addWatermark"],U);const W=f(n,["labels"]);e!==void 0&&W!=null&&p(e,["labels"],W);const oe=f(n,["imageSize"]);e!==void 0&&oe!=null&&p(e,["parameters","sampleImageSize"],oe);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&p(e,["parameters","enhancePrompt"],Z),t}function mM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&hM(a,t),t}function gM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&pM(a,t),t}function yM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>NM(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],SA(o)),e}function _M(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Sd(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],AA(o)),e}function vM(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],Ad(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>ED(R))),p(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function TM(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const h=f(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&p(e,["parameters","enhancePrompt"],R);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&p(e,["parameters","generateAudio"],L);const H=f(n,["lastFrame"]);e!==void 0&&H!=null&&p(e,["instances[0]","lastFrame"],Hi(H));const U=f(n,["referenceImages"]);if(e!==void 0&&U!=null){let Z=U;Array.isArray(Z)&&(Z=Z.map(ae=>SD(ae))),p(e,["instances[0]","referenceImages"],Z)}const W=f(n,["mask"]);e!==void 0&&W!=null&&p(e,["instances[0]","mask"],TD(W));const oe=f(n,["compressionQuality"]);return e!==void 0&&oe!=null&&p(e,["parameters","compressionQuality"],oe),t}function EM(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],CM(u)),e}function SM(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],wM(u)),e}function AM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],Ad(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],CA(u));const d=f(e,["source"]);d!=null&&RM(d,t);const m=f(e,["config"]);return m!=null&&vM(m,t),t}function IM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],Hi(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],wA(u));const d=f(e,["source"]);d!=null&&bM(d,t);const m=f(e,["config"]);return m!=null&&TM(m,t),t}function CM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>MM(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function wM(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>DM(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function RM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Ad(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],CA(a)),t}function bM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Hi(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],wA(a)),t}function NM(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],qM(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&p(e,["safetyAttributes"],SA(o)),e}function Sd(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],EA(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&p(e,["safetyAttributes"],AA(o));const a=f(n,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function xM(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["mask"],EA(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["labels"],o)}return e}function MM(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],_D(t)),e}function DM(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],vD(t)),e}function PM(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&p(e,["responseMimeType"],R);const L=f(n,["responseModalities"]);L!=null&&p(e,["responseModalities"],L);const H=f(n,["responseSchema"]);H!=null&&p(e,["responseSchema"],H);const U=f(n,["routingConfig"]);U!=null&&p(e,["routingConfig"],U);const W=f(n,["seed"]);W!=null&&p(e,["seed"],W);const oe=f(n,["speechConfig"]);oe!=null&&p(e,["speechConfig"],oe);const Z=f(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&p(e,["temperature"],ae);const pe=f(n,["thinkingConfig"]);pe!=null&&p(e,["thinkingConfig"],pe);const fe=f(n,["topK"]);fe!=null&&p(e,["topK"],fe);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VM(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],nt(n,i)),t}function kM(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],nt(n,i)),t}function LM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function UM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function OM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function FM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=f(n,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function qM(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Wr(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function EA(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Wr(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Ad(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Wr(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Hi(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Wr(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function HM(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],pA(n,d)),i}function GM(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],pA(n,d)),i}function BM(n,e){const t={},i=f(e,["config"]);return i!=null&&HM(n,i,t),t}function zM(n,e){const t={},i=f(e,["config"]);return i!=null&&GM(n,i,t),t}function KM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=mA(o);Array.isArray(a)&&(a=a.map(u=>ym(u))),p(e,["models"],a)}return e}function YM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=mA(o);Array.isArray(a)&&(a=a.map(u=>_m(u))),p(e,["models"],a)}return e}function JM(n){const e={},t=f(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function ym(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["version"]);a!=null&&p(e,["version"],a);const u=f(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],uD(u));const d=f(n,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const m=f(n,["outputTokenLimit"]);m!=null&&p(e,["outputTokenLimit"],m);const h=f(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const v=f(n,["temperature"]);v!=null&&p(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&p(e,["topP"],S);const R=f(n,["topK"]);R!=null&&p(e,["topK"],R);const L=f(n,["thinking"]);return L!=null&&p(e,["thinking"],L),e}function _m(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["versionId"]);a!=null&&p(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>oM(S))),p(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&p(e,["labels"],d);const m=f(n,["_self"]);m!=null&&p(e,["tunedModelInfo"],cD(m));const h=f(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function $M(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],aM(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],lM(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],P1(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function QM(n){const e={},t=f(n,["productImage"]);return t!=null&&p(e,["image"],Hi(t)),e}function WM(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&p(e,["labels"],R),t}function XM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["source"]);o!=null&&jM(o,t);const a=f(e,["config"]);return a!=null&&WM(a,t),t}function ZM(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Sd(o))),p(e,["generatedImages"],i)}return e}function jM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],Hi(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>QM(d))),p(e,["instances[0]","productImages"],u)}return t}function eD(n){const e={},t=f(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Hi(t));const i=f(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&p(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],JM(a));const u=f(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],q1(u));const d=f(n,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const m=f(n,["subjectImageConfig"]);return m!=null&&p(e,["subjectImageConfig"],m),e}function SA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function AA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function tD(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function nD(n){const e={},t=f(n,["image"]);return t!=null&&p(e,["image"],Hi(t)),e}function iD(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const m=f(n,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),t}function sD(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["source"]);o!=null&&oD(o,t);const a=f(e,["config"]);return a!=null&&iD(a,t),t}function rD(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>xM(o))),p(e,["generatedMasks"],i)}return e}function oD(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Hi(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],nD(a)),t}function aD(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],uM(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function lD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],LM(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],UM(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function IA(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>cM(S))),p(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function uD(n){const e={},t=f(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function cD(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function fD(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function dD(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function hD(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","name"],nt(n,i));const o=f(e,["config"]);return o!=null&&fD(o,t),t}function pD(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["config"]);return o!=null&&dD(o,t),t}function mD(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&p(e,["parameters","mode"],R),t}function gD(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],nt(n,i));const o=f(e,["image"]);o!=null&&p(t,["instances[0]","image"],Hi(o));const a=f(e,["upscaleFactor"]);a!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&mD(u,t),t}function yD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Sd(a))),p(e,["generatedImages"],o)}return e}function _D(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Wr(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function vD(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Wr(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function TD(n){const e={},t=f(n,["image"]);t!=null&&p(e,["_self"],Hi(t));const i=f(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function ED(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],Ad(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function SD(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],Hi(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function CA(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Wr(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function wA(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Wr(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AD(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function ID(n){const e={},t=f(n,["config"]);return t!=null&&AD(t,e),e}function CD(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function wD(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&CD(i,e),e}function RD(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function bD(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function ND(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],MD(u)),e}function xD(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&bD(o,e),e}function MD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function DD(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function PD(n){const e={},t=f(n,["config"]);return t!=null&&DD(t,e),e}function VD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function RA(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function kD(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&RA(i,e),e}function LD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UD="Content-Type",OD="X-Server-Timeout",FD="User-Agent",vm="x-goog-api-client",qD="1.34.0",HD=`google-genai-sdk/${qD}`,GD="v1beta1",BD="v1beta";class zD{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:GD,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:BD,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&KD(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await sE(o),new pm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await sE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return ki(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Me(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const L=JSON.parse(T);if("error"in L){const H=JSON.parse(JSON.stringify(L.error)),U=H.status,W=H.code,oe=`got status: ${U}. ${JSON.stringify(L)}`;if(W>=400&&W<600)throw new Td({message:oe,status:W})}}catch(L){if(L.name==="ApiError")throw L}u+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const U of m){const W=u.indexOf(U);W!==-1&&(S===-1||W<S)&&(S=W,R=U.length)}if(S===-1)break;const L=u.substring(0,S);u=u.substring(S+R);const H=L.trim();if(H.startsWith(d)){const U=H.substring(d.length).trim();try{const W=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new pm(W))}catch(W){throw new Error(`exception parsing stream chunk ${U}. ${W}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=HD+" "+this.clientOptions.userAgentExtra;return e[FD]=t,e[vm]=t,e[UD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(OD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const m={file:o},h=this.getFileName(e),v=he("upload/v1beta/files",m._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,m,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&RA(i,T);const S=await this.fetchUploadUrl(h,d,m,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function sE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Td({message:o,status:t}):new Error(o)}}function KD(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],v=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?d[m]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YD="mcp_used/unknown";let JD=!1;function bA(n){for(const e of n)if($D(e)||typeof e=="object"&&"inputSchema"in e)return!0;return JD}function NA(n){var e;const t=(e=n[vm])!==null&&e!==void 0?e:"";n[vm]=(t+` ${YD}`).trimStart()}function $D(n){return n!==null&&typeof n=="object"&&n instanceof lg}function QD(n){return ki(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Me(t.listTools({cursor:o}));for(const d of u.tools)yield yield Me(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class lg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new lg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,m=(t=void 0,Li(QD(v))),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),RN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WD(n,e,t){const i=new vN;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class XD{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=eP(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const v=new Promise(Z=>{h=Z}),T=e.callbacks,S=function(){h({})},R=this.apiClient,L={onopen:S,onmessage:Z=>{WD(R,T.onmessage,Z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Z){}},H=this.webSocketFactory.create(m,jD(u),L);H.connect(),await v;const oe={setup:{model:nt(this.apiClient,e.model)}};return H.send(JSON.stringify(oe)),new ZD(H,this.apiClient)}}class ZD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=I1(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=A1(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($a.PLAY)}pause(){this.sendPlaybackControl($a.PAUSE)}stop(){this.sendPlaybackControl($a.STOP)}resetContext(){this.sendPlaybackControl($a.RESET_CONTEXT)}close(){this.conn.close()}}function jD(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function eP(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function nP(n,e,t){const i=new _N;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=R1(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class iP{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new XD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&bA(e.config.tools)&&NA(T);const S=aP(T);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),v=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${P}?${k}=${N}`}let R=()=>{};const L=new Promise(N=>{R=N}),H=e.callbacks,U=function(){var N;(N=H==null?void 0:H.onopen)===null||N===void 0||N.call(H),R({})},W=this.apiClient,oe={onopen:U,onmessage:N=>{nP(W,H.onmessage,N)},onerror:(t=H==null?void 0:H.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=H==null?void 0:H.onclose)!==null&&i!==void 0?i:function(N){}},Z=this.webSocketFactory.create(v,oP(S),oe);Z.connect(),await L;let ae=nt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();ae=`projects/${N}/locations/${P}/`+ae}let pe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Yf.AUDIO]}:e.config.responseModalities=[Yf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of fe)if(this.isCallableTool(N)){const P=N;M.push(await P.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const x={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?pe=S1(this.apiClient,x):pe=E1(this.apiClient,x),delete pe.config,Z.send(JSON.stringify(pe)),new rP(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sP={turnComplete:!0};class rP{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ei(t.turns),e.isVertexAI()||(i=i.map(o=>Ed(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(tP)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sP),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:w1(e)}:t={realtimeInput:C1(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function oP(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function aP(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rE=10;function oE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Za(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Za(n){return"callTool"in n&&typeof n.callTool=="function"}function lP(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Za(o)))!==null&&i!==void 0?i:!1}function aE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Za(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function lE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uP extends $s{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!lP(t)||oE(t.config))return await this.generateContentInternal(m);const h=aE(t);if(h.length>0){const H=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${H}.`)}let v,T;const S=Ei(m.contents),R=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:rE;let L=0;for(;L<R&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const H=v.candidates[0].content,U=[];for(const W of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Za(W)){const Z=await W.callTool(v.functionCalls);U.push(...Z)}L++,T={role:"user",parts:U},m.contents=Ei(m.contents),m.contents.push(H),m.contents.push(T),lE(m.config)&&(S.push(H),S.push(T))}return lE(m.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),oE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const m=aE(t);if(m.length>0){const T=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Bo(Bs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>Za(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&bA(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),NA(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Za(u)){const d=u,m=await d.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:rE;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,v,T){return ki(this,arguments,function*(){for(var S,R,L,H,U,W;d<a;){u&&(d++,u=!1);const pe=yield Me(h.processParamsMaybeAddMcpUsage(T)),fe=yield Me(h.generateContentStreamInternal(pe)),M=[],x=[];try{for(var oe=!0,Z=(R=void 0,Li(fe)),ae;ae=yield Me(Z.next()),S=ae.done,!S;oe=!0){H=ae.value,oe=!1;const N=H;if(yield yield Me(N),N.candidates&&(!((U=N.candidates[0])===null||U===void 0)&&U.content)){x.push(N.candidates[0].content);for(const P of(W=N.candidates[0].content.parts)!==null&&W!==void 0?W:[])if(d<a&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const k=yield Me(v.get(P.functionCall.name).callTool([P.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){R={error:N}}finally{try{!oe&&!S&&(L=Z.return)&&(yield Me(L.call(Z)))}finally{if(R)throw R.error}}if(M.length>0){u=!0;const N=new Tu;N.candidates=[{content:{role:"user",parts:M}}],yield yield Me(N);const P=[];P.push(...x),P.push({role:"user",parts:M});const k=Ei(T.contents).concat(P);T.contents=k}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=tE(this.apiClient,e);return d=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iE(v),S=new Tu;return Object.assign(S,T),S})}else{const h=eE(this.apiClient,e);return d=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=nE(v),S=new Tu;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=tE(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return ki(this,arguments,function*(){var S,R,L,H;try{for(var U=!0,W=Li(T),oe;oe=yield Me(W.next()),S=oe.done,!S;U=!0){H=oe.value,U=!1;const Z=H,ae=iE(yield Me(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const pe=new Tu;Object.assign(pe,ae),yield yield Me(pe)}}catch(Z){R={error:Z}}finally{try{!U&&!S&&(L=W.return)&&(yield Me(L.call(W)))}finally{if(R)throw R.error}}})})}else{const h=eE(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return ki(this,arguments,function*(){var S,R,L,H;try{for(var U=!0,W=Li(T),oe;oe=yield Me(W.next()),S=oe.done,!S;U=!0){H=oe.value,U=!1;const Z=H,ae=nE(yield Me(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const pe=new Tu;Object.assign(pe,ae),yield yield Me(pe)}}catch(Z){R={error:Z}}finally{try{!U&&!S&&(L=W.return)&&(yield Me(L.call(W)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=iM(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rM(v),S=new UT;return Object.assign(S,T),S})}else{const h=nM(this.apiClient,e);return d=he("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sM(v),S=new UT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=gM(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_M(v),S=new OT;return Object.assign(S,T),S})}else{const h=mM(this.apiClient,e);return d=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yM(v),S=new OT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Z1(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=j1(m),v=new aN;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=gD(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=yD(m),v=new lN;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=XM(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=ZM(m),v=new uN;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=sD(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=rD(m),v=new cN;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=kM(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>_m(v))}else{const h=VM(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ym(v))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=zM(this.apiClient,e);return d=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=YM(v),S=new FT;return Object.assign(S,T),S})}else{const h=BM(this.apiClient,e);return d=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=KM(v),S=new FT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=pD(this.apiClient,e);return d=he("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>_m(v))}else{const h=hD(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ym(v))}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=$1(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=W1(v),S=new qT;return Object.assign(S,T),S})}else{const h=J1(this.apiClient,e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Q1(v),S=new qT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=z1(this.apiClient,e);return d=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Y1(v),S=new HT;return Object.assign(S,T),S})}else{const h=B1(this.apiClient,e);return d=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=K1(v),S=new HT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L1(this.apiClient,e);return a=he("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=U1(m),v=new fN;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=IM(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=SM(v),S=new Jf;return Object.assign(S,T),S})}else{const h=AM(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=EM(v),S=new Jf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP extends $s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=tN(e);return d=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=eN(e);return d=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Jb(e);return a=he("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fP(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dP(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>EP(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function hP(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],TP(n,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),i}function pP(n,e){const t={},i=f(e,["config"]);return i!=null&&p(t,["config"],hP(n,i,t)),t}function mP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gP(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function _P(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function vP(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],R);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],dP(vn(L)));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let fe=dl(H);Array.isArray(fe)&&(fe=fe.map(M=>AP(fl(M)))),p(e,["setup","tools"],fe)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&p(e,["setup","sessionResumption"],SP(U));const W=f(n,["inputAudioTranscription"]);e!==void 0&&W!=null&&p(e,["setup","inputAudioTranscription"],W);const oe=f(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&p(e,["setup","outputAudioTranscription"],oe);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&p(e,["setup","contextWindowCompression"],ae);const pe=f(n,["proactivity"]);if(e!==void 0&&pe!=null&&p(e,["setup","proactivity"],pe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function TP(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],nt(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],vP(o,t)),t}function EP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],mP(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],gP(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],fP(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function SP(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],yP(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],_P(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function CP(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=IP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class wP extends $s{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=pP(this.apiClient,e);a=he("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=CP(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RP(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function bP(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&RP(i,e),e}function NP(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function xP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function MP(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&xP(i,e),e}function DP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PP extends $s{constructor(e){super(),this.apiClient=e,this.list=async t=>new Bo(Bs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NP(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bP(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MP(e);return a=he("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=DP(m),v=new dN;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VP extends $s{constructor(e,t=new PP(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Bo(Bs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ID(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RD(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wD(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PD(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=VD(m),v=new hN;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kD(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=LD(m),v=new pN;return Object.assign(v,h),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xD(e);return a=he("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=ND(m),v=new ng;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return xA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const kP=()=>xA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Em=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ai extends Error{}class bn extends Ai{constructor(e,t,i,o){super(`${bn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Id({message:i,cause:Em(t)});const a=t;return e===400?new DA(e,a,i,o):e===401?new PA(e,a,i,o):e===403?new VA(e,a,i,o):e===404?new kA(e,a,i,o):e===409?new LA(e,a,i,o):e===422?new UA(e,a,i,o):e===429?new OA(e,a,i,o):e>=500?new FA(e,a,i,o):new bn(e,a,i,o)}}class Sm extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Id extends bn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class MA extends Id{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DA extends bn{}class PA extends bn{}class VA extends bn{}class kA extends bn{}class LA extends bn{}class UA extends bn{}class OA extends bn{}class FA extends bn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LP=/^[a-z][a-z0-9+.-]*:/i,UP=n=>LP.test(n);let Am=n=>(Am=Array.isArray,Am(n));const OP=Am;let FP=OP;const uE=FP;function qP(n){if(!n)return!0;for(const e in n)return!1;return!0}function HP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const GP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ai(`${n} must be an integer`);if(e<0)throw new Ai(`${n} must be a positive integer`);return e},BP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ba="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const YP=()=>{var n,e,t,i,o;const a=KP();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ba,"X-Stainless-OS":fE(Deno.build.os),"X-Stainless-Arch":cE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ba,"X-Stainless-OS":fE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":cE((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=JP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function JP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const cE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",fE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Sf;const $P=()=>Sf??(Sf=YP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function qA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function WP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return qA({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function HA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function XP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $p(n,e,t){return GA(),new File(n,e??"unknown_file",t)}function jP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const e2=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",t2=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&BA(n),n2=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function i2(n,e,t){if(GA(),n=await n,t2(n))return n instanceof File?n:$p([await n.arrayBuffer()],n.name);if(n2(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),$p(await Im(o),e,t)}const i=await Im(n);if(e||(e=jP(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return $p(i,e,t)}async function Im(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(BA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(e2(n))try{for(var d=!0,m=Li(n),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const v=o;u.push(...await Im(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${s2(n)}`)}return u}function s2(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zA{constructor(e){this._client=e}}zA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dE=Object.freeze(Object.create(null)),r2=(n=KA)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((v,T,S)=>{var R,L,H;/[?#]/.test(T)&&(o=!0);const U=i[S];let W=(o?encodeURIComponent:n)(""+U);return S!==i.length&&(U==null||typeof U=="object"&&U.toString===((H=Object.getPrototypeOf((L=Object.getPrototypeOf((R=U.hasOwnProperty)!==null&&R!==void 0?R:dE))!==null&&L!==void 0?L:dE))===null||H===void 0?void 0:H.toString))&&(W=U+"",a.push({start:v.length+T.length,length:W.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),v+T+(S===i.length?"":W)},""),d=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((S,R)=>{const L=" ".repeat(R.start-v),H="^".repeat(R.length);return v=R.start+R.length,S+L+H},"");throw new Ai(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),Af=r2(KA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA extends zA{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Qf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Ai("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Ai("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Af`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Af`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Af`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Qf(a,["api_version"]);return this._client.get(Af`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}YA._key=Object.freeze(["interactions"]);class JA extends YA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o2(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let If;function ug(n){let e;return(If??(e=new globalThis.TextEncoder,If=e.encode.bind(e)))(n)}let Cf;function hE(n){let e;return(Cf??(e=new globalThis.TextDecoder,Cf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ug(e):e;this.buffer=o2([this.buffer,t]);const i=[];let o;for(;(o=a2(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(hE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=hE(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Cd.NEWLINE_CHARS=new Set([`
`,"\r"]);Cd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function a2(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function l2(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wf={off:0,error:200,warn:300,info:400,debug:500},pE=(n,e,t)=>{if(n){if(HP(Wf,n))return n;wn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Wf))}`)}};function Su(){}function wf(n,e,t){return!e||Wf[n]>Wf[t]?Su:e[n].bind(e)}const u2={error:Su,warn:Su,info:Su,debug:Su};let mE=new WeakMap;function wn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return u2;const o=mE.get(t);if(o&&o[0]===i)return o[1];const a={error:wf("error",t,i),warn:wf("warn",t,i),info:wf("info",t,i),debug:wf("debug",t,i)};return mE.set(t,[i,a]),a}const Do=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?wn(i):console;function u(){return ki(this,arguments,function*(){var m,h,v,T;if(o)throw new Ai("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var R=!0,L=Li(c2(e,t)),H;H=yield Me(L.next()),m=H.done,!m;R=!0){T=H.value,R=!1;const U=T;if(!S)if(U.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Me(JSON.parse(U.data))}catch(W){throw a.error("Could not parse message into JSON:",U.data),a.error("From chunk:",U.raw),W}}}catch(U){h={error:U}}finally{try{!R&&!m&&(v=L.return)&&(yield Me(v.call(L)))}finally{if(h)throw h.error}}S=!0}catch(U){if(Tm(U))return yield Me(void 0);throw U}finally{S||t.abort()}})}return new Qa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return ki(this,arguments,function*(){var m,h,v,T;const S=new Cd,R=HA(e);try{for(var L=!0,H=Li(R),U;U=yield Me(H.next()),m=U.done,!m;L=!0){T=U.value,L=!1;const W=T;for(const oe of S.decode(W))yield yield Me(oe)}}catch(W){h={error:W}}finally{try{!L&&!m&&(v=H.return)&&(yield Me(v.call(H)))}finally{if(h)throw h.error}}for(const W of S.flush())yield yield Me(W)})}function u(){return ki(this,arguments,function*(){var m,h,v,T;if(o)throw new Ai("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var R=!0,L=Li(a()),H;H=yield Me(L.next()),m=H.done,!m;R=!0){T=H.value,R=!1;const U=T;S||U&&(yield yield Me(JSON.parse(U)))}}catch(U){h={error:U}}finally{try{!R&&!m&&(v=L.return)&&(yield Me(v.call(L)))}finally{if(h)throw h.error}}S=!0}catch(U){if(Tm(U))return yield Me(void 0);throw U}finally{S||t.abort()}})}return new Qa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Qa(()=>o(e),this.controller,this.client),new Qa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return qA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=ug(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function c2(n,e){return ki(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ai("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ai("Attempted to iterate over a response with no body");const d=new d2,m=new Cd,h=HA(n.body);try{for(var v=!0,T=Li(f2(h)),S;S=yield Me(T.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const R=u;for(const L of m.decode(R)){const H=d.decode(L);H&&(yield yield Me(H))}}}catch(R){o={error:R}}finally{try{!v&&!i&&(a=T.return)&&(yield Me(a.call(T)))}finally{if(o)throw o.error}}for(const R of m.flush()){const L=d.decode(R);L&&(yield yield Me(L))}})}function f2(n){return ki(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,m=Li(n),h;h=yield Me(m.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?ug(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let R;for(;(R=l2(u))!==-1;)yield yield Me(u.slice(0,R)),u=u.slice(R)}}catch(v){i={error:v}}finally{try{!d&&!t&&(o=m.return)&&(yield Me(o.call(m)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Me(u))})}class d2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=h2(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function h2(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function p2(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return wn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Qa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),h=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return wn(n).debug(`[${i}] response parsed`,Do({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cg extends Promise{constructor(e,t,i=p2){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new cg(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $A=Symbol("brand.privateNullableHeaders");function*m2(n){if(!n)return;if($A in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():uE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=uE(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const Eu=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of m2(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[$A]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=Hb)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QA;class wd{constructor(e){var t,i,o,a,u,d,m,{baseURL:h=Qp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Qp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Qf(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(i=R.timeout)!==null&&i!==void 0?i:wd.DEFAULT_TIMEOUT,this.logger=(o=R.logger)!==null&&o!==void 0?o:console;const L="warn";this.logLevel=L,this.logLevel=(u=(a=pE(R.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:pE(Qp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:L,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=R.fetch)!==null&&m!==void 0?m:QP(),this.encoder=ZP,this._options=R,this.apiKey=v,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Eu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Eu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Eu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Ai(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ba}`}defaultIdempotencyKey(){return`stainless-node-retry-${kP()}`}makeStatusError(e,t,i,o){return bn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=UP(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return qP(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new cg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,m=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=m),await this.prepareOptions(d);const{req:h,url:v,timeout:T}=await this.buildRequest(d,{retryCount:m-t});await this.prepareRequest(h,{url:v,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=i===void 0?"":`, retryOf: ${i}`,L=Date.now();if(wn(this).debug(`[${S}] sending request`,Do({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Sm;const H=new AbortController,U=await this.fetchWithTimeout(v,h,T,H).catch(Em),W=Date.now();if(U instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Sm;const ae=Tm(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(t)return wn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - ${Z}`),wn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (${Z})`,Do({retryOfRequestLogID:i,url:v,durationMs:W-L,message:U.message})),this.retryRequest(d,t,i??S);throw wn(this).info(`[${S}] connection ${ae?"timed out":"failed"} - error; no more retries left`),wn(this).debug(`[${S}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,Do({retryOfRequestLogID:i,url:v,durationMs:W-L,message:U.message})),ae?new MA:new Id({cause:U})}const oe=`[${S}${R}] ${h.method} ${v} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${W-L}ms`;if(!U.ok){const Z=await this.shouldRetry(U);if(t&&Z){const N=`retrying, ${t} attempts remaining`;return await XP(U.body),wn(this).info(`${oe} - ${N}`),wn(this).debug(`[${S}] response error (${N})`,Do({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:W-L})),this.retryRequest(d,t,i??S,U.headers)}const ae=Z?"error; no more retries left":"error; not retryable";wn(this).info(`${oe} - ${ae}`);const pe=await U.text().catch(N=>Em(N).message),fe=BP(pe),M=fe?void 0:pe;throw wn(this).debug(`[${S}] response error (${ae})`,Do({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,message:M,durationMs:Date.now()-L})),this.makeStatusError(U.status,fe,M,U.headers)}return wn(this).info(oe),wn(this).debug(`[${S}] response start`,Do({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:W-L})),{response:U,options:d,controller:H,requestLogID:S,retryOfRequestLogID:i,startTime:L}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,m=Qf(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const m=o==null?void 0:o.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await zP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:m,query:h,defaultBaseURL:v}=u,T=this.buildURL(m,h,v);"timeout"in u&&GP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:u}),L=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:L},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Eu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),$P()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Eu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:WP(e)}:this.encoder({body:e,headers:i})}}wd.DEFAULT_TIMEOUT=6e4;class on extends wd{constructor(){super(...arguments),this.interactions=new JA(this)}}QA=on;on.GeminiNextGenAPIClient=QA;on.GeminiNextGenAPIClientError=Ai;on.APIError=bn;on.APIConnectionError=Id;on.APIConnectionTimeoutError=MA;on.APIUserAbortError=Sm;on.NotFoundError=kA;on.ConflictError=LA;on.RateLimitError=OA;on.BadRequestError=DA;on.AuthenticationError=PA;on.InternalServerError=FA;on.PermissionDeniedError=VA;on.UnprocessableEntityError=UA;on.toFile=i2;on.Interactions=JA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function y2(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function _2(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function v2(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function T2(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function E2(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&p(e,["supervisedTuningSpec"],gE(R))}else if(o==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&p(e,["preferenceOptimizationSpec"],gE(R))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(m==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(h==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function S2(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&P2(a);const u=f(n,["config"]);return u!=null&&T2(u,t),t}function A2(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&V2(a,t,e);const u=f(n,["config"]);return u!=null&&E2(u,t,e),t}function I2(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function C2(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function w2(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function R2(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function b2(n,e){const t={},i=f(n,["config"]);return i!=null&&w2(i,t),t}function N2(n,e){const t={},i=f(n,["config"]);return i!=null&&R2(i,t),t}function x2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>WA(d))),p(t,["tuningJobs"],u)}return t}function M2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Cm(d))),p(t,["tuningJobs"],u)}return t}function D2(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["model"],i);const o=f(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function P2(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function V2(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function WA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],dA(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["description"]);v!=null&&p(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],D2(S)),t}function Cm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],dA(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=f(n,["error"]);v!=null&&p(t,["error"],v);const T=f(n,["description"]);T!=null&&p(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&p(t,["tunedModel"],R);const L=f(n,["preTunedModel"]);L!=null&&p(t,["preTunedModel"],L);const H=f(n,["supervisedTuningSpec"]);H!=null&&p(t,["supervisedTuningSpec"],H);const U=f(n,["preferenceOptimizationSpec"]);U!=null&&p(t,["preferenceOptimizationSpec"],U);const W=f(n,["tuningDataStats"]);W!=null&&p(t,["tuningDataStats"],W);const oe=f(n,["encryptionSpec"]);oe!=null&&p(t,["encryptionSpec"],oe);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&p(t,["partnerModelTuningSpec"],Z);const ae=f(n,["customBaseModel"]);ae!=null&&p(t,["customBaseModel"],ae);const pe=f(n,["experiment"]);pe!=null&&p(t,["experiment"],pe);const fe=f(n,["labels"]);fe!=null&&p(t,["labels"],fe);const M=f(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const x=f(n,["pipelineJob"]);x!=null&&p(t,["pipelineJob"],x);const N=f(n,["serviceAccount"]);N!=null&&p(t,["serviceAccount"],N);const P=f(n,["tunedModelDisplayName"]);P!=null&&p(t,["tunedModelDisplayName"],P);const k=f(n,["veoTuningSpec"]);return k!=null&&p(t,["veoTuningSpec"],k),t}function k2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function gE(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L2 extends $s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Bo(Bs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:hm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=C2(e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Cm(v))}else{const h=I2(e);return d=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>WA(v))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=N2(e);return d=he("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=M2(v),S=new GT;return Object.assign(S,T),S})}else{const h=b2(e);return d=he("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=x2(v),S=new GT;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=y2(e);return d=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=v2(v),S=new BT;return Object.assign(S,T),S})}else{const h=g2(e);return d=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_2(v),S=new BT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=A2(e,e);return a=he("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>Cm(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S2(e);return a=he("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>k2(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const O2=1024*1024*8,F2=3,q2=1e3,H2=2,Xf="x-goog-upload-status";async function G2(n,e,t){var i;const o=await XA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function B2(n,e,t){var i;const o=await XA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=oA(a),d=new ig;return Object.assign(d,u),d}async function XA(n,e,t){var i,o;let a=0,u=0,d=new pm(new Response),m="upload";for(a=n.size;u<a;){const h=Math.min(O2,a-u),v=n.slice(u,u+h);u+h>=a&&(m+=", finalize");let T=0,S=q2;for(;T<F2&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Xf]));)T++,await K2(S),S=S*H2;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Xf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function z2(n){return{size:n.size,type:n.type}}function K2(n){return new Promise(e=>setTimeout(e,n))}class Y2{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await G2(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B2(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await z2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J2{create(e,t,i){return new $2(e,t,i)}}class $2{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yE="x-goog-api-key";class Q2{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W2="gl-node/";class fg{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new on({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Kb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new Q2(this.apiKey);this.apiClient=new zD({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:W2+"web",uploader:new Y2,downloader:new U2}),this.models=new uP(this.apiClient),this.live=new iP(this.apiClient,o,new J2),this.batches=new Tx(this.apiClient),this.chats=new t1(this.models,this.apiClient),this.caches=new Zx(this.apiClient),this.files=new f1(this.apiClient),this.operations=new cP(this.apiClient),this.authTokens=new wP(this.apiClient),this.tunings=new L2(this.apiClient),this.fileSearchStores=new VP(this.apiClient)}}const X2=async(n,e,t="Traditional Chinese")=>{const i=new fg({apiKey:e}),o=`
    Analyze the provided menu images. 
    1. Identify the restaurant name and its approximate address if possible.
    2. Detect the dominant language of the menu text (ISO 639-1 code like 'ja', 'ko', 'fr', 'en') as detected_language.
    3. Extract all menu items. 
    4. For each item:
       - name_original: Original text from menu.
       - name_translated: Translated into ${t}.
       - description: One very concise sentence summary (max 10 words) in ${t}.
       - price_original: Numeric value of the price.
       - currency_original: Currency symbol or code (e.g., JPY, TWD).
       - category: Category like "Mains", "Drinks", "Appetizers".
    
    Translate accurately to ${t}.
  `,a=n.map(d=>({inlineData:{mimeType:"image/jpeg",data:d.split(",")[1]}})),u=await i.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:o},...a]},config:{responseMimeType:"application/json",responseSchema:{type:wt.OBJECT,properties:{restaurant_name:{type:wt.STRING},restaurant_address:{type:wt.STRING},detected_language:{type:wt.STRING},items:{type:wt.ARRAY,items:{type:wt.OBJECT,properties:{name_original:{type:wt.STRING},name_translated:{type:wt.STRING},description:{type:wt.STRING},price_original:{type:wt.NUMBER},currency_original:{type:wt.STRING},category:{type:wt.STRING}},required:["name_original","name_translated","price_original","currency_original","category"]}}},required:["restaurant_name","items","detected_language"]}}});return JSON.parse(u.text)},Z2=async(n,e,t="Traditional Chinese")=>{const i=new fg({apiKey:e}),o=`
    Analyze the provided images containing text.
    1. Transcribe all the visible text from the images into a single string (original_text). Preserve layout/line breaks if it helps readability.
    2. Detect the language of the original text (ISO code) as detected_language.
    3. Translate the transcribed text into ${t} (translated_text).
  `,a=n.map(d=>({inlineData:{mimeType:"image/jpeg",data:d.split(",")[1]}})),u=await i.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:o},...a]},config:{responseMimeType:"application/json",responseSchema:{type:wt.OBJECT,properties:{original_text:{type:wt.STRING},translated_text:{type:wt.STRING},detected_language:{type:wt.STRING}},required:["original_text","translated_text","detected_language"]}}});return JSON.parse(u.text)},j2=async n=>{const e={JPY:.052,TWD:.24,KRW:.0058,USD:7.8,CNY:1.08,EUR:8.5},t=n.toUpperCase().replace(/[^A-Z]/g,"");return e[t]||.05},eV=async(n,e,t)=>{var a;const i=new fg({apiKey:t}),o=`What is the precise street address for the location at Latitude ${n}, Longitude ${e}? 
  Please prioritize returning the address in Traditional Chinese () or Kanji () if the location is in Greater China or Japan. 
  Otherwise, use English. 
  Return ONLY the address text without any introductory phrases.`;try{return((a=(await i.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{tools:[{googleMaps:{}}]}})).text)==null?void 0:a.trim())||`${n.toFixed(5)}, ${e.toFixed(5)}`}catch(u){return console.error("Reverse geocoding error:",u),`${n.toFixed(5)}, ${e.toFixed(5)}`}},tV=()=>{};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},nV=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},jA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,R=h&63;m||(R=64,u||(S=64)),i.push(t[v],t[T],t[S],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||T==null)throw new iV;const S=a<<2|d>>4;if(i.push(S),h!==64){const R=d<<4&240|h>>2;if(i.push(R),T!==64){const L=h<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sV=function(n){const e=ZA(n);return jA.encodeByteArray(e,!0)},Zf=function(n){return sV(n).replace(/\./g,"")},eI=function(n){try{return jA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=()=>rV().__FIREBASE_DEFAULTS__,aV=()=>{if(typeof process>"u"||typeof _E>"u")return;const n=_E.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eI(n[1]);return e&&JSON.parse(e)},Rd=()=>{try{return tV()||oV()||aV()||lV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tI=n=>{var e,t;return(t=(e=Rd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},uV=n=>{const e=tI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},nI=()=>{var n;return(n=Rd())==null?void 0:n.config},iI=n=>{var e;return(e=Rd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Zf(JSON.stringify(t)),Zf(JSON.stringify(u)),""].join(".")}const Nu={};function dV(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?n.emulator.push(e):n.prod.push(e);return n}function hV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let vE=!1;function rI(n,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Nu[n]===e||Nu[n]||vE)return;Nu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=dV().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{vE=!0,u()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=hV(i),R=t("text"),L=document.getElementById(R)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),W=t("preprendIcon"),oe=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;d(Z),v(U,H);const ae=h();m(oe,W),Z.append(oe,L,U,ae),document.body.appendChild(Z)}a?(L.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function mV(){var e;const n=(e=Rd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _V(){const n=Tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vV(){return!mV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aI(){try{return typeof indexedDB=="object"}catch{return!1}}function lI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function TV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="FirebaseError";class Gi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=EV,Object.setPrototypeOf(this,Gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?SV(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Gi(o,d,i)}}function SV(n,e){return n.replace(AV,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const AV=/\{\$([^}]+)}/g;function IV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(TE(a)&&TE(u)){if(!Gr(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function TE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Au(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Iu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function CV(n,e){const t=new wV(n,e);return t.subscribe.bind(t)}class wV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");RV(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Wp),o.error===void 0&&(o.error=Wp),o.complete===void 0&&(o.complete=Wp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=1e3,NV=2,xV=14400*1e3,MV=.5;function EE(n,e=bV,t=NV){const i=e*Math.pow(t,n),o=Math.round(MV*i*(Math.random()-.5)*2);return Math.min(xV,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class Ui{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cV;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VV(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PV(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PV(n){return n===Po?void 0:n}function VV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const LV={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},UV=$e.INFO,OV={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},FV=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=OV[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bd{constructor(e){this.name=e,this._logLevel=UV,this._logHandler=FV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const qV=(n,e)=>e.some(t=>n instanceof t);let SE,AE;function HV(){return SE||(SE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GV(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,wm=new WeakMap,cI=new WeakMap,Xp=new WeakMap,dg=new WeakMap;function BV(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Or(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uI.set(t,n)}).catch(()=>{}),dg.set(e,n),e}function zV(n){if(wm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});wm.set(n,e)}let Rm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Or(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KV(n){Rm=n(Rm)}function YV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Zp(this),e,...t);return cI.set(i,e.sort?e.sort():[e]),Or(i)}:GV().includes(n)?function(...e){return n.apply(Zp(this),e),Or(uI.get(this))}:function(...e){return Or(n.apply(Zp(this),e))}}function JV(n){return typeof n=="function"?YV(n):(n instanceof IDBTransaction&&zV(n),qV(n,HV())?new Proxy(n,Rm):n)}function Or(n){if(n instanceof IDBRequest)return BV(n);if(Xp.has(n))return Xp.get(n);const e=JV(n);return e!==n&&(Xp.set(n,e),dg.set(e,n)),e}const Zp=n=>dg.get(n);function fI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Or(u);return i&&u.addEventListener("upgradeneeded",m=>{i(Or(u.result),m.oldVersion,m.newVersion,Or(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const $V=["get","getKey","getAll","getAllKeys","count"],QV=["put","add","delete","clear"],jp=new Map;function IE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=QV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||$V.includes(t)))return;const a=async function(u,...d){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&m.done]))[0]};return jp.set(e,a),a}KV(n=>({...n,get:(e,t,i)=>IE(e,t)||n.get(e,t,i),has:(e,t)=>!!IE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function XV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bm="@firebase/app",CE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new bd("@firebase/app"),ZV="@firebase/app-compat",jV="@firebase/analytics-compat",ek="@firebase/analytics",tk="@firebase/app-check-compat",nk="@firebase/app-check",ik="@firebase/auth",sk="@firebase/auth-compat",rk="@firebase/database",ok="@firebase/data-connect",ak="@firebase/database-compat",lk="@firebase/functions",uk="@firebase/functions-compat",ck="@firebase/installations",fk="@firebase/installations-compat",dk="@firebase/messaging",hk="@firebase/messaging-compat",pk="@firebase/performance",mk="@firebase/performance-compat",gk="@firebase/remote-config",yk="@firebase/remote-config-compat",_k="@firebase/storage",vk="@firebase/storage-compat",Tk="@firebase/firestore",Ek="@firebase/ai",Sk="@firebase/firestore-compat",Ak="firebase",Ik="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="[DEFAULT]",Ck={[bm]:"fire-core",[ZV]:"fire-core-compat",[ek]:"fire-analytics",[jV]:"fire-analytics-compat",[nk]:"fire-app-check",[tk]:"fire-app-check-compat",[ik]:"fire-auth",[sk]:"fire-auth-compat",[rk]:"fire-rtdb",[ok]:"fire-data-connect",[ak]:"fire-rtdb-compat",[lk]:"fire-fn",[uk]:"fire-fn-compat",[ck]:"fire-iid",[fk]:"fire-iid-compat",[dk]:"fire-fcm",[hk]:"fire-fcm-compat",[pk]:"fire-perf",[mk]:"fire-perf-compat",[gk]:"fire-rc",[yk]:"fire-rc-compat",[_k]:"fire-gcs",[vk]:"fire-gcs-compat",[Tk]:"fire-fst",[Sk]:"fire-fst-compat",[Ek]:"fire-vertex","fire-js":"fire-js",[Ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,wk=new Map,xm=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ps(n){const e=n.name;if(xm.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;xm.set(e,n);for(const t of jf.values())wE(t,n);for(const t of wk.values())wE(t,n);return!0}function Ko(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new zo("app","Firebase",Rk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=Ik;function dI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Nm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Fr.create("bad-app-name",{appName:String(o)});if(t||(t=nI()),!t)throw Fr.create("no-options");const a=jf.get(o);if(a){if(Gr(t,a.options)&&Gr(i,a.config))return a;throw Fr.create("duplicate-app",{appName:o})}const u=new kV(o);for(const m of xm.values())u.addComponent(m);const d=new bk(t,i,u);return jf.set(o,d),d}function hg(n=Nm){const e=jf.get(n);if(!e&&n===Nm&&nI())return dI();if(!e)throw Fr.create("no-app",{appName:n});return e}function Si(n,e,t){let i=Ck[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(u.join(" "));return}ps(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="firebase-heartbeat-database",xk=1,ku="firebase-heartbeat-store";let em=null;function hI(){return em||(em=fI(Nk,xk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fr.create("idb-open",{originalErrorMessage:n.message})})),em}async function Mk(n){try{const t=(await hI()).transaction(ku),i=await t.objectStore(ku).get(pI(n));return await t.done,i}catch(e){if(e instanceof Gi)zs.warn(e.message);else{const t=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zs.warn(t.message)}}}async function RE(n,e){try{const i=(await hI()).transaction(ku,"readwrite");await i.objectStore(ku).put(e,pI(n)),await i.done}catch(t){if(t instanceof Gi)zs.warn(t.message);else{const i=Fr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zs.warn(i.message)}}}function pI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1024,Pk=30;class Vk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Lk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=bE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>Pk){const u=Uk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){zs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bE(),{heartbeatsToSend:i,unsentEntries:o}=kk(this._heartbeatsCache.heartbeats),a=Zf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zs.warn(t),""}}}function bE(){return new Date().toISOString().substring(0,10)}function kk(n,e=Dk){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),NE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),NE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Lk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aI()?lI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Mk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return RE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return RE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function NE(n){return Zf(JSON.stringify({version:2,heartbeats:n})).length}function Uk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){ps(new Ui("platform-logger",e=>new WV(e),"PRIVATE")),ps(new Ui("heartbeat",e=>new Vk(e),"PRIVATE")),Si(bm,CE,n),Si(bm,CE,"esm2020"),Si("fire-js","")}Ok("");var Fk="firebase",qk="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(Fk,qk,"app");const mI="@firebase/installations",pg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1e4,yI=`w:${pg}`,_I="FIS_v2",Hk="https://firebaseinstallations.googleapis.com/v1",Gk=3600*1e3,Bk="installations",zk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uo=new zo(Bk,zk,Kk);function vI(n){return n instanceof Gi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI({projectId:n}){return`${Hk}/projects/${n}/installations`}function EI(n){return{token:n.token,requestStatus:2,expiresIn:Jk(n.expiresIn),creationTime:Date.now()}}async function SI(n,e){const i=(await e.json()).error;return Uo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function AI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Yk(n,{refreshToken:e}){const t=AI(n);return t.append("Authorization",$k(e)),t}async function II(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Jk(n){return Number(n.replace("s","000"))}function $k(n){return`${_I} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=TI(n),o=AI(n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={fid:t,authVersion:_I,appId:n.appId,sdkVersion:yI},d={method:"POST",headers:o,body:JSON.stringify(u)},m=await II(()=>fetch(i,d));if(m.ok){const h=await m.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:EI(h.authToken)}}else throw await SI("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=/^[cdef][\w-]{21}$/,Mm="";function Zk(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=jk(n);return Xk.test(t)?t:Mm}catch{return Mm}}function jk(n){return Wk(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;function RI(n,e){const t=Nd(n);bI(t,e),eL(t,e)}function bI(n,e){const t=wI.get(n);if(t)for(const i of t)i(e)}function eL(n,e){const t=tL();t&&t.postMessage({key:n,fid:e}),nL()}let Vo=null;function tL(){return!Vo&&"BroadcastChannel"in self&&(Vo=new BroadcastChannel("[Firebase] FID Change"),Vo.onmessage=n=>{bI(n.data.key,n.data.fid)}),Vo}function nL(){wI.size===0&&Vo&&(Vo.close(),Vo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="firebase-installations-database",sL=1,Oo="firebase-installations-store";let tm=null;function mg(){return tm||(tm=fI(iL,sL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Oo)}}})),tm}async function ed(n,e){const t=Nd(n),o=(await mg()).transaction(Oo,"readwrite"),a=o.objectStore(Oo),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&RI(n,e.fid),e}async function NI(n){const e=Nd(n),i=(await mg()).transaction(Oo,"readwrite");await i.objectStore(Oo).delete(e),await i.done}async function xd(n,e){const t=Nd(n),o=(await mg()).transaction(Oo,"readwrite"),a=o.objectStore(Oo),u=await a.get(t),d=e(u);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!u||u.fid!==d.fid)&&RI(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(n){let e;const t=await xd(n.appConfig,i=>{const o=rL(i),a=oL(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Mm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function rL(n){const e=n||{fid:Zk(),registrationStatus:0};return xI(e)}function oL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Uo.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=aL(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lL(n)}:{installationEntry:e}}async function aL(n,e){try{const t=await Qk(n,e);return ed(n.appConfig,t)}catch(t){throw vI(t)&&t.customData.serverCode===409?await NI(n.appConfig):await ed(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function lL(n){let e=await xE(n.appConfig);for(;e.registrationStatus===1;)await CI(100),e=await xE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await gg(n);return i||t}return e}function xE(n){return xd(n,e=>{if(!e)throw Uo.create("installation-not-found");return xI(e)})}function xI(n){return uL(n)?{fid:n.fid,registrationStatus:0}:n}function uL(n){return n.registrationStatus===1&&n.registrationTime+gI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL({appConfig:n,heartbeatServiceProvider:e},t){const i=fL(n,t),o=Yk(n,t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={installation:{sdkVersion:yI,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(u)},m=await II(()=>fetch(i,d));if(m.ok){const h=await m.json();return EI(h)}else throw await SI("Generate Auth Token",m)}function fL(n,{fid:e}){return`${TI(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(n,e=!1){let t;const i=await xd(n.appConfig,a=>{if(!MI(a))throw Uo.create("not-registered");const u=a.authToken;if(!e&&pL(u))return a;if(u.requestStatus===1)return t=dL(n,e),a;{if(!navigator.onLine)throw Uo.create("app-offline");const d=gL(a);return t=hL(n,d),d}});return t?await t:i.authToken}async function dL(n,e){let t=await ME(n.appConfig);for(;t.authToken.requestStatus===1;)await CI(100),t=await ME(n.appConfig);const i=t.authToken;return i.requestStatus===0?yg(n,e):i}function ME(n){return xd(n,e=>{if(!MI(e))throw Uo.create("not-registered");const t=e.authToken;return yL(t)?{...e,authToken:{requestStatus:0}}:e})}async function hL(n,e){try{const t=await cL(n,e),i={...e,authToken:t};return await ed(n.appConfig,i),t}catch(t){if(vI(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await NI(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await ed(n.appConfig,i)}throw t}}function MI(n){return n!==void 0&&n.registrationStatus===2}function pL(n){return n.requestStatus===2&&!mL(n)}function mL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Gk}function gL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function yL(n){return n.requestStatus===1&&n.requestTime+gI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(n){const e=n,{installationEntry:t,registrationPromise:i}=await gg(e);return i?i.catch(console.error):yg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(n,e=!1){const t=n;return await TL(t),(await yg(t,e)).token}async function TL(n){const{registrationPromise:e}=await gg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(n){if(!n||!n.options)throw nm("App Configuration");if(!n.name)throw nm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw nm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function nm(n){return Uo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="installations",SL="installations-internal",AL=n=>{const e=n.getProvider("app").getImmediate(),t=EL(e),i=Ko(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},IL=n=>{const e=n.getProvider("app").getImmediate(),t=Ko(e,DI).getImmediate();return{getId:()=>_L(t),getToken:o=>vL(t,o)}};function CL(){ps(new Ui(DI,AL,"PUBLIC")),ps(new Ui(SL,IL,"PRIVATE"))}CL();Si(mI,pg);Si(mI,pg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="analytics",wL="firebase_id",RL="origin",bL=60*1e3,NL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_g="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new bd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xn=new zo("analytics","Analytics",xL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(n){if(!n.startsWith(_g)){const e=Xn.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function PI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function DL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function PL(n,e){const t=DL("firebase-js-sdk-policy",{createScriptURL:ML}),i=document.createElement("script"),o=`${_g}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function VL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function kL(n,e,t,i,o,a){const u=i[o];try{if(u)await e[u];else{const m=(await PI(t)).find(h=>h.measurementId===o);m&&await e[m.appId]}}catch(d){Rn.error(d)}n("config",o,a)}async function LL(n,e,t,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const d=await PI(t);for(const m of u){const h=d.find(T=>T.measurementId===m),v=h&&e[h.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,o||{})}catch(a){Rn.error(a)}}function UL(n,e,t,i){async function o(a,...u){try{if(a==="event"){const[d,m]=u;await LL(n,e,t,d,m)}else if(a==="config"){const[d,m]=u;await kL(n,e,t,i,d,m)}else if(a==="consent"){const[d,m]=u;n("consent",d,m)}else if(a==="get"){const[d,m,h]=u;n("get",d,m,h)}else if(a==="set"){const[d]=u;n("set",d)}else n(a,...u)}catch(d){Rn.error(d)}}return o}function OL(n,e,t,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=UL(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function FL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_g)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=30,HL=1e3;class GL{constructor(e={},t=HL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const VI=new GL;function BL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function zL(n){var u;const{appId:e,apiKey:t}=n,i={method:"GET",headers:BL(t)},o=NL.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let d="";try{const m=await a.json();(u=m.error)!=null&&u.message&&(d=m.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function KL(n,e=VI,t){const{appId:i,apiKey:o,measurementId:a}=n.options;if(!i)throw Xn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw Xn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new $L;return setTimeout(async()=>{d.abort()},bL),kI({appId:i,apiKey:o,measurementId:a},u,d,e)}async function kI(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=VI){var d;const{appId:a,measurementId:u}=n;try{await YL(i,e)}catch(m){if(u)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:a,measurementId:u};throw m}try{const m=await zL(n);return o.deleteThrottleMetadata(a),m}catch(m){const h=m;if(!JL(h)){if(o.deleteThrottleMetadata(a),u)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw m}const v=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?EE(t,o.intervalMillis,qL):EE(t,o.intervalMillis),T={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(a,T),Rn.debug(`Calling attemptFetch again in ${v} millis`),kI(n,T,i,o)}}function YL(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),i(Xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function JL(n){if(!(n instanceof Gi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class $L{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QL(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const a=await e,u={...i,send_to:a};n("event",t,u)}}async function WL(n,e,t,i){if(i&&i.global){const o={};for(const a of Object.keys(t))o[`user_properties.${a}`]=t[a];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(){if(aI())try{await lI()}catch(n){return Rn.warn(Xn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Rn.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZL(n,e,t,i,o,a,u){const d=KL(n);d.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Rn.error(S)),e.push(d);const m=XL().then(S=>{if(S)return i.getId()}),[h,v]=await Promise.all([d,m]);FL(a)||PL(a,h.measurementId),o("js",new Date);const T=(u==null?void 0:u.config)??{};return T[RL]="firebase",T.update=!0,v!=null&&(T[wL]=v),o("config",h.measurementId,T),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.app=e}_delete(){return delete ja[this.app.options.appId],Promise.resolve()}}let ja={},DE=[];const PE={};let im="dataLayer",eU="gtag",VE,vg,kE=!1;function tU(){const n=[];if(oI()&&n.push("This is a browser extension environment."),TV()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Xn.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}function nU(n,e,t){tU();const i=n.options.appId;if(!i)throw Xn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xn.create("no-api-key");if(ja[i]!=null)throw Xn.create("already-exists",{id:i});if(!kE){VL(im);const{wrappedGtag:a,gtagCore:u}=OL(ja,DE,PE,im,eU);vg=a,VE=u,kE=!0}return ja[i]=ZL(n,DE,PE,e,VE,im,t),new jL(n)}function iU(n=hg()){n=rn(n);const e=Ko(n,td);return e.isInitialized()?e.getImmediate():sU(n)}function sU(n,e={}){const t=Ko(n,td);if(t.isInitialized()){const o=t.getImmediate();if(Gr(e,t.getOptions()))return o;throw Xn.create("already-initialized")}return t.initialize({options:e})}function rU(n,e,t){n=rn(n),WL(vg,ja[n.app.options.appId],e,t).catch(i=>Rn.error(i))}function oU(n,e,t,i){n=rn(n),QL(vg,ja[n.app.options.appId],e,t,i).catch(o=>Rn.error(o))}const LE="@firebase/analytics",UE="0.10.19";function aU(){ps(new Ui(td,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return nU(i,o,t)},"PUBLIC")),ps(new Ui("analytics-internal",n,"PRIVATE")),Si(LE,UE),Si(LE,UE,"esm2020");function n(e){try{const t=e.getProvider(td).getImmediate();return{logEvent:(i,o,a)=>oU(t,i,o,a),setUserProperties:(i,o)=>rU(t,i,o)}}catch(t){throw Xn.create("interop-component-reg-failed",{reason:t})}}}aU();var OE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,LI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function N(){}N.prototype=x.prototype,M.F=x.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(P,k,q){for(var D=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)D[qe-2]=arguments[qe];return x.prototype[k].apply(P,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,x,N){N||(N=0);const P=Array(16);if(typeof x=="string")for(var k=0;k<16;++k)P[k]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(k=0;k<16;++k)P[k]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=M.g[0],N=M.g[1],k=M.g[2];let q=M.g[3],D;D=x+(q^N&(k^q))+P[0]+3614090360&4294967295,x=N+(D<<7&4294967295|D>>>25),D=q+(k^x&(N^k))+P[1]+3905402710&4294967295,q=x+(D<<12&4294967295|D>>>20),D=k+(N^q&(x^N))+P[2]+606105819&4294967295,k=q+(D<<17&4294967295|D>>>15),D=N+(x^k&(q^x))+P[3]+3250441966&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(q^N&(k^q))+P[4]+4118548399&4294967295,x=N+(D<<7&4294967295|D>>>25),D=q+(k^x&(N^k))+P[5]+1200080426&4294967295,q=x+(D<<12&4294967295|D>>>20),D=k+(N^q&(x^N))+P[6]+2821735955&4294967295,k=q+(D<<17&4294967295|D>>>15),D=N+(x^k&(q^x))+P[7]+4249261313&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(q^N&(k^q))+P[8]+1770035416&4294967295,x=N+(D<<7&4294967295|D>>>25),D=q+(k^x&(N^k))+P[9]+2336552879&4294967295,q=x+(D<<12&4294967295|D>>>20),D=k+(N^q&(x^N))+P[10]+4294925233&4294967295,k=q+(D<<17&4294967295|D>>>15),D=N+(x^k&(q^x))+P[11]+2304563134&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(q^N&(k^q))+P[12]+1804603682&4294967295,x=N+(D<<7&4294967295|D>>>25),D=q+(k^x&(N^k))+P[13]+4254626195&4294967295,q=x+(D<<12&4294967295|D>>>20),D=k+(N^q&(x^N))+P[14]+2792965006&4294967295,k=q+(D<<17&4294967295|D>>>15),D=N+(x^k&(q^x))+P[15]+1236535329&4294967295,N=k+(D<<22&4294967295|D>>>10),D=x+(k^q&(N^k))+P[1]+4129170786&4294967295,x=N+(D<<5&4294967295|D>>>27),D=q+(N^k&(x^N))+P[6]+3225465664&4294967295,q=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(q^x))+P[11]+643717713&4294967295,k=q+(D<<14&4294967295|D>>>18),D=N+(q^x&(k^q))+P[0]+3921069994&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^q&(N^k))+P[5]+3593408605&4294967295,x=N+(D<<5&4294967295|D>>>27),D=q+(N^k&(x^N))+P[10]+38016083&4294967295,q=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(q^x))+P[15]+3634488961&4294967295,k=q+(D<<14&4294967295|D>>>18),D=N+(q^x&(k^q))+P[4]+3889429448&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^q&(N^k))+P[9]+568446438&4294967295,x=N+(D<<5&4294967295|D>>>27),D=q+(N^k&(x^N))+P[14]+3275163606&4294967295,q=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(q^x))+P[3]+4107603335&4294967295,k=q+(D<<14&4294967295|D>>>18),D=N+(q^x&(k^q))+P[8]+1163531501&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(k^q&(N^k))+P[13]+2850285829&4294967295,x=N+(D<<5&4294967295|D>>>27),D=q+(N^k&(x^N))+P[2]+4243563512&4294967295,q=x+(D<<9&4294967295|D>>>23),D=k+(x^N&(q^x))+P[7]+1735328473&4294967295,k=q+(D<<14&4294967295|D>>>18),D=N+(q^x&(k^q))+P[12]+2368359562&4294967295,N=k+(D<<20&4294967295|D>>>12),D=x+(N^k^q)+P[5]+4294588738&4294967295,x=N+(D<<4&4294967295|D>>>28),D=q+(x^N^k)+P[8]+2272392833&4294967295,q=x+(D<<11&4294967295|D>>>21),D=k+(q^x^N)+P[11]+1839030562&4294967295,k=q+(D<<16&4294967295|D>>>16),D=N+(k^q^x)+P[14]+4259657740&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^q)+P[1]+2763975236&4294967295,x=N+(D<<4&4294967295|D>>>28),D=q+(x^N^k)+P[4]+1272893353&4294967295,q=x+(D<<11&4294967295|D>>>21),D=k+(q^x^N)+P[7]+4139469664&4294967295,k=q+(D<<16&4294967295|D>>>16),D=N+(k^q^x)+P[10]+3200236656&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^q)+P[13]+681279174&4294967295,x=N+(D<<4&4294967295|D>>>28),D=q+(x^N^k)+P[0]+3936430074&4294967295,q=x+(D<<11&4294967295|D>>>21),D=k+(q^x^N)+P[3]+3572445317&4294967295,k=q+(D<<16&4294967295|D>>>16),D=N+(k^q^x)+P[6]+76029189&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(N^k^q)+P[9]+3654602809&4294967295,x=N+(D<<4&4294967295|D>>>28),D=q+(x^N^k)+P[12]+3873151461&4294967295,q=x+(D<<11&4294967295|D>>>21),D=k+(q^x^N)+P[15]+530742520&4294967295,k=q+(D<<16&4294967295|D>>>16),D=N+(k^q^x)+P[2]+3299628645&4294967295,N=k+(D<<23&4294967295|D>>>9),D=x+(k^(N|~q))+P[0]+4096336452&4294967295,x=N+(D<<6&4294967295|D>>>26),D=q+(N^(x|~k))+P[7]+1126891415&4294967295,q=x+(D<<10&4294967295|D>>>22),D=k+(x^(q|~N))+P[14]+2878612391&4294967295,k=q+(D<<15&4294967295|D>>>17),D=N+(q^(k|~x))+P[5]+4237533241&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~q))+P[12]+1700485571&4294967295,x=N+(D<<6&4294967295|D>>>26),D=q+(N^(x|~k))+P[3]+2399980690&4294967295,q=x+(D<<10&4294967295|D>>>22),D=k+(x^(q|~N))+P[10]+4293915773&4294967295,k=q+(D<<15&4294967295|D>>>17),D=N+(q^(k|~x))+P[1]+2240044497&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~q))+P[8]+1873313359&4294967295,x=N+(D<<6&4294967295|D>>>26),D=q+(N^(x|~k))+P[15]+4264355552&4294967295,q=x+(D<<10&4294967295|D>>>22),D=k+(x^(q|~N))+P[6]+2734768916&4294967295,k=q+(D<<15&4294967295|D>>>17),D=N+(q^(k|~x))+P[13]+1309151649&4294967295,N=k+(D<<21&4294967295|D>>>11),D=x+(k^(N|~q))+P[4]+4149444226&4294967295,x=N+(D<<6&4294967295|D>>>26),D=q+(N^(x|~k))+P[11]+3174756917&4294967295,q=x+(D<<10&4294967295|D>>>22),D=k+(x^(q|~N))+P[2]+718787259&4294967295,k=q+(D<<15&4294967295|D>>>17),D=N+(q^(k|~x))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+q&4294967295}i.prototype.v=function(M,x){x===void 0&&(x=M.length);const N=x-this.blockSize,P=this.C;let k=this.h,q=0;for(;q<x;){if(k==0)for(;q<=N;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<x;)if(P[k++]=M.charCodeAt(q++),k==this.blockSize){o(this,P),k=0;break}}else for(;q<x;)if(P[k++]=M[q++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=x},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;x=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=x&255,x/=256;for(this.v(M),M=Array(16),x=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)M[x++]=this.g[N]>>>P&255;return M};function a(M,x){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=x(M)}function u(M,x){this.h=x;const N=[];let P=!0;for(let k=M.length-1;k>=0;k--){const q=M[k]|0;P&&q==x||(N[k]=q,P=!1)}this.g=N}var d={};function m(M){return-128<=M&&M<128?a(M,function(x){return new u([x|0],x<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return U(h(-M));const x=[];let N=1;for(let P=0;M>=N;P++)x[P]=M/N|0,N*=4294967296;return new u(x,0)}function v(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return U(v(M.substring(1),x));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(x,8));let P=T;for(let q=0;q<M.length;q+=8){var k=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+k),x);k<8?(k=h(Math.pow(x,k)),P=P.j(k).add(h(D))):(P=P.j(N),P=P.add(h(D)))}return P}var T=m(0),S=m(1),R=m(16777216);n=u.prototype,n.m=function(){if(H(this))return-U(this).m();let M=0,x=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);M+=(P>=0?P:4294967296+P)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(L(this))return"0";if(H(this))return"-"+U(this).toString(M);const x=h(Math.pow(M,6));var N=this;let P="";for(;;){const k=ae(N,x).g;N=W(N,k.j(x));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=k,L(N))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function L(M){if(M.h!=0)return!1;for(let x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function H(M){return M.h==-1}n.l=function(M){return M=W(this,M),H(M)?-1:L(M)?0:1};function U(M){const x=M.g.length,N=[];for(let P=0;P<x;P++)N[P]=~M.g[P];return new u(N,~M.h).add(S)}n.abs=function(){return H(this)?U(this):this},n.add=function(M){const x=Math.max(this.g.length,M.g.length),N=[];let P=0;for(let k=0;k<=x;k++){let q=P+(this.i(k)&65535)+(M.i(k)&65535),D=(q>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);P=D>>>16,q&=65535,D&=65535,N[k]=D<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function W(M,x){return M.add(U(x))}n.j=function(M){if(L(this)||L(M))return T;if(H(this))return H(M)?U(this).j(U(M)):U(U(this).j(M));if(H(M))return U(this.j(U(M)));if(this.l(R)<0&&M.l(R)<0)return h(this.m()*M.m());const x=this.g.length+M.g.length,N=[];for(var P=0;P<2*x;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<M.g.length;k++){const q=this.i(P)>>>16,D=this.i(P)&65535,qe=M.i(k)>>>16,gt=M.i(k)&65535;N[2*P+2*k]+=D*gt,oe(N,2*P+2*k),N[2*P+2*k+1]+=q*gt,oe(N,2*P+2*k+1),N[2*P+2*k+1]+=D*qe,oe(N,2*P+2*k+1),N[2*P+2*k+2]+=q*qe,oe(N,2*P+2*k+2)}for(M=0;M<x;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=x;M<2*x;M++)N[M]=0;return new u(N,0)};function oe(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function Z(M,x){this.g=M,this.h=x}function ae(M,x){if(L(x))throw Error("division by zero");if(L(M))return new Z(T,T);if(H(M))return x=ae(U(M),x),new Z(U(x.g),U(x.h));if(H(x))return x=ae(M,U(x)),new Z(U(x.g),x.h);if(M.g.length>30){if(H(M)||H(x))throw Error("slowDivide_ only works with positive integers.");for(var N=S,P=x;P.l(M)<=0;)N=pe(N),P=pe(P);var k=fe(N,1),q=fe(P,1);for(P=fe(P,2),N=fe(N,2);!L(P);){var D=q.add(P);D.l(M)<=0&&(k=k.add(N),q=D),P=fe(P,1),N=fe(N,1)}return x=W(M,k.j(x)),new Z(k,x)}for(k=T;M.l(x)>=0;){for(N=Math.max(1,Math.floor(M.m()/x.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=h(N),D=q.j(x);H(D)||D.l(M)>0;)N-=P,q=h(N),D=q.j(x);L(q)&&(q=S),k=k.add(q),M=W(M,D)}return new Z(k,M)}n.B=function(M){return ae(this,M).h},n.and=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<x;P++)N[P]=this.i(P)&M.i(P);return new u(N,this.h&M.h)},n.or=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<x;P++)N[P]=this.i(P)|M.i(P);return new u(N,this.h|M.h)},n.xor=function(M){const x=Math.max(this.g.length,M.g.length),N=[];for(let P=0;P<x;P++)N[P]=this.i(P)^M.i(P);return new u(N,this.h^M.h)};function pe(M){const x=M.g.length+1,N=[];for(let P=0;P<x;P++)N[P]=M.i(P)<<1|M.i(P-1)>>>31;return new u(N,M.h)}function fe(M,x){const N=x>>5;x%=32;const P=M.g.length-N,k=[];for(let q=0;q<P;q++)k[q]=x>0?M.i(q+N)>>>x|M.i(q+N+1)<<32-x:M.i(q+N);return new u(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,LI=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,qr=u}).apply(typeof OE<"u"?OE:typeof self<"u"?self:typeof window<"u"?window:{});var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UI,Cu,OI,Lf,Dm,FI,qI,HI;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rf=="object"&&Rf];for(var E=0;E<g.length;++E){var I=g[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function o(g,E){if(E)e:{var I=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var B=g[b];if(!(B in I))break e;I=I[B]}g=g[g.length-1],b=I[g],E=E(b),E!=b&&E!=null&&e(I,g,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(E){var I=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&I.push([b,E[b]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function m(g,E,I){return g.call.apply(g.bind,arguments)}function h(g,E,I){return h=m,h.apply(null,arguments)}function v(g,E){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,E){function I(){}I.prototype=E.prototype,g.Z=E.prototype,g.prototype=new I,g.prototype.constructor=g,g.Ob=function(b,B,$){for(var le=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)le[Ue-2]=arguments[Ue];return E.prototype[B].apply(b,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function R(g){const E=g.length;if(E>0){const I=Array(E);for(let b=0;b<E;b++)I[b]=g[b];return I}return[]}function L(g,E){for(let b=1;b<arguments.length;b++){const B=arguments[b];var I=typeof B;if(I=I!="object"?I:B?Array.isArray(B)?"array":I:"null",I=="array"||I=="object"&&typeof B.length=="number"){I=g.length||0;const $=B.length||0;g.length=I+$;for(let le=0;le<$;le++)g[I+le]=B[le]}else g.push(B)}}class H{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function U(g){u.setTimeout(()=>{throw g},0)}function W(){var g=M;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class oe{constructor(){this.h=this.g=null}add(E,I){const b=Z.get();b.set(E,I),this.h?this.h.next=b:this.g=b,this.h=b}}var Z=new H(()=>new ae,g=>g.reset());class ae{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,fe=!1,M=new oe,x=()=>{const g=Promise.resolve(void 0);pe=()=>{g.then(N)}};function N(){for(var g;g=W();){try{g.h.call(g.g)}catch(I){U(I)}var E=Z;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}fe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const I=()=>{};u.addEventListener("test",I,E),u.removeEventListener("test",I,E)}catch{}return g})();function D(g){return/^[\s\xa0]*$/.test(g)}function qe(g,E){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}T(qe,k),qe.prototype.init=function(g,E){const I=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(I=="mouseover"?E=g.fromElement:I=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),J=0;function ue(g,E,I,b,B){this.listener=g,this.proxy=null,this.src=E,this.type=I,this.capture=!!b,this.ha=B,this.key=++J,this.da=this.fa=!1}function Ee(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ze(g,E,I){for(const b in g)E.call(I,g[b],b,g)}function je(g,E){for(const I in g)E.call(void 0,g[I],I,g)}function O(g){const E={};for(const I in g)E[I]=g[I];return E}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,E){let I,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(I in b)g[I]=b[I];for(let $=0;$<te.length;$++)I=te[$],Object.prototype.hasOwnProperty.call(b,I)&&(g[I]=b[I])}}function de(g){this.src=g,this.g={},this.h=0}de.prototype.add=function(g,E,I,b,B){const $=g.toString();g=this.g[$],g||(g=this.g[$]=[],this.h++);const le=Pe(g,E,b,B);return le>-1?(E=g[le],I||(E.fa=!1)):(E=new ue(E,this.src,$,!!b,B),E.fa=I,g.push(E)),E};function be(g,E){const I=E.type;if(I in g.g){var b=g.g[I],B=Array.prototype.indexOf.call(b,E,void 0),$;($=B>=0)&&Array.prototype.splice.call(b,B,1),$&&(Ee(E),g.g[I].length==0&&(delete g.g[I],g.h--))}}function Pe(g,E,I,b){for(let B=0;B<g.length;++B){const $=g[B];if(!$.da&&$.listener==E&&$.capture==!!I&&$.ha==b)return B}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),bt={};function at(g,E,I,b,B){if(Array.isArray(E)){for(let $=0;$<E.length;$++)at(g,E[$],I,b,B);return null}return I=Xs(I),g&&g[gt]?g.J(E,I,d(b)?!!b.capture:!1,B):Zn(g,E,I,!1,b,B)}function Zn(g,E,I,b,B,$){if(!E)throw Error("Invalid event type");const le=d(B)?!!B.capture:!!B;let Ue=jt(g);if(Ue||(g[Ke]=Ue=new de(g)),I=Ue.add(E,I,b,le,$),I.proxy)return I;if(b=Ws(),I.proxy=b,b.src=g,b.listener=I,g.addEventListener)q||(B=le),B===void 0&&(B=!1),g.addEventListener(E.toString(),b,B);else if(g.attachEvent)g.attachEvent(qn(E.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function Ws(){function g(I){return E.call(g.src,g.listener,I)}const E=eo;return g}function Nn(g,E,I,b,B){if(Array.isArray(E))for(var $=0;$<E.length;$++)Nn(g,E[$],I,b,B);else b=d(b)?!!b.capture:!!b,I=Xs(I),g&&g[gt]?(g=g.i,$=String(E).toString(),$ in g.g&&(E=g.g[$],I=Pe(E,I,b,B),I>-1&&(Ee(E[I]),Array.prototype.splice.call(E,I,1),E.length==0&&(delete g.g[$],g.h--)))):g&&(g=jt(g))&&(E=g.g[E.toString()],g=-1,E&&(g=Pe(E,I,b,B)),(I=g>-1?E[g]:null)&&Fn(I))}function Fn(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[gt])be(E.i,g);else{var I=g.type,b=g.proxy;E.removeEventListener?E.removeEventListener(I,b,g.capture):E.detachEvent?E.detachEvent(qn(I),b):E.addListener&&E.removeListener&&E.removeListener(b),(I=jt(E))?(be(I,g),I.h==0&&(I.src=null,E[Ke]=null)):Ee(g)}}}function qn(g){return g in bt?bt[g]:bt[g]="on"+g}function eo(g,E){if(g.da)g=!0;else{E=new qe(E,this);const I=g.listener,b=g.ha||g.src;g.fa&&Fn(g),g=I.call(b,E)}return g}function jt(g){return g=g[Ke],g instanceof de?g:null}var to="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xs(g){return typeof g=="function"?g:(g[to]||(g[to]=function(E){return g.handleEvent(E)}),g[to])}function Nt(){P.call(this),this.i=new de(this),this.M=this,this.G=null}T(Nt,P),Nt.prototype[gt]=!0,Nt.prototype.removeEventListener=function(g,E,I,b){Nn(this,g,E,I,b)};function At(g,E){var I,b=g.G;if(b)for(I=[];b;b=b.G)I.push(b);if(g=g.M,b=E.type||E,typeof E=="string")E=new k(E,g);else if(E instanceof k)E.target=E.target||g;else{var B=E;E=new k(b,g),ce(E,B)}B=!0;let $,le;if(I)for(le=I.length-1;le>=0;le--)$=E.g=I[le],B=Ii($,b,!0,E)&&B;if($=E.g=g,B=Ii($,b,!0,E)&&B,B=Ii($,b,!1,E)&&B,I)for(le=0;le<I.length;le++)$=E.g=I[le],B=Ii($,b,!1,E)&&B}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const I=g.g[E];for(let b=0;b<I.length;b++)Ee(I[b]);delete g.g[E],g.h--}}this.G=null},Nt.prototype.J=function(g,E,I,b){return this.i.add(String(g),E,!1,I,b)},Nt.prototype.K=function(g,E,I,b){return this.i.add(String(g),E,!0,I,b)};function Ii(g,E,I,b){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let B=!0;for(let $=0;$<E.length;++$){const le=E[$];if(le&&!le.da&&le.capture==I){const Ue=le.listener,Lt=le.ha||le.src;le.fa&&be(g.i,le),B=Ue.call(Lt,b)!==!1&&B}}return B&&!b.defaultPrevented}function no(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function Bi(g){g.g=no(()=>{g.g=null,g.i&&(g.i=!1,Bi(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class se extends P{constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bi(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(g){P.call(this),this.h=g,this.g={}}T(zi,P);var Zs=[];function io(g){ze(g.g,function(E,I){this.g.hasOwnProperty(I)&&Fn(E)},g),g.g={}}zi.prototype.N=function(){zi.Z.N.call(this),io(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ki=u.JSON.stringify,Sl=u.JSON.parse,Zo=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function jo(){}function ea(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){k.call(this,"d")}T(Wt,k);function xn(){k.call(this,"c")}T(xn,k);var yt={},so=null;function js(){return so=so||new Nt}yt.Ia="serverreachability";function gs(g){k.call(this,yt.Ia,g)}T(gs,k);function jn(g){const E=js();At(E,new gs(E))}yt.STAT_EVENT="statevent";function Yi(g,E){k.call(this,yt.STAT_EVENT,g),this.stat=E}T(Yi,k);function xt(g){const E=js();At(E,new Yi(E,g))}yt.Ja="timingevent";function ei(g,E){k.call(this,yt.Ja,g),this.size=E}T(ei,k);function ti(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function ta(g,E,I,b,B,$){g.info(function(){if(g.g)if($){var le="",Ue=$.split("&");for(let it=0;it<Ue.length;it++){var Lt=Ue[it].split("=");if(Lt.length>1){const It=Lt[0];Lt=Lt[1];const ui=It.split("_");le=ui.length>=2&&ui[1]=="type"?le+(It+"="+Lt+"&"):le+(It+"=redacted&")}}}else le=null;else le=$;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+E+`
`+I+`
`+le})}function na(g,E,I,b,B,$,le){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+E+`
`+I+`
`+$+" "+le})}function ni(g,E,I,b){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+ia(g,I)+(b?" "+b:"")})}function ys(g,E){g.info(function(){return"TIMEOUT: "+E})}Gn.prototype.info=function(){};function ia(g,E){if(!g.g)return E;if(!E)return null;try{const $=JSON.parse(E);if($){for(g=0;g<$.length;g++)if(Array.isArray($[g])){var I=$[g];if(!(I.length<2)){var b=I[1];if(Array.isArray(b)&&!(b.length<1)){var B=b[0];if(B!="noop"&&B!="stop"&&B!="close")for(let le=1;le<b.length;le++)b[le]=""}}}}return Ki($)}catch{return E}}var _s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ee={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ye;function _e(){}T(_e,jo),_e.prototype.g=function(){return new XMLHttpRequest},ye=new _e;function Ie(g){return encodeURIComponent(String(g))}function Le(g){var E=1;g=g.split(":");const I=[];for(;E>0&&g.length;)I.push(g.shift()),E--;return g.length&&I.push(g.join(":")),I}function xe(g,E,I,b){this.j=g,this.i=E,this.l=I,this.S=b||1,this.V=new zi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new en}function en(){this.i=null,this.g="",this.h=!1}var ft={},Mt={};function En(g,E,I){g.M=1,g.A=oo(qt(E)),g.u=I,g.R=!0,vs(g,null)}function vs(g,E){g.F=Date.now(),ii(g),g.B=qt(g.A);var I=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),aa(I.i,"t",b),g.C=0,I=g.j.L,g.h=new en,g.g=pc(g.j,I?E:null,!g.u),g.P>0&&(g.O=new se(h(g.Y,g,g.g),g.P)),E=g.V,I=g.g,b=g.ba;var B="readystatechange";Array.isArray(B)||(B&&(Zs[0]=B.toString()),B=Zs);for(let $=0;$<B.length;$++){const le=at(I,B[$],b||E.handleEvent,!1,E.h||E);if(!le)break;E.g[le.key]=le}E=g.J?O(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),jn(),ta(g.i,g.v,g.B,g.l,g.S,g.u)}xe.prototype.ba=function(g){g=g.target;const E=this.O;E&&Ri(g)==3?E.j():this.Y(g)},xe.prototype.Y=function(g){try{if(g==this.g)e:{const Ue=Ri(this.g),Lt=this.g.ya(),it=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||Ue!=4||Lt==7||(Lt==8||it<=0?jn(3):jn(2)),ri(this);var E=this.g.ca();this.X=E;var I=sa(this);if(this.o=E==200,na(this.i,this.v,this.B,this.l,this.S,Ue,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,B=this.g;if((b=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(b)){var $=b;break t}}$=null}if(g=$)ni(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oi(this,g);else{this.o=!1,this.m=3,xt(12),An(this),Sn(this);break e}}if(this.R){g=!0;let It;for(;!this.K&&this.C<I.length;)if(It=rt(this,I),It==Mt){Ue==4&&(this.m=4,xt(14),g=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(It==ft){this.m=4,xt(15),ni(this.i,this.l,I,"[Invalid Chunk]"),g=!1;break}else ni(this.i,this.l,It,null),oi(this,It);if(Dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||I.length!=0||this.h.h||(this.m=1,xt(16),g=!1),this.o=this.o&&g,!g)ni(this.i,this.l,I,"[Invalid Chunked Response]"),An(this),Sn(this);else if(I.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),kl(le),le.P=!0,xt(11))}}else ni(this.i,this.l,I,null),oi(this,I);Ue==4&&An(this),this.o&&!this.K&&(Ue==4?cc(this.j,this):(this.o=!1,ii(this)))}else Ss(this.g),E==400&&I.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),An(this),Sn(this)}}}catch{}finally{}};function sa(g){if(!Dt(g))return g.g.la();const E=an(g.g);if(E==="")return"";let I="";const b=E.length,B=Ri(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return An(g),Sn(g),"";g.h.i=new u.TextDecoder}for(let $=0;$<b;$++)g.h.h=!0,I+=g.h.i.decode(E[$],{stream:!(B&&$==b-1)});return E.length=0,g.h.g+=I,g.C=0,g.h.g}function Dt(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function rt(g,E){var I=g.C,b=E.indexOf(`
`,I);return b==-1?Mt:(I=Number(E.substring(I,b)),isNaN(I)?ft:(b+=1,b+I>E.length?Mt:(E=E.slice(b,b+I),g.C=b+I,E)))}xe.prototype.cancel=function(){this.K=!0,An(this)};function ii(g){g.T=Date.now()+g.H,si(g,g.H)}function si(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=ti(h(g.aa,g),E)}function ri(g){g.D&&(u.clearTimeout(g.D),g.D=null)}xe.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(ys(this.i,this.B),this.M!=2&&(jn(),xt(17)),An(this),this.m=2,Sn(this)):si(this,this.T-g)};function Sn(g){g.j.I==0||g.K||cc(g.j,g)}function An(g){ri(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,io(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function oi(g,E){try{var I=g.j;if(I.I!=0&&(I.g==g||$i(I.h,g))){if(!g.L&&$i(I.h,g)&&I.I==3){try{var b=I.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<g.F)da(I),ar(I);else break e;po(I),xt(18)}}else I.xa=B[1],0<I.xa-I.K&&B[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=ti(h(I.Va,I),6e3));Ji(I.h)<=1&&I.ta&&(I.ta=void 0)}else es(I,11)}else if((g.L||I.g==g)&&da(I),!D(E))for(B=I.Ba.g.parse(E),E=0;E<B.length;E++){let it=B[E];const It=it[0];if(!(It<=I.K))if(I.K=It,it=it[1],I.I==2)if(it[0]=="c"){I.M=it[1],I.ba=it[2];const ui=it[3];ui!=null&&(I.ka=ui,I.j.info("VER="+I.ka));const ts=it[4];ts!=null&&(I.za=ts,I.j.info("SVER="+I.za));const bi=it[5];bi!=null&&typeof bi=="number"&&bi>0&&(b=1.5*bi,I.O=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const Ni=g.g;if(Ni){const mo=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var $=b.h;$.g||mo.indexOf("spdy")==-1&&mo.indexOf("quic")==-1&&mo.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Al($,$.h),$.h=null))}if(b.G){const ha=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ha&&(b.wa=ha,lt(b.J,b.G,ha))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-g.F,I.j.info("Handshake RTT: "+I.T+"ms")),b=I;var le=g;if(b.na=hc(b,b.L?b.ba:null,b.W),le.L){Il(b.h,le);var Ue=le,Lt=b.O;Lt&&(Ue.H=Lt),Ue.D&&(ri(Ue),ii(Ue)),b.g=le}else lc(b);I.i.length>0&&ji(I)}else it[0]!="stop"&&it[0]!="close"||es(I,7);else I.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?es(I,7):Pl(I):it[0]!="noop"&&I.l&&I.l.qa(it),I.A=0)}}jn(4)}catch{}}var Pt=class{constructor(g,E){this.g=g,this.map=E}};function ro(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ts(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ji(g){return g.h?1:g.g?g.g.size:0}function $i(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function Al(g,E){g.g?g.g.add(E):g.h=E}function Il(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}ro.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Cl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const I of g.g.values())E=E.concat(I.G);return E}return R(g.i)}var nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ra(g,E){if(g){g=g.split("&");for(let I=0;I<g.length;I++){const b=g[I].indexOf("=");let B,$=null;b>=0?(B=g[I].substring(0,b),$=g[I].substring(b+1)):B=g[I],E(B,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Bn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof Bn?(this.l=g.l,tn(this,g.j),this.o=g.o,this.g=g.g,er(this,g.u),this.h=g.h,wl(this,oc(g.i)),this.m=g.m):g&&(E=String(g).match(nc))?(this.l=!1,tn(this,E[1]||"",!0),this.o=Qi(E[2]||""),this.g=Qi(E[3]||"",!0),er(this,E[4]),this.h=Qi(E[5]||"",!0),wl(this,E[6]||"",!0),this.m=Qi(E[7]||"")):(this.l=!1,this.i=new nr(null,this.l))}Bn.prototype.toString=function(){const g=[];var E=this.j;E&&g.push(ao(E,oa,!0),":");var I=this.g;return(I||E=="file")&&(g.push("//"),(E=this.o)&&g.push(ao(E,oa,!0),"@"),g.push(Ie(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&g.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&g.push("/"),g.push(ao(I,I.charAt(0)=="/"?Rl:ic,!0))),(I=this.i.toString())&&g.push("?",I),(I=this.m)&&g.push("#",ao(I,sc)),g.join("")},Bn.prototype.resolve=function(g){const E=qt(this);let I=!!g.j;I?tn(E,g.j):I=!!g.o,I?E.o=g.o:I=!!g.g,I?E.g=g.g:I=g.u!=null;var b=g.h;if(I)er(E,g.u);else if(I=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var B=E.h.lastIndexOf("/");B!=-1&&(b=E.h.slice(0,B+1)+b)}if(B=b,B==".."||B==".")b="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){b=B.lastIndexOf("/",0)==0,B=B.split("/");const $=[];for(let le=0;le<B.length;){const Ue=B[le++];Ue=="."?b&&le==B.length&&$.push(""):Ue==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),b&&le==B.length&&$.push("")):($.push(Ue),b=!0)}b=$.join("/")}else b=B}return I?E.h=b:I=g.i.toString()!=="",I?wl(E,oc(g.i)):I=!!g.m,I&&(E.m=g.m),E};function qt(g){return new Bn(g)}function tn(g,E,I){g.j=I?Qi(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function er(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function wl(g,E,I){E instanceof nr?(g.i=E,la(g.i,g.l)):(I||(E=ao(E,tr)),g.i=new nr(E,g.l))}function lt(g,E,I){g.i.set(E,I)}function oo(g){return lt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Qi(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ao(g,E,I){return typeof g=="string"?(g=encodeURI(g).replace(E,Mn),I&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Mn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var oa=/[#\/\?@]/g,ic=/[#\?:]/g,Rl=/[#\?]/g,tr=/[#\?@]/g,sc=/#/g;function nr(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function Dn(g){g.g||(g.g=new Map,g.h=0,g.i&&ra(g.i,function(E,I){g.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}n=nr.prototype,n.add=function(g,E){Dn(this),this.i=null,g=ir(this,g);let I=this.g.get(g);return I||this.g.set(g,I=[]),I.push(E),this.h+=1,this};function rc(g,E){Dn(g),E=ir(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function bl(g,E){return Dn(g),E=ir(g,E),g.g.has(E)}n.forEach=function(g,E){Dn(this),this.g.forEach(function(I,b){I.forEach(function(B){g.call(E,B,b,this)},this)},this)};function Nl(g,E){Dn(g);let I=[];if(typeof E=="string")bl(g,E)&&(I=I.concat(g.g.get(ir(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)I=I.concat(g[E]);return I}n.set=function(g,E){return Dn(this),this.i=null,g=ir(this,g),bl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=Nl(this,g),g.length>0?String(g[0]):E):E};function aa(g,E,I){rc(g,E),I.length>0&&(g.i=null,g.g.set(ir(g,E),R(I)),g.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var I=E[b];const B=Ie(I);I=Nl(this,I);for(let $=0;$<I.length;$++){let le=B;I[$]!==""&&(le+="="+Ie(I[$])),g.push(le)}}return this.i=g.join("&")};function oc(g){const E=new nr;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function ir(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function la(g,E){E&&!g.j&&(Dn(g),g.i=null,g.g.forEach(function(I,b){const B=b.toLowerCase();b!=B&&(rc(this,b),aa(this,B,I))},g)),g.j=E}function Ci(g,E){const I=new Gn;if(u.Image){const b=new Image;b.onload=v(ai,I,"TestLoadImage: loaded",!0,E,b),b.onerror=v(ai,I,"TestLoadImage: error",!1,E,b),b.onabort=v(ai,I,"TestLoadImage: abort",!1,E,b),b.ontimeout=v(ai,I,"TestLoadImage: timeout",!1,E,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else E(!1)}function xl(g,E){const I=new Gn,b=new AbortController,B=setTimeout(()=>{b.abort(),ai(I,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:b.signal}).then($=>{clearTimeout(B),$.ok?ai(I,"TestPingServer: ok",!0,E):ai(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(B),ai(I,"TestPingServer: error",!1,E)})}function ai(g,E,I,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(I)}catch{}}function sr(){this.g=new Zo}function Wi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Wi,jo),Wi.prototype.g=function(){return new lo(this.i,this.h)};function lo(g,E){Nt.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(lo,Nt),n=lo.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,wi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rr(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ua(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ua(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?rr(this):wi(this),this.readyState==3&&ua(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,rr(this))},n.Na=function(g){this.g&&(this.response=g,rr(this))},n.ga=function(){this.g&&rr(this)};function rr(g){g.readyState=4,g.l=null,g.j=null,g.B=null,wi(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,g.push(I[0]+": "+I[1]),I=E.next();return g.join(`\r
`)};function wi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function li(g){let E="";return ze(g,function(I,b){E+=b,E+=":",E+=I,E+=`\r
`}),E}function uo(g,E,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=li(I),typeof g=="string"?I!=null&&Ie(I):lt(g,E,I))}function dt(g){Nt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(dt,Nt);var Xi=/^https?$/i,Ml=["POST","PUT"];n=dt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ye.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch($){co(this,$);return}if(g=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)I.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const $ of b.keys())I.set($,b.get($));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find($=>$.toLowerCase()=="content-type"),B=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Ml,E,void 0)>=0)||b||B||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,le]of I)this.g.setRequestHeader($,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch($){co(this,$)}};function co(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,Dl(g),Es(g)}function Dl(g){g.A||(g.A=!0,At(g,"complete"),At(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,At(this,"complete"),At(this,"abort"),Es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Es(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?fo(this):this.Xa())},n.Xa=function(){fo(this)};function fo(g){if(g.h&&typeof a<"u"){if(g.v&&Ri(g)==4)setTimeout(g.Ca.bind(g),0);else if(At(g,"readystatechange"),Ri(g)==4){g.h=!1;try{const $=g.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var b;if(b=$===0){let le=String(g.D).match(nc)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),b=!Xi.test(le?le.toLowerCase():"")}I=b}if(I)At(g,"complete"),At(g,"success");else{g.o=6;try{var B=Ri(g)>2?g.g.statusText:""}catch{B=""}g.l=B+" ["+g.ca()+"]",Dl(g)}}finally{Es(g)}}}}function Es(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const I=g.g;g.g=null,E||At(g,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ri(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Sl(E)}};function an(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Ss(g){const E={};g=(g.g&&Ri(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(D(g[b]))continue;var I=Le(g[b]);const B=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const $=E[B]||[];E[B]=$,$.push(I)}je(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(g,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[g]||E}function or(g){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zi("baseRetryDelayMs",5e3,g),this.Za=Zi("retryDelaySeedMs",1e4,g),this.Ta=Zi("forwardChannelMaxRetries",2,g),this.va=Zi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new ro(g&&g.concurrentRequestLimit),this.Ba=new sr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=or.prototype,n.ka=8,n.I=1,n.connect=function(g,E,I,b){xt(0),this.W=g,this.H=E||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.J=hc(this,null,this.W),ji(this)};function Pl(g){if(ca(g),g.I==3){var E=g.V++,I=qt(g.J);if(lt(I,"SID",g.M),lt(I,"RID",E),lt(I,"TYPE","terminate"),ho(g,I),E=new xe(g,g.j,E),E.M=2,E.A=oo(qt(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!I&&u.Image&&(new Image().src=E.A,I=!0),I||(E.g=pc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),ii(E)}dc(g)}function ar(g){g.g&&(kl(g),g.g.cancel(),g.g=null)}function ca(g){ar(g),g.v&&(u.clearTimeout(g.v),g.v=null),da(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function ji(g){if(!Ts(g.h)&&!g.m){g.m=!0;var E=g.Ea;pe||x(),fe||(pe(),fe=!0),M.add(E,g),g.D=0}}function fa(g,E){return Ji(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=ti(h(g.Ea,g,E),fc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const B=new xe(this,this.j,g);let $=this.o;if(this.U&&($?($=O($),ce($,this.U)):$=this.U),this.u!==null||this.R||(B.J=$,$=null),this.S)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=ac(this,B,E),I=qt(this.J),lt(I,"RID",g),lt(I,"CVER",22),this.G&&lt(I,"X-HTTP-Session-Id",this.G),ho(this,I),$&&(this.R?E="headers="+Ie(li($))+"&"+E:this.u&&uo(I,this.u,$)),Al(this.h,B),this.Ra&&lt(I,"TYPE","init"),this.S?(lt(I,"$req",E),lt(I,"SID","null"),B.U=!0,En(B,I,null)):En(B,I,E),this.I=2}}else this.I==3&&(g?Vl(this,g):this.i.length==0||Ts(this.h)||Vl(this))};function Vl(g,E){var I;E?I=E.l:I=g.V++;const b=qt(g.J);lt(b,"SID",g.M),lt(b,"RID",I),lt(b,"AID",g.K),ho(g,b),g.u&&g.o&&uo(b,g.u,g.o),I=new xe(g,g.j,I,g.D+1),g.u===null&&(I.J=g.o),E&&(g.i=E.G.concat(g.i)),E=ac(g,I,1e3),I.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Al(g.h,I),En(I,b,E)}function ho(g,E){g.H&&ze(g.H,function(I,b){lt(E,b,I)}),g.l&&ze({},function(I,b){lt(E,b,I)})}function ac(g,E,I){I=Math.min(g.i.length,I);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var B=g.i;let Ue=-1;for(;;){const Lt=["count="+I];Ue==-1?I>0?(Ue=B[0].g,Lt.push("ofs="+Ue)):Ue=0:Lt.push("ofs="+Ue);let it=!0;for(let It=0;It<I;It++){var $=B[It].g;const ui=B[It].map;if($-=Ue,$<0)Ue=Math.max(0,B[It].g-100),it=!1;else try{$="req"+$+"_"||"";try{var le=ui instanceof Map?ui:Object.entries(ui);for(const[ts,bi]of le){let Ni=bi;d(bi)&&(Ni=Ki(bi)),Lt.push($+ts+"="+encodeURIComponent(Ni))}}catch(ts){throw Lt.push($+"type="+encodeURIComponent("_badmap")),ts}}catch{b&&b(ui)}}if(it){le=Lt.join("&");break e}}le=void 0}return g=g.i.splice(0,I),E.G=g,le}function lc(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;pe||x(),fe||(pe(),fe=!0),M.add(E,g),g.A=0}}function po(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=ti(h(g.Da,g),fc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=ti(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),ar(this),uc(this))};function kl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function uc(g){g.g=new xe(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=qt(g.na);lt(E,"RID","rpc"),lt(E,"SID",g.M),lt(E,"AID",g.K),lt(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&lt(E,"TO",g.ia),lt(E,"TYPE","xmlhttp"),ho(g,E),g.u&&g.o&&uo(E,g.u,g.o),g.O&&(g.g.H=g.O);var I=g.g;g=g.ba,I.M=1,I.A=oo(qt(E)),I.u=null,I.R=!0,vs(I,g)}n.Va=function(){this.C!=null&&(this.C=null,ar(this),po(this),xt(19))};function da(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function cc(g,E){var I=null;if(g.g==E){da(g),kl(g),g.g=null;var b=2}else if($i(g.h,E))I=E.G,Il(g.h,E),b=1;else return;if(g.I!=0){if(E.o)if(b==1){I=E.u?E.u.length:0,E=Date.now()-E.F;var B=g.D;b=js(),At(b,new ei(b,I)),ji(g)}else lc(g);else if(B=E.m,B==3||B==0&&E.X>0||!(b==1&&fa(g,E)||b==2&&po(g)))switch(I&&I.length>0&&(E=g.h,E.i=E.i.concat(I)),B){case 1:es(g,5);break;case 4:es(g,10);break;case 3:es(g,6);break;default:es(g,2)}}}function fc(g,E){let I=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(I*=2),I*E}function es(g,E){if(g.j.info("Error code "+E),E==2){var I=h(g.bb,g),b=g.Ua;const B=!b;b=new Bn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||tn(b,"https"),oo(b),B?Ci(b.toString(),I):xl(b.toString(),I)}else xt(2);g.I=0,g.l&&g.l.pa(E),dc(g),ca(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function dc(g){if(g.I=0,g.ja=[],g.l){const E=Cl(g.h);(E.length!=0||g.i.length!=0)&&(L(g.ja,E),L(g.ja,g.i),g.h.i.length=0,R(g.i),g.i.length=0),g.l.oa()}}function hc(g,E,I){var b=I instanceof Bn?qt(I):new Bn(I);if(b.g!="")E&&(b.g=E+"."+b.g),er(b,b.u);else{var B=u.location;b=B.protocol,E=E?E+"."+B.hostname:B.hostname,B=+B.port;const $=new Bn(null);b&&tn($,b),E&&($.g=E),B&&er($,B),I&&($.h=I),b=$}return I=g.G,E=g.wa,I&&E&&lt(b,I,E),lt(b,"VER",g.ka),ho(g,b),b}function pc(g,E,I){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new dt(new Wi({ab:I})):new dt(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mc(){}n=mc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function lr(){}lr.prototype.g=function(g,E){return new In(g,E)};function In(g,E){Nt.call(this),this.g=new or(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!D(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new As(this)}T(In,Nt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Pl(this.g)},In.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var I={};I.__data__=g,g=I}else this.v&&(I={},I.__data__=Ki(g),g=I);E.i.push(new Pt(E.Ya++,g)),E.I==3&&ji(E)},In.prototype.N=function(){this.g.l=null,delete this.j,Pl(this.g),delete this.g,In.Z.N.call(this)};function gc(g){Wt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const I in E){g=I;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}T(gc,Wt);function yc(){xn.call(this),this.status=1}T(yc,xn);function As(g){this.g=g}T(As,mc),As.prototype.ra=function(){At(this.g,"a")},As.prototype.qa=function(g){At(this.g,new gc(g))},As.prototype.pa=function(g){At(this.g,new yc)},As.prototype.oa=function(){At(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,HI=function(){return new lr},qI=function(){return js()},FI=yt,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Lf=_s,ee.COMPLETE="complete",OI=ee,ea.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Cu=ea,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,UI=dt}).apply(typeof Rf<"u"?Rf:typeof self<"u"?self:typeof window<"u"?window:{});const FE="@firebase/firestore",qE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new bd("@firebase/firestore");function za(){return Fo.logLevel}function ge(n,...e){if(Fo.logLevel<=$e.DEBUG){const t=e.map(Tg);Fo.debug(`Firestore (${gl}): ${n}`,...t)}}function Ks(n,...e){if(Fo.logLevel<=$e.ERROR){const t=e.map(Tg);Fo.error(`Firestore (${gl}): ${n}`,...t)}}function rl(n,...e){if(Fo.logLevel<=$e.WARN){const t=e.map(Tg);Fo.warn(`Firestore (${gl}): ${n}`,...t)}}function Tg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,GI(n,i,t)}function GI(n,e,t){let i=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ks(i),new Error(i)}function ot(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||GI(e,o,i)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class uU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cU{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hs,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new BI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class fU{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dU{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new fU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=pU(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Qe(n,e){return n<e?-1:n>e?1:0}function Pm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return sm(o)===sm(a)?Qe(o,a):sm(o)?1:-1}return Qe(n.length,e.length)}const mU=55296,gU=57343;function sm(n){const e=n.charCodeAt(0);return e>=mU&&e<=gU}function ol(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="__name__";class os{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=os.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Qe(e.length,t.length)}static compareSegments(e,t){const i=os.isNumericId(e),o=os.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?os.extractNumericId(e).compare(os.extractNumericId(t)):Pm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class vt extends os{construct(e,t,i){return new vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const yU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends os{construct(e,t,i){return new hn(e,t,i)}static isValidIdentifier(e){return yU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GE}static keyField(){return new hn([GE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(vt.fromString(e))}static fromName(e){return new Ae(vt.fromString(e).popFirst(5))}static empty(){return new Ae(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n,e,t){if(!t)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _U(n,e,t,i){if(e===!0&&i===!0)throw new me(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BE(n){if(!Ae.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zE(n){if(Ae.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Md(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function Br(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Md(n);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ku(n,e){if(!KI(n))throw new me(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new me(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=-62135596800,YE=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*YE);return new Tt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KE)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YE}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:$t("string",Tt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Tt(0,0))}static max(){return new De(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=-1;function vU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=De.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new zr(o,Ae.empty(),e)}function TU(n){return new zr(n.readTime,n.key,Lu)}class zr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new zr(De.min(),Ae.empty(),Lu)}static max(){return new zr(De.max(),Ae.empty(),Lu)}}function EU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==SU)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,i)=>{t(e)}))}static reject(e){return new re(((t,i)=>{i(e)}))}static waitFor(e){return new re(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(m=>i(m)))})),u=!0,a===o&&t()}))}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next((o=>o?re.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new re(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let m=0;m<a;m++){const h=m;t(e[h]).next((v=>{u[h]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new re(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function IU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _l(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=-1;function Pd(n){return n==null}function nd(n){return n===0&&1/n==-1/0}function CU(n){return typeof n=="number"&&Number.isInteger(n)&&!nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="";function wU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JE(e)),e=RU(n.get(t),e);return JE(e)}function RU(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case YI:t+="";break;default:t+=a}}return t}function JE(n){return n+YI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bf(this.root,e,this.comparator,!0)}}class bf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??dn.RED,this.left=o??dn.EMPTY,this.right=a??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new dn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QE(this.data.getIterator())}getIteratorFrom(e){return new QE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Zt(this.comparator);return t.data=e,t}}class QE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Pi([])}unionWith(e){let t=new Zt(hn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $I("Invalid base64 string: "+a):a}})(e);return new pn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const bU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=bU.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ft(n.seconds),nanos:Ft(n.nanos)}}function Ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yr(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="server_timestamp",WI="__type__",XI="__previous_value__",ZI="__local_write_time__";function Ag(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[WI])==null?void 0:i.stringValue)===QI}function Vd(n){const e=n.mapValue.fields[XI];return Ag(e)?Vd(e):e}function Uu(n){const e=Kr(n.mapValue.fields[ZI].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,i,o,a,u,d,m,h,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=v}}const id="(default)";class Ou{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="__type__",xU="__max__",Nf={mapValue:{}},eC="__vector__",sd="value";function Jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ag(n)?4:DU(n)?9007199254740991:MU(n)?10:11:Re(28295,{value:n})}function ms(n,e){if(n===e)return!0;const t=Jr(n);if(t!==Jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uu(n).isEqual(Uu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Kr(o.timestampValue),d=Kr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Yr(o.bytesValue).isEqual(Yr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ft(o.geoPointValue.latitude)===Ft(a.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ft(o.integerValue)===Ft(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Ft(o.doubleValue),d=Ft(a.doubleValue);return u===d?nd(u)===nd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if($E(u)!==$E(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!ms(u[m],d[m])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function Fu(n,e){return(n.values||[]).find((t=>ms(t,e)))!==void 0}function al(n,e){if(n===e)return 0;const t=Jr(n),i=Jr(e);if(t!==i)return Qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ft(a.integerValue||a.doubleValue),m=Ft(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return WE(n.timestampValue,e.timestampValue);case 4:return WE(Uu(n),Uu(e));case 5:return Pm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Yr(a),m=Yr(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),m=u.split("/");for(let h=0;h<d.length&&h<m.length;h++){const v=Qe(d[h],m[h]);if(v!==0)return v}return Qe(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Qe(Ft(a.latitude),Ft(u.latitude));return d!==0?d:Qe(Ft(a.longitude),Ft(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return XE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,R,L,H;const d=a.fields||{},m=u.fields||{},h=(S=d[sd])==null?void 0:S.arrayValue,v=(R=m[sd])==null?void 0:R.arrayValue,T=Qe(((L=h==null?void 0:h.values)==null?void 0:L.length)||0,((H=v==null?void 0:v.values)==null?void 0:H.length)||0);return T!==0?T:XE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Nf.mapValue&&u===Nf.mapValue)return 0;if(a===Nf.mapValue)return 1;if(u===Nf.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),h=u.fields||{},v=Object.keys(h);m.sort(),v.sort();for(let T=0;T<m.length&&T<v.length;++T){const S=Pm(m[T],v[T]);if(S!==0)return S;const R=al(d[m[T]],h[v[T]]);if(R!==0)return R}return Qe(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function WE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Kr(n),i=Kr(e),o=Qe(t.seconds,i.seconds);return o!==0?o:Qe(t.nanos,i.nanos)}function XE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=al(t[o],i[o]);if(a)return a}return Qe(t.length,i.length)}function ll(n){return Vm(n)}function Vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Kr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Vm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Vm(t.fields[u])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function Uf(n){switch(Jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(n);return e?16+Uf(e):16;case 5:return 2*n.stringValue.length;case 6:return Yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Uf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Yo(i.fields,((a,u)=>{o+=a.length+Uf(u)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function ZE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function km(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function jE(n){return!!n&&"nullValue"in n}function eS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function MU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[jI])==null?void 0:i.stringValue)===eC}function xu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=xu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xu(n.arrayValue.values[t]);return e}return{...n}}function DU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(t)}setAll(e){let t=hn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=xu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Of(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Yo(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new vi(xu(this.value))}}function tC(n){const e=[];return Yo(n.fields,((t,i)=>{const o=new hn([t]);if(Of(i)){const a=tC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new _n(e,0,De.min(),De.min(),De.min(),vi.empty(),0)}static newFoundDocument(e,t,i,o){return new _n(e,1,t,De.min(),i,o,0)}static newNoDocument(e,t){return new _n(e,2,t,De.min(),De.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,De.min(),De.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.position=e,this.inclusive=t}}function tS(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ae.comparator(Ae.fromName(u.referenceValue),t.key):i=al(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function nS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ms(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t="asc"){this.field=e,this.dir=t}}function PU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{}class Jt extends nC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kU(e,t,i):t==="array-contains"?new OU(e,i):t==="in"?new FU(e,i):t==="not-in"?new qU(e,i):t==="array-contains-any"?new HU(e,i):new Jt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new LU(e,i):new UU(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&Jr(this.value)===Jr(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends nC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Oi(e,t)}matches(e){return iC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iC(n){return n.op==="and"}function sC(n){return VU(n)&&iC(n)}function VU(n){for(const e of n.filters)if(e instanceof Oi)return!1;return!0}function Lm(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(sC(n))return n.filters.map((e=>Lm(e))).join(",");{const e=n.filters.map((t=>Lm(t))).join(",");return`${n.op}(${e})`}}function rC(n,e){return n instanceof Jt?(function(i,o){return o instanceof Jt&&i.op===o.op&&i.field.isEqual(o.field)&&ms(i.value,o.value)})(n,e):n instanceof Oi?(function(i,o){return o instanceof Oi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&rC(u,o.filters[d])),!0):!1})(n,e):void Re(19439)}function oC(n){return n instanceof Jt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`})(n):n instanceof Oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(oC).join(" ,")+"}"})(n):"Filter"}class kU extends Jt{constructor(e,t,i){super(e,t,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class LU extends Jt{constructor(e,t){super(e,"in",t),this.keys=aC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class UU extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=aC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ae.fromName(i.referenceValue)))}class OU extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Fu(t.arrayValue,this.value)}}class FU extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fu(this.value.arrayValue,t)}}class qU extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fu(this.value.arrayValue,t)}}class HU extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Fu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function iS(n,e=null,t=[],i=[],o=null,a=null,u=null){return new GU(n,e,t,i,o,a,u)}function Cg(n){const e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Lm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ll(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ll(i))).join(",")),e.Te=t}return e.Te}function wg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nS(n.startAt,e.startAt)&&nS(n.endAt,e.endAt)}function Um(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BU(n,e,t,i,o,a,u,d){return new Yu(n,e,t,i,o,a,u,d)}function Rg(n){return new Yu(n)}function sS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lC(n){return n.collectionGroup!==null}function Mu(n){const e=ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Zt(hn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new od(a,i))})),t.has(hn.keyField().canonicalString())||e.Ie.push(new od(hn.keyField(),i))}return e.Ie}function as(n){const e=ke(n);return e.Ee||(e.Ee=zU(e,Mu(n))),e.Ee}function zU(n,e){if(n.limitType==="F")return iS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new od(o.field,a)}));const t=n.endAt?new rd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new rd(n.startAt.position,n.startAt.inclusive):null;return iS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Om(n,e){const t=n.filters.concat([e]);return new Yu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fm(n,e,t){return new Yu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kd(n,e){return wg(as(n),as(e))&&n.limitType===e.limitType}function uC(n){return`${Cg(as(n))}|lt:${n.limitType}`}function Ka(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>oC(o))).join(", ")}]`),Pd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>ll(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>ll(o))).join(",")),`Target(${i})`})(as(n))}; limitType=${n.limitType})`}function Ld(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ae.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Mu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,m){const h=tS(u,d,m);return u.inclusive?h<=0:h<0})(i.startAt,Mu(i),o)||i.endAt&&!(function(u,d,m){const h=tS(u,d,m);return u.inclusive?h>=0:h>0})(i.endAt,Mu(i),o))})(n,e)}function KU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cC(n){return(e,t)=>{let i=!1;for(const o of Mu(n)){const a=YU(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function YU(n,e,t){const i=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,u,d){const m=u.data.field(a),h=d.data.field(a);return m!==null&&h!==null?al(m,h):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Rt(Ae.comparator);function Ys(){return JU}const fC=new Rt(Ae.comparator);function wu(...n){let e=fC;for(const t of n)e=e.insert(t.key,t);return e}function dC(n){let e=fC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ko(){return Du()}function hC(){return Du()}function Du(){return new Jo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $U=new Rt(Ae.comparator),QU=new Zt(Ae.comparator);function We(...n){let e=QU;for(const t of n)e=e.add(t);return e}const WU=new Zt(Qe);function XU(){return WU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function pC(n){return{integerValue:""+n}}function ZU(n,e){return CU(e)?pC(e):bg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function jU(n,e,t){return n instanceof ad?(function(o,a){const u={fields:{[WI]:{stringValue:QI},[ZI]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Ag(a)&&(a=Vd(a)),a&&(u.fields[XI]=a),{mapValue:u}})(t,e):n instanceof qu?gC(n,e):n instanceof Hu?yC(n,e):(function(o,a){const u=mC(o,a),d=rS(u)+rS(o.Ae);return km(u)&&km(o.Ae)?pC(d):bg(o.serializer,d)})(n,e)}function eO(n,e,t){return n instanceof qu?gC(n,e):n instanceof Hu?yC(n,e):t}function mC(n,e){return n instanceof ld?(function(i){return km(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class ad extends Ud{}class qu extends Ud{constructor(e){super(),this.elements=e}}function gC(n,e){const t=_C(e);for(const i of n.elements)t.some((o=>ms(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Hu extends Ud{constructor(e){super(),this.elements=e}}function yC(n,e){let t=_C(e);for(const i of n.elements)t=t.filter((o=>!ms(o,i)));return{arrayValue:{values:t}}}class ld extends Ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rS(n){return Ft(n.integerValue||n.doubleValue)}function _C(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function tO(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof qu&&o instanceof qu||i instanceof Hu&&o instanceof Hu?ol(i.elements,o.elements,ms):i instanceof ld&&o instanceof ld?ms(i.Ae,o.Ae):i instanceof ad&&o instanceof ad})(n.transform,e.transform)}class nO{constructor(e,t){this.version=e,this.transformResults=t}}class ls{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ls}static exists(e){return new ls(void 0,e)}static updateTime(e){return new ls(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Od{}function vC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ng(n.key,ls.none()):new Ju(n.key,n.data,ls.none());{const t=n.data,i=vi.empty();let o=new Zt(hn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new $o(n.key,i,new Pi(o.toArray()),ls.none())}}function iO(n,e,t){n instanceof Ju?(function(o,a,u){const d=o.value.clone(),m=aS(o.fieldTransforms,a,u.transformResults);d.setAll(m),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof $o?(function(o,a,u){if(!Ff(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=aS(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(TC(o)),m.setAll(d),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Pu(n,e,t,i){return n instanceof Ju?(function(a,u,d,m){if(!Ff(a.precondition,u))return d;const h=a.value.clone(),v=lS(a.fieldTransforms,m,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof $o?(function(a,u,d,m){if(!Ff(a.precondition,u))return d;const h=lS(a.fieldTransforms,m,u),v=u.data;return v.setAll(TC(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Ff(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function sO(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=mC(i.transform,o||null);a!=null&&(t===null&&(t=vi.empty()),t.set(i.field,a))}return t||null}function oS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ol(i,o,((a,u)=>tO(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ju extends Od{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $o extends Od{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function TC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function aS(n,e,t){const i=new Map;ot(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,eO(u,d,t[o]))}return i}function lS(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,jU(a,u,e))}return i}class Ng extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rO extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&iO(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Pu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Pu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=hC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const m=vC(u,d);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(De.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,((t,i)=>oS(t,i)))&&ol(this.baseMutations,e.baseMutations,((t,i)=>oS(t,i)))}}class xg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return $U})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new xg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,Ze;function uO(n){switch(n){case ie.OK:return Re(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function EC(n){if(n===void 0)return Ks("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Yt.OK:return ie.OK;case Yt.CANCELLED:return ie.CANCELLED;case Yt.UNKNOWN:return ie.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ie.INTERNAL;case Yt.UNAVAILABLE:return ie.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ie.NOT_FOUND;case Yt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Yt.ABORTED:return ie.ABORTED;case Yt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Yt.DATA_LOSS:return ie.DATA_LOSS;default:return Re(39323,{code:n})}}(Ze=Yt||(Yt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new qr([4294967295,4294967295],0);function uS(n){const e=cO().encode(n),t=new LI;return t.update(e),new Uint8Array(t.digest())}function cS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qr([t,i],0),new qr([o,a],0)]}class Mg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ru(`Invalid padding: ${t}`);if(i<0)throw new Ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(qr.fromNumber(i)));return o.compare(fO)===1&&(o=new qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uS(e),[i,o]=cS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Mg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=uS(e),[i,o]=cS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Fd(De.min(),o,new Rt(Qe),Ys(),We())}}class $u{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new $u(i,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class SC{constructor(e,t){this.targetId=e,this.Ce=t}}class AC{constructor(e,t,i=pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class fS{constructor(){this.ve=0,this.Fe=dS(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),i=We();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:a})}})),new $u(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=dS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.Je=xf(),this.He=xf(),this.Ye=new Rt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Um(a))if(i===0){const u=new Ae(a.path);this.et(t,u,_n.newNoDocument(u,De.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Yr(i).toUint8Array()}catch(m){if(m instanceof $I)return rl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Mg(u,o,a)}catch(m){return rl(m instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Um(d.target)){const m=new Ae(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,_n.newNoDocument(m,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=We();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Fd(e,t,this.Ye,this.je,i);return this.je=Ys(),this.Je=xf(),this.He=xf(),this.Ye=new Rt(Qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xf(){return new Rt(Ae.comparator)}function dS(){return new Rt(Ae.comparator)}const hO={asc:"ASCENDING",desc:"DESCENDING"},pO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mO={and:"AND",or:"OR"};class gO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qm(n,e){return n.useProto3Json||Pd(e)?e:{value:e}}function ud(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yO(n,e){return ud(n,e.toTimestamp())}function us(n){return ot(!!n,49232),De.fromTimestamp((function(t){const i=Kr(t);return new Tt(i.seconds,i.nanos)})(n))}function Dg(n,e){return Hm(n,e).canonicalString()}function Hm(n,e){const t=(function(o){return new vt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CC(n){const e=vt.fromString(n);return ot(xC(e),10190,{key:e.toString()}),e}function Gm(n,e){return Dg(n.databaseId,e.path)}function rm(n,e){const t=CC(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(RC(t))}function wC(n,e){return Dg(n.databaseId,e)}function _O(n){const e=CC(n);return e.length===4?vt.emptyPath():RC(e)}function Bm(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RC(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hS(n,e,t){return{name:Gm(n,e),fields:t.value.mapValue.fields}}function vO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(ot(v===void 0||typeof v=="string",58123),pn.fromBase64String(v||"")):(ot(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),pn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const v=h.code===void 0?ie.UNKNOWN:EC(h.code);return new me(v,h.message||"")})(u);t=new AC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=rm(n,i.document.name),a=us(i.document.updateTime),u=i.document.createTime?us(i.document.createTime):De.min(),d=new vi({mapValue:{fields:i.document.fields}}),m=_n.newFoundDocument(o,a,u,d),h=i.targetIds||[],v=i.removedTargetIds||[];t=new qf(h,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=rm(n,i.document),a=i.readTime?us(i.readTime):De.min(),u=_n.newNoDocument(o,a),d=i.removedTargetIds||[];t=new qf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=rm(n,i.document),a=i.removedTargetIds||[];t=new qf([],a,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new lO(o,a),d=i.targetId;t=new SC(d,u)}}return t}function TO(n,e){let t;if(e instanceof Ju)t={update:hS(n,e.key,e.value)};else if(e instanceof Ng)t={delete:Gm(n,e.key)};else if(e instanceof $o)t={update:hS(n,e.key,e.data),updateMask:NO(e.fieldMask)};else{if(!(e instanceof rO))return Re(16599,{Vt:e.type});t={verify:Gm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof ad)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof qu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ld)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:yO(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function EO(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?us(o.updateTime):us(a);return u.isEqual(De.min())&&(u=us(a)),new nO(u,o.transformResults||[])})(t,e)))):[]}function SO(n,e){return{documents:[wC(n,e.path)]}}function AO(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=wC(n,o);const a=(function(h){if(h.length!==0)return NC(Oi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:Ya(S.field),direction:wO(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=qm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function IO(n){let e=_O(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ot(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=bC(T);return S instanceof Oi&&sC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(L){return new od(Ja(L.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Pd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(T){const S=!!T.before,R=T.values||[];return new rd(R,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,R=T.values||[];return new rd(R,S)})(t.endAt)),BU(e,o,u,a,d,"F",m,h)}function CO(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ja(t.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(t.unaryFilter.field);return Jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ja(t.unaryFilter.field);return Jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ja(t.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Jt.create(Ja(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Oi.create(t.compositeFilter.filters.map((i=>bC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function wO(n){return hO[n]}function RO(n){return pO[n]}function bO(n){return mO[n]}function Ya(n){return{fieldPath:n.canonicalString()}}function Ja(n){return hn.fromServerFormat(n.fieldPath)}function NC(n){return n instanceof Jt?(function(t){if(t.op==="=="){if(eS(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NAN"}};if(jE(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eS(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NAN"}};if(jE(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(t.field),op:RO(t.op),value:t.value}}})(n):n instanceof Oi?(function(t){const i=t.getFilters().map((o=>NC(o)));return i.length===1?i[0]:{compositeFilter:{op:bO(t.op),filters:i}}})(n):Re(54877,{filter:n})}function NO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t,i,o,a=De.min(),u=De.min(),d=pn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.yt=e}}function MO(n){const e=IO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.Cn=new PO}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(zr.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class PO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Zt(vt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MC=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(MC,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ul(0)}static cr(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",VO=1048576;function gS([n,e],[t,i]){const o=Qe(n,t);return o===0?Qe(e,i):o}class kO{constructor(e){this.Ir=e,this.buffer=new Zt(gS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();gS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(mS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_l(t)?ge(mS,"Ignoring IndexedDB error during garbage collection: ",t):await yl(t)}await this.Vr(3e5)}))}}class UO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Dd.ce);const i=new kO(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(pS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,m,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),za()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(h-m)+`ms
Total Duration: ${h-v}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function OO(n,e){return new UO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.changes=new Jo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Pu(i.mutation,o,Pi.empty(),Tt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,We()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=We()){const o=ko();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=wu();return a.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ko();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,We())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Ys();const u=Du(),d=(function(){return Du()})();return t.forEach(((m,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof $o)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),Pu(v.mutation,h,v.mutation.getFieldMask(),Tt.now())):u.set(h.key,Pi.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>d.set(h,new qO(v,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Du();let o=new Rt(((u,d)=>u-d)),a=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let v=i.get(m)||Pi.empty();v=d.applyToLocalView(h,v),i.set(m,v);const T=(o.get(d.batchId)||We()).add(m);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,v=m.value,T=hC();v.forEach((S=>{if(!a.has(S)){const R=vC(t.get(S),i.get(S));R!==null&&T.set(S,R),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return re.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ae.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):re.resolve(ko());let d=Lu,m=a;return u.next((h=>re.forEach(h,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?re.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{m=m.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,We()))).next((v=>({batchId:d,changes:dC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((i=>{let o=wu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=wu();return this.indexManager.getCollectionParents(e,a).next((d=>re.forEach(d,(m=>{const h=(function(T,S){return new Yu(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,_n.newInvalidDocument(v)))}));let d=wu();return u.forEach(((m,h)=>{const v=a.get(m);v!==void 0&&Pu(v.mutation,h,Pi.empty(),Tt.now()),Ld(t,h)&&(d=d.insert(m,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:us(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:MO(o.bundledQuery),readTime:us(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.overlays=new Rt(Ae.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ko();return re.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),re.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const o=ko(),a=t.length+1,u=new Ae(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Rt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=ko(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const d=ko(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,v)=>d.set(h,v))),!(d.size()>=o)););return re.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new aO(t,i));let a=this.qr.get(t);a===void 0&&(a=We(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Qr=new Zt(sn.$r),this.Ur=new Zt(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new sn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new sn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ae(new vt([])),i=new sn(t,e),o=new sn(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new vt([])),i=new sn(t,e),o=new sn(t,e+1);let a=We();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new sn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(sn.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new oO(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new sn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Sg:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sn(t,0),o=new sn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Zt(Qe);return t.forEach((o=>{const a=new sn(o,0),u=new sn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),re.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ae.isDocumentKey(a)||(a=a.child(""));const u=new sn(new Ae(a),0);let d=new Zt(Qe);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(m.Yr)),!0)}),u),re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return re.forEach(t.mutations,(o=>{const a=new sn(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new sn(t,0),o=this.Zr.firstAfterOrEqual(i);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.ri=e,this.docs=(function(){return new Rt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let i=Ys();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():_n.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Ys();const u=t.path,d=new Ae(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:v}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||EU(TU(v),i)<=0||(o.has(v.key)||Ld(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Re(9500)}ii(e,t){return re.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new JO(this)}getSize(e){return re.resolve(this.size)}}class JO extends FO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.persistence=e,this.si=new Jo((t=>Cg(t)),wg),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=ul.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),re.waitFor(a).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),re.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Dd(0),this.li=!1,this.li=!0,this.hi=new zO,this.referenceDelegate=e(this),this.Pi=new $O(this),this.indexManager=new DO,this.remoteDocumentCache=(function(o){return new YO(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new xO(t),this.Ii=new GO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new KO(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new QO(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return re.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class QO extends AU{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new Vg(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(i=>{const o=Ae.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cd{constructor(e,t){this.persistence=e,this.pi=new Jo((i=>wU(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=OO(this,t)}static mi(e,t){return new cd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?re.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,De.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uf(e.data.value)),t}br(e,t,i){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=We(),o=We();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new kg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vV()?8:IU(Tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new WO;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(za()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(za()<=$e.DEBUG&&ge("QueryEngine","Query:",Ka(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(za()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(t))):re.resolve())}ys(e,t){if(sS(t))return re.resolve(null);let i=as(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Fm(t,null,"F"),i=as(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=We(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.Ds(t,d);return this.Cs(t,h,u,m.readTime)?this.ys(e,Fm(t,null,"F")):this.vs(e,h,t,m)}))))})))))}ws(e,t,i,o){return sS(t)||o.isEqual(De.min())?re.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?re.resolve(null):(za()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ka(t)),this.vs(e,u,t,vU(o,Lu)).next((d=>d)))}))}Ds(e,t){let i=new Zt(cC(e));return t.forEach(((o,a)=>{Ld(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return za()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ka(t)),this.ps.getDocumentsMatchingQuery(e,t,zr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="LocalStore",ZO=3e8;class jO{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Rt(Qe),this.xs=new Jo((a=>Cg(a)),wg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function e4(n,e,t,i){return new jO(n,e,t,i)}async function PC(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let m=We();for(const h of o){u.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}for(const h of a){d.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function t4(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,v){const T=h.batch,S=T.keys();let R=re.resolve();return S.forEach((L=>{R=R.next((()=>v.getEntry(m,L))).next((H=>{const U=h.docVersions.get(L);ot(U!==null,48541),H.version.compareTo(U)<0&&(T.applyToRemoteDocument(H,h),H.isValidDocument()&&(H.setReadTime(h.commitVersion),v.addEntry(H)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=We();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function VC(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function n4(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,T))));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(pn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(T,R),(function(H,U,W){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=ZO?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(S,R,v)&&d.push(t.Pi.updateTargetData(a,R))}));let m=Ys(),h=We();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(i4(a,u,e.documentUpdates).next((v=>{m=v.ks,h=v.qs}))),!i.isEqual(De.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return re.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(t.Ms=o,a)))}function i4(n,e,t){let i=We(),o=We();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Ys();return t.forEach(((d,m)=>{const h=a.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(De.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ge(Lg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function s4(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function r4(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,re.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Ur(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function zm(n,e,t){const i=ke(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!_l(u))throw u;ge(Lg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function yS(n,e,t){const i=ke(n);let o=De.min(),a=We();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,v){const T=ke(m),S=T.xs.get(v);return S!==void 0?re.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,v)})(i,u,as(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{a=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:De.min(),t?a:We()))).next((d=>(o4(i,KU(e),d),{documents:d,Qs:a})))))}function o4(n,e,t){let i=n.Os.get(e)||De.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class _S{constructor(){this.activeTargetIds=XU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a4{constructor(){this.Mo=new _S,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _S,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="ConnectivityMonitor";class TS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(vS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(vS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function Km(){return Mf===null?Mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===id?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Km(),d=this.zo(e,t.toUriEncodedString());ge(om,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,a);const{host:h}=new URL(d),v=pl(h);return this.Jo(e,d,m,i,v).then((T=>(ge(om,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw rl(om,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=u4[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class d4 extends c4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Km();return new Promise(((d,m)=>{const h=new UI;h.setWithCredentials(!0),h.listenOnce(OI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Lf.NO_ERROR:const T=h.getResponseJson();ge(gn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Lf.TIMEOUT:ge(gn,`RPC '${e}' ${u} timed out`),m(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const S=h.getStatus();if(ge(gn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const H=(function(W){const oe=W.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(oe)>=0?oe:ie.UNKNOWN})(L.status);m(new me(H,L.message))}else m(new me(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new me(ie.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ge(gn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);ge(gn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=Km(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=HI(),d=qI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=a.join("");ge(gn,`Creating RPC '${e}' stream ${o}: ${v}`,m);const T=u.createWebChannel(v,m);this.I_(T);let S=!1,R=!1;const L=new f4({Yo:U=>{R?ge(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(ge(gn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ge(gn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),H=(U,W,oe)=>{U.listen(W,(Z=>{try{oe(Z)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return H(T,Cu.EventType.OPEN,(()=>{R||(ge(gn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),H(T,Cu.EventType.CLOSE,(()=>{R||(R=!0,ge(gn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),H(T,Cu.EventType.ERROR,(U=>{R||(R=!0,rl(gn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),L.a_(new me(ie.UNAVAILABLE,"The operation could not be completed")))})),H(T,Cu.EventType.MESSAGE,(U=>{var W;if(!R){const oe=U.data[0];ot(!!oe,16349);const Z=oe,ae=(Z==null?void 0:Z.error)||((W=Z[0])==null?void 0:W.error);if(ae){ge(gn,`RPC '${e}' stream ${o} received error:`,ae);const pe=ae.status;let fe=(function(N){const P=Yt[N];if(P!==void 0)return EC(P)})(pe),M=ae.message;fe===void 0&&(fe=ie.INTERNAL,M="Unknown error status: "+pe+" with message "+ae.message),R=!0,L.a_(new me(fe,M)),T.close()}else ge(gn,`RPC '${e}' stream ${o} received:`,oe),L.u_(oe)}})),H(d,FI.STAT_EVENT,(U=>{U.stat===Dm.PROXY?ge(gn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Dm.NOPROXY&&ge(gn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(n){return new gO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="PersistentStream";class LC{constructor(e,t,i,o,a,u,d,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new me(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(ES,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(ES,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h4 extends LC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vO(this.serializer,e),i=(function(a){if(!("targetChange"in a))return De.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?us(u.readTime):De.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Bm(this.serializer),t.addTarget=(function(a,u){let d;const m=u.target;if(d=Um(m)?{documents:SO(a,m)}:{query:AO(a,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=IC(a,u.resumeToken);const h=qm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(De.min())>0){d.readTime=ud(a,u.snapshotVersion.toTimestamp());const h=qm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=CO(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Bm(this.serializer),t.removeTarget=e,this.q_(t)}}class p4 extends LC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EO(e.writeResults,e.commitTime),i=us(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>TO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{}class g4 extends m4{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Hm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ie.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Hm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ie.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class y4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="RemoteStore";class _4{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Qo(this)&&(ge(qo,"Restarting streams for network reachability change."),await(async function(m){const h=ke(m);h.Ea.add(4),await Qu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Hd(h)})(this))}))})),this.Ra=new y4(i,o)}}async function Hd(n){if(Qo(n))for(const e of n.da)await e(!0)}async function Qu(n){for(const e of n.da)await e(!1)}function UC(n,e){const t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qg(t)?Fg(t):vl(t).O_()&&Og(t,e))}function Ug(n,e){const t=ke(n),i=vl(t);t.Ia.delete(e),i.O_()&&OC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Qo(t)&&t.Ra.set("Unknown"))}function Og(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(n).Y_(e)}function OC(n,e){n.Va.Ue(e),vl(n).Z_(e)}function Fg(n){n.Va=new dO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.Ra.ua()}function qg(n){return Qo(n)&&!vl(n).x_()&&n.Ia.size>0}function Qo(n){return ke(n).Ea.size===0}function FC(n){n.Va=void 0}async function v4(n){n.Ra.set("Online")}async function T4(n){n.Ia.forEach(((e,t)=>{Og(n,e)}))}async function E4(n,e){FC(n),qg(n)?(n.Ra.ha(e),Fg(n)):n.Ra.set("Unknown")}async function S4(n,e,t){if(n.Ra.set("Online"),e instanceof AC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ge(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fd(n,i)}else if(e instanceof qf?n.Va.Ze(e):e instanceof SC?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{const i=await VC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,h)=>{const v=a.Ia.get(m);if(!v)return;a.Ia.set(m,v.withResumeToken(pn.EMPTY_BYTE_STRING,v.snapshotVersion)),OC(a,m);const T=new Ur(v.target,m,h,v.sequenceNumber);Og(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ge(qo,"Failed to raise snapshot:",i),await fd(n,i)}}async function fd(n,e,t){if(!_l(e))throw e;n.Ea.add(1),await Qu(n),n.Ra.set("Offline"),t||(t=()=>VC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hd(n)}))}function qC(n,e){return e().catch((t=>fd(n,t,e)))}async function Gd(n){const e=ke(n),t=$r(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sg;for(;A4(e);)try{const o=await s4(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,I4(e,o)}catch(o){await fd(e,o)}HC(e)&&GC(e)}function A4(n){return Qo(n)&&n.Ta.length<10}function I4(n,e){n.Ta.push(e);const t=$r(n);t.O_()&&t.X_&&t.ea(e.mutations)}function HC(n){return Qo(n)&&!$r(n).x_()&&n.Ta.length>0}function GC(n){$r(n).start()}async function C4(n){$r(n).ra()}async function w4(n){const e=$r(n);for(const t of n.Ta)e.ea(t.mutations)}async function R4(n,e,t){const i=n.Ta.shift(),o=xg.from(i,e,t);await qC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Gd(n)}async function b4(n,e){e&&$r(n).X_&&await(async function(i,o){if((function(u){return uO(u)&&u!==ie.ABORTED})(o.code)){const a=i.Ta.shift();$r(i).B_(),await qC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Gd(i)}})(n,e),HC(n)&&GC(n)}async function SS(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ge(qo,"RemoteStore received new credentials");const i=Qo(t);t.Ea.add(3),await Qu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hd(t)}async function N4(n,e){const t=ke(n);e?(t.Ea.delete(2),await Hd(t)):e||(t.Ea.add(2),await Qu(t),t.Ra.set("Unknown"))}function vl(n){return n.ma||(n.ma=(function(t,i,o){const a=ke(t);return a.sa(),new h4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:v4.bind(null,n),t_:T4.bind(null,n),r_:E4.bind(null,n),H_:S4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),qg(n)?Fg(n):n.Ra.set("Unknown")):(await n.ma.stop(),FC(n))}))),n.ma}function $r(n){return n.fa||(n.fa=(function(t,i,o){const a=ke(t);return a.sa(),new p4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:C4.bind(null,n),r_:b4.bind(null,n),ta:w4.bind(null,n),na:R4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gd(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Hg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gg(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),_l(n))return new me(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ae.comparator(t.key,i.key):(t,i)=>Ae.comparator(t.key,i.key),this.keyedMap=wu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new el;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.ga=new Rt(Ae.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class cl{constructor(e,t,i,o,a,u,d,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new cl(e,t,el.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class M4{constructor(){this.queries=IS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=ke(t),a=o.queries;o.queries=IS(),a.forEach(((u,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function IS(){return new Jo((n=>uC(n)),kd)}async function BC(n,e){const t=ke(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new x4,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Gg(u,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Bg(t)}async function zC(n,e){const t=ke(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function D4(n,e){const t=ke(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Bg(t)}function P4(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Bg(n){n.Ca.forEach((e=>{e.next()}))}var Ym,CS;(CS=Ym||(Ym={})).Ma="default",CS.Cache="cache";class KC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.key=e}}class JC{constructor(e){this.key=e}}class V4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=cC(e),this.tu=new el(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new AS,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),R=Ld(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;S&&R?S.data.isEqual(R.data)?L!==H&&(i.track({type:3,doc:R}),U=!0):this.su(S,R)||(i.track({type:2,doc:R}),U=!0,(m&&this.eu(R,m)>0||h&&this.eu(R,h)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),U=!0):S&&!R&&(i.track({type:1,doc:S}),U=!0,(m||h)&&(d=!0)),U&&(R?(u=u.add(R),a=H?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(R,L){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:U})}};return H(R)-H(L)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,h=m!==this.Za;return this.Za=m,u.length!==0||h?{snapshot:new cl(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new JC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new YC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zg="SyncEngine";class k4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class L4{constructor(e){this.key=e,this.hu=!1}}class U4{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Jo((d=>uC(d)),kd),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(Ae.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=ul.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function O4(n,e,t=!0){const i=jC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await $C(i,e,t,!0),o}async function F4(n,e){const t=jC(n);await $C(t,e,!0,!1)}async function $C(n,e,t,i){const o=await r4(n.localStore,as(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await q4(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&UC(n.remoteStore,o),d}async function q4(n,e,t,i,o){n.pu=(T,S,R)=>(async function(H,U,W,oe){let Z=U.view.ru(W);Z.Cs&&(Z=await yS(H.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,Z))));const ae=oe&&oe.targetChanges.get(U.targetId),pe=oe&&oe.targetMismatches.get(U.targetId)!=null,fe=U.view.applyChanges(Z,H.isPrimaryClient,ae,pe);return RS(H,U.targetId,fe.au),fe.snapshot})(n,T,S,R);const a=await yS(n.localStore,e,!0),u=new V4(e,a.Qs),d=u.ru(a.documents),m=$u.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,m);RS(n,t,h.au);const v=new k4(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function H4(n,e,t){const i=ke(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!kd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await zm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ug(i.remoteStore,o.targetId),Jm(i,o.targetId)})).catch(yl)):(Jm(i,o.targetId),await zm(i.localStore,o.targetId,!0))}async function G4(n,e){const t=ke(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ug(t.remoteStore,i.targetId))}async function B4(n,e,t){const i=W4(n);try{const o=await(function(u,d){const m=ke(u),h=Tt.now(),v=d.reduce(((R,L)=>R.add(L.key)),We());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let L=Ys(),H=We();return m.Ns.getEntries(R,v).next((U=>{L=U,L.forEach(((W,oe)=>{oe.isValidDocument()||(H=H.add(W))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,L))).next((U=>{T=U;const W=[];for(const oe of d){const Z=sO(oe,T.get(oe.key).overlayedDocument);Z!=null&&W.push(new $o(oe.key,Z,tC(Z.value.mapValue),ls.exists(!0)))}return m.mutationQueue.addMutationBatch(R,h,W,d)})).next((U=>{S=U;const W=U.applyToLocalDocumentSet(T,H);return m.documentOverlayCache.saveOverlays(R,U.batchId,W)}))})).then((()=>({batchId:S.batchId,changes:dC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,m){let h=u.Vu[u.currentUser.toKey()];h||(h=new Rt(Qe)),h=h.insert(d,m),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Wu(i,o.changes),await Gd(i.remoteStore)}catch(o){const a=Gg(o,"Failed to persist write");t.reject(a)}}async function QC(n,e){const t=ke(n);try{const i=await n4(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?ot(u.hu,14607):o.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await Wu(t,i,e)}catch(i){await yl(i)}}function wS(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const m=ke(u);m.onlineState=d;let h=!1;m.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(d)&&(h=!0)})),h&&Bg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function z4(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new Rt(Ae.comparator);u=u.insert(a,_n.newNoDocument(a,De.min()));const d=We().add(a),m=new Fd(De.min(),new Map,new Rt(Qe),u,d);await QC(i,m),i.du=i.du.remove(a),i.Au.delete(e),Kg(i)}else await zm(i.localStore,e,!1).then((()=>Jm(i,e,t))).catch(yl)}async function K4(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await t4(t.localStore,e);XC(t,i,null),WC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Wu(t,o)}catch(o){await yl(o)}}async function Y4(n,e,t){const i=ke(n);try{const o=await(function(u,d){const m=ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return m.mutationQueue.lookupMutationBatch(h,d).next((T=>(ot(T!==null,37113),v=T.keys(),m.mutationQueue.removeMutationBatch(h,T)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>m.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);XC(i,e,t),WC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Wu(i,o)}catch(o){await yl(o)}}function WC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function XC(n,e,t){const i=ke(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||ZC(n,i)}))}function ZC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ug(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Kg(n))}function RS(n,e,t){for(const i of t)i instanceof YC?(n.Ru.addReference(i.key,e),J4(n,i)):i instanceof JC?(ge(zg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||ZC(n,i.key)):Re(19791,{wu:i})}function J4(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ge(zg,"New document in limbo: "+t),n.Eu.add(i),Kg(n))}function Kg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(vt.fromString(e)),i=n.fu.next();n.Au.set(i,new L4(t)),n.du=n.du.insert(t,i),UC(n.remoteStore,new Ur(as(Rg(t.path)),i,"TargetPurposeLimboResolution",Dd.ce))}}async function Wu(n,e,t){const i=ke(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(h){o.push(h);const T=kg.As(m.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,h){const v=ke(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(h,(S=>re.forEach(S.Es,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>re.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!_l(T))throw T;ge(Lg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const R=v.Ms.get(S),L=R.snapshotVersion,H=R.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(S,H)}}})(i.localStore,a))}async function $4(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ge(zg,"User change. New user:",e.toKey());const i=await PC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((m=>{m.reject(new me(ie.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wu(t,i.Ls)}}function Q4(n,e){const t=ke(n),i=t.Au.get(e);if(i&&i.hu)return We().add(i.key);{let o=We();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function jC(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z4.bind(null,e),e.Pu.H_=D4.bind(null,e.eventManager),e.Pu.yu=P4.bind(null,e.eventManager),e}function W4(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y4.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return e4(this.persistence,new XO,e.initialUser,this.serializer)}Cu(e){return new DC(Vg.mi,this.serializer)}Du(e){return new a4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class X4 extends dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new LO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new DC((i=>cd.mi(i,t)),this.serializer)}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await N4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new M4})()}createDatastore(e){const t=qd(e.databaseInfo.databaseId),i=(function(a){return new d4(a)})(e.databaseInfo);return(function(a,u,d,m){return new g4(a,u,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new _4(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>wS(this.syncEngine,t,0)),(function(){return TS.v()?new TS:new l4})())}createSyncEngine(e,t){return(function(o,a,u,d,m,h,v){const T=new U4(o,a,u,d,m,h);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=ke(o);ge(qo,"RemoteStore shutting down."),a.Ea.add(5),await Qu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="FirestoreClient";class Z4{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ge(Qr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(Qr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Gg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function lm(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Qr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await PC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function bS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await j4(n);ge(Qr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>SS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>SS(e.remoteStore,o))),n._onlineComponents=e}async function j4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Qr,"Using user provided OfflineComponentProvider");try{await lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;rl("Error using user provided cache. Falling back to memory cache: "+t),await lm(n,new dd)}}else ge(Qr,"Using default OfflineComponentProvider"),await lm(n,new X4(void 0));return n._offlineComponents}async function tw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Qr,"Using user provided OnlineComponentProvider"),await bS(n,n._uninitializedComponentsProvider._online)):(ge(Qr,"Using default OnlineComponentProvider"),await bS(n,new $m))),n._onlineComponents}function e3(n){return tw(n).then((e=>e.syncEngine))}async function nw(n){const e=await tw(n),t=e.eventManager;return t.onListen=O4.bind(null,e.syncEngine),t.onUnlisten=H4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=F4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G4.bind(null,e.syncEngine),t}function t3(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const v=new ew({next:S=>{v.Nu(),u.enqueueAndForget((()=>zC(a,T)));const R=S.docs.has(d);!R&&S.fromCache?h.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&m&&m.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new KC(Rg(d.path),v,{includeMetadataChanges:!0,qa:!0});return BC(a,T)})(await nw(n),n.asyncQueue,e,t,i))),i.promise}function n3(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const v=new ew({next:S=>{v.Nu(),u.enqueueAndForget((()=>zC(a,T))),S.fromCache&&m.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new KC(d,v,{includeMetadataChanges:!0,qa:!0});return BC(a,T)})(await nw(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="firestore.googleapis.com",xS=!0;class MS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sw,this.ssl=xS}else this.host=e.host,this.ssl=e.ssl??xS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VO)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_U("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new lU;switch(i.type){case"firstParty":return new dU(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=NS.get(t);i&&(ge("ComponentProvider","Removing Datastore"),NS.delete(t),i.terminate())})(this),Promise.resolve()}}function i3(n,e,t,i={}){var h;n=Br(n,Bd);const o=pl(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(sI(`https://${d}`),rI("Firestore",!0)),a.host!==sw&&a.host!==d&&rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:d,ssl:o,emulatorOptions:i};if(!Gr(m,u)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=yn.MOCK_USER;else{v=fV(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new yn(S)}n._authCredentials=new uU(new BI(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tl(this.firestore,e,this._query)}}class Qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ku(t,Qt._jsonSchema))return new Qt(e,i||null,new Ae(vt.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:$t("string",Qt._jsonSchemaVersion),referencePath:$t("string")};class Hr extends Tl{constructor(e,t,i){super(e,t,Rg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Ae(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function s3(n,e,...t){if(n=rn(n),zI("collection","path",e),n instanceof Bd){const i=vt.fromString(e,...t);return zE(i),new Hr(n,null,i)}{if(!(n instanceof Qt||n instanceof Hr))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return zE(i),new Hr(n.firestore,null,i)}}function zd(n,e,...t){if(n=rn(n),arguments.length===1&&(e=Eg.newId()),zI("doc","path",e),n instanceof Bd){const i=vt.fromString(e,...t);return BE(i),new Qt(n,null,new Ae(i))}{if(!(n instanceof Qt||n instanceof Hr))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return BE(i),new Qt(n.firestore,n instanceof Hr?n.converter:null,new Ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class PS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kC(this,"async_queue_retry"),this._c=()=>{const i=am();i&&ge(DS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=am();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=am();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_l(e))throw e;ge(DS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",VS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Hg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:VS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function VS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Xu extends Bd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new PS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PS(e),this._firestoreClient=void 0,await e}}}function r3(n,e){const t=typeof n=="object"?n:hg(),i=typeof n=="string"?n:id,o=Ko(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=uV("firestore");a&&i3(o,...a)}return o}function Yg(n){if(n._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||o3(n),n._firestoreClient}function o3(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,m,h,v){return new NU(d,m,h,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,iw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Z4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ti(pn.fromBase64String(e))}catch(t){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ti(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ti._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,Ti._jsonSchema))return Ti.fromBase64String(e.bytes)}}Ti._jsonSchemaVersion="firestore/bytes/1.0",Ti._jsonSchema={type:$t("string",Ti._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:$t("string",cs._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,fs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fs(e.vectorValues);throw new me(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fs._jsonSchemaVersion="firestore/vectorValue/1.0",fs._jsonSchema={type:$t("string",fs._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=/^__.*__$/;class l3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $o(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}function ow(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class $g{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ow(this.Ac)&&a3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||qd(e)}Cc(e,t,i,o=!1){return new $g({Ac:e,methodName:t,Dc:i,path:hn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aw(n){const e=n._freezeSettings(),t=qd(n._databaseId);return new u3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c3(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);cw("Data must be an object, but it was:",u,i);const d=lw(i,u);let m,h;if(a.merge)m=new Pi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=d3(e,T,t);if(!u.contains(S))throw new me(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);p3(v,S)||v.push(S)}m=new Pi(v),h=u.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,h=u.fieldTransforms;return new l3(new vi(d),m,h)}function f3(n,e,t,i=!1){return Qg(t,n.Cc(i?4:3,e))}function Qg(n,e){if(uw(n=rn(n)))return cw("Unsupported field value:",e,n),lw(n,e);if(n instanceof rw)return(function(i,o){if(!ow(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let m=Qg(d,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZU(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Tt.fromDate(i);return{timestampValue:ud(o.serializer,a)}}if(i instanceof Tt){const a=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(o.serializer,a)}}if(i instanceof cs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ti)return{bytesValue:IC(o.serializer,i._byteString)};if(i instanceof Qt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof fs)return(function(u,d){return{mapValue:{fields:{[jI]:{stringValue:eC},[sd]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return bg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Md(i)}`)})(n,e)}function lw(n,e){const t={};return JI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(n,((i,o)=>{const a=Qg(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function uw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof cs||n instanceof Ti||n instanceof Qt||n instanceof rw||n instanceof fs)}function cw(n,e,t){if(!uw(t)||!KI(t)){const i=Md(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function d3(n,e,t){if((e=rn(e))instanceof Jg)return e._internalPath;if(typeof e=="string")return fw(n,e);throw hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const h3=new RegExp("[~\\*/\\[\\]]");function fw(n,e,t){if(e.search(h3)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jg(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new me(ie.INVALID_ARGUMENT,d+n+m)}function p3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class m3 extends dw{data(){return super.data()}}function Wg(n,e){return typeof e=="string"?fw(n,e):e instanceof Jg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class y3 extends Xg{}function _3(n,e,...t){let i=[];e instanceof Xg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((m=>m instanceof Zg)).length,d=a.filter((m=>m instanceof Kd)).length;if(u>1||u>0&&d>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Kd extends y3{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Kd(e,t,i)}_apply(e){const t=this._parse(e);return hw(e._query,t),new Tl(e.firestore,e.converter,Om(e._query,t))}_parse(e){const t=aw(e.firestore);return(function(a,u,d,m,h,v,T){let S;if(h.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){LS(T,v);const L=[];for(const H of T)L.push(kS(m,a,H));S={arrayValue:{values:L}}}else S=kS(m,a,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||LS(T,v),S=f3(d,u,T,v==="in"||v==="not-in");return Jt.create(h,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function v3(n,e,t){const i=e,o=Wg("where",n);return Kd._create(o,i,t)}class Zg extends Xg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const m of d)hw(u,m),u=Om(u,m)})(e._query,t),new Tl(e.firestore,e.converter,Om(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kS(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lC(e)&&t.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(vt.fromString(t));if(!Ae.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ZE(n,new Ae(i))}if(t instanceof Qt)return ZE(n,t._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(t)}.`)}function LS(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T3{convertValue(e,t="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Yo(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[sd].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Ft(u.doubleValue)));return new fs(t)}convertGeoPoint(e){return new cs(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const t=Kr(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=vt.fromString(e);ot(xC(i),9688,{name:e});const o=new Ou(i.get(1),i.get(3)),a=new Ae(i.popFirst(5));return o.isEqual(t)||Ks(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lo extends dw{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:$t("string",Lo._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Hf extends Lo{data(e={}){return super.data(e)}}class tl{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new bu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Hf(this._firestore,this._userDataWriter,i.key,i,new bu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const m=new Hf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new bu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const m=new Hf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new bu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:S3(d.type),doc:m,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(n){n=Br(n,Qt);const e=Br(n.firestore,Xu);return t3(Yg(e),n._key).then((t=>w3(e,n,t)))}tl._jsonSchemaVersion="firestore/querySnapshot/1.0",tl._jsonSchema={type:$t("string",tl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class pw extends T3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function I3(n){n=Br(n,Tl);const e=Br(n.firestore,Xu),t=Yg(e),i=new pw(e);return g3(n._query),n3(t,n._query).then((o=>new tl(e,i,n,o)))}function mw(n,e,t){n=Br(n,Qt);const i=Br(n.firestore,Xu),o=E3(n.converter,e,t);return gw(i,[c3(aw(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ls.none())])}function C3(n){return gw(Br(n.firestore,Xu),[new Ng(n._key,ls.none())])}function gw(n,e){return(function(i,o){const a=new Hs;return i.asyncQueue.enqueueAndForget((async()=>B4(await e3(i),o,a))),a.promise})(Yg(n),e)}function w3(n,e,t){const i=t.docs.get(e._key),o=new pw(n);return new Lo(n,o,e._key,i,new bu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){gl=o})(ml),ps(new Ui("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Xu(new cU(i.getProvider("auth-internal")),new hU(u,i.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(h.options.projectId,v)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Si(FE,qE,e),Si(FE,qE,"esm2020")})();function yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R3=yw,_w=new zo("auth","Firebase",yw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new bd("@firebase/auth");function b3(n,...e){pd.logLevel<=$e.WARN&&pd.warn(`Auth (${ml}): ${n}`,...e)}function Gf(n,...e){pd.logLevel<=$e.ERROR&&pd.error(`Auth (${ml}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...e){throw jg(n,...e)}function ds(n,...e){return jg(n,...e)}function vw(n,e,t){const i={...R3(),[e]:t};return new zo("auth","Firebase",i).create(e,{appName:n.name})}function Gs(n){return vw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return _w.create(n,...e)}function we(n,e,...t){if(!n)throw jg(e,...t)}function Fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gf(e),new Error(e)}function Js(n,e){n||Fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function N3(){return US()==="http:"||US()==="https:"}function US(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N3()||oI()||"connection"in navigator)?navigator.onLine:!0}function M3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Js(t>e,"Short delay should be less than long delay!"),this.isMobile=pV()||yV()}get(){return x3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(n,e){Js(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],V3=new Zu(3e4,6e4);function Xr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zr(n,e,t,i,o={}){return Ew(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=zu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...a};return gV()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&pl(n.emulatorConfig.host)&&(h.credentials="include"),Tw.fetch()(await Sw(n,n.config.apiHost,t,d),h)})}async function Ew(n,e,t){n._canInitEmulator=!1;const i={...D3,...e};try{const o=new L3(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Df(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Df(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Df(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vw(n,v,h);Fi(n,v)}}catch(o){if(o instanceof Gi)throw o;Fi(n,"network-request-failed",{message:String(o)})}}async function ju(n,e,t,i,o={}){const a=await Zr(n,e,t,i,o);return"mfaPendingCredential"in a&&Fi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Sw(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?ey(n.config,o):`${n.config.apiScheme}://${o}`;return P3.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function k3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ds(this.auth,"network-request-failed")),V3.get())})}}function Df(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ds(n,e,i);return o.customData._tokenResponse=t,o}function OS(n){return n!==void 0&&n.enterprise!==void 0}class U3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O3(n,e){return Zr(n,"GET","/v2/recaptchaConfig",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(n,e){return Zr(n,"POST","/v1/accounts:delete",e)}async function md(n,e){return Zr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(n,e=!1){const t=rn(n),i=await t.getIdToken(e),o=ty(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Vu(um(o.auth_time)),issuedAtTime:Vu(um(o.iat)),expirationTime:Vu(um(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function um(n){return Number(n)*1e3}function ty(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{const o=eI(t);return o?JSON.parse(o):(Gf("Failed to decode base64 JWT payload"),null)}catch(o){return Gf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function FS(n){const e=ty(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Gi&&H3(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function H3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Gu(n,md(e,{idToken:t}));we(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?Aw(o.providerUserInfo):[],u=z3(n.providerData,a),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Wm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function B3(n){const e=rn(n);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z3(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Aw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(n,e){const t=await Ew(n,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await Sw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&pl(n.emulatorConfig.host)&&(m.credentials="include"),Tw.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Y3(n,e){return Zr(n,"POST","/v2/accounts:revokeToken",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=FS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await K3(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new nl;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(we(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return Fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return q3(this,e)}reload(){return B3(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await gd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Gs(this.auth));const e=await this.getIdToken();return await Gu(this,F3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:R,providerData:L,stsTokenManager:H}=t;we(T&&H,e,"internal-error");const U=nl.fromJSON(this.name,H);we(typeof T=="string",e,"internal-error"),Dr(i,e.name),Dr(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof R=="boolean",e,"internal-error"),Dr(a,e.name),Dr(u,e.name),Dr(d,e.name),Dr(m,e.name),Dr(h,e.name),Dr(v,e.name);const W=new Vi({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:R,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:U,createdAt:h,lastLoginAt:v});return L&&Array.isArray(L)&&(W.providerData=L.map(oe=>({...oe}))),m&&(W._redirectEventId=m),W}static async _fromIdTokenResponse(e,t,i=!1){const o=new nl;o.updateFromServerResponse(t);const a=new Vi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Aw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new nl;d.updateFromIdToken(i);const m=new Vi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Wm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new Map;function qs(n){Js(n instanceof Function,"Expected a class definition");let e=qS.get(n);return e?(Js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Iw.type="NONE";const HS=Iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class il{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Bf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await md(this.auth,{idToken:e}).catch(()=>{});return t?Vi._fromGetAccountInfoResponse(this.auth,t,e):null}return Vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new il(qs(HS),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||qs(HS);const u=Bf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const v=await h._get(u);if(v){let T;if(typeof v=="string"){const S=await md(e,{idToken:v}).catch(()=>{});if(!S)break;T=await Vi._fromGetAccountInfoResponse(e,S,v)}else T=Vi._fromJSON(e,v);h!==a&&(d=T),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new il(a,e,i):(a=m[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new il(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xw(e))return"Blackberry";if(Mw(e))return"Webos";if(ww(e))return"Safari";if((e.includes("chrome/")||Rw(e))&&!e.includes("edge/"))return"Chrome";if(Nw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Cw(n=Tn()){return/firefox\//i.test(n)}function ww(n=Tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rw(n=Tn()){return/crios\//i.test(n)}function bw(n=Tn()){return/iemobile/i.test(n)}function Nw(n=Tn()){return/android/i.test(n)}function xw(n=Tn()){return/blackberry/i.test(n)}function Mw(n=Tn()){return/webos/i.test(n)}function ny(n=Tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function J3(n=Tn()){var e;return ny(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $3(){return _V()&&document.documentMode===10}function Dw(n=Tn()){return ny(n)||Nw(n)||Mw(n)||xw(n)||/windows phone/i.test(n)||bw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e=[]){let t;switch(n){case"Browser":t=GS(Tn());break;case"Worker":t=`${GS(Tn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ml}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const m=e(a);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(n,e={}){return Zr(n,"GET","/v2/passwordPolicy",Xr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=6;class Z3{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??X3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BS(this),this.idTokenSubscription=new BS(this),this.beforeStateQueue=new Q3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await md(this,{idToken:e}),i=await Vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(_i(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(Gs(this));const t=e?rn(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W3(this),t=new Z3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Y3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&b3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wo(n){return rn(n)}class BS{constructor(e){this.auth=e,this.observer=null,this.addObserver=CV(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e5(n){Yd=n}function Vw(n){return Yd.loadJS(n)}function t5(){return Yd.recaptchaEnterpriseScript}function n5(){return Yd.gapiScript}function i5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class s5{constructor(){this.enterprise=new r5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class r5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const o5="recaptcha-enterprise",kw="NO_RECAPTCHA";class a5{constructor(e){this.type=o5,this.auth=Wo(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{O3(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new U3(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{d(m)})})}function o(a,u,d){const m=window.grecaptcha;OS(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(kw)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new s5().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&OS(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=t5();m.length!==0&&(m+=d),Vw(m).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function zS(n,e,t,i=!1,o=!1){const a=new a5(n);let u;if(o)u=kw;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Xm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await zS(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await zS(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(n,e){const t=Ko(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Gr(a,e??{}))return o;Fi(o,"already-initialized")}return t.initialize({options:e})}function u5(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(qs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function c5(n,e,t){const i=Wo(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=Lw(e),{host:u,port:d}=f5(e),m=d===null?"":`:${d}`,h={url:`${a}//${u}${m}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(Gr(h,i.config.emulator)&&Gr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,pl(u)?(sI(`${a}//${u}${m}`),rI("Auth",!0)):d5()}function Lw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f5(n){const e=Lw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:KS(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:KS(u)}}}function KS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function d5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fs("not implemented")}_getIdTokenResponse(e){return Fs("not implemented")}_linkToIdToken(e,t){return Fs("not implemented")}_getReauthenticationResolver(e){return Fs("not implemented")}}async function h5(n,e){return Zr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n,e){return ju(n,"POST","/v1/accounts:signInWithPassword",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(n,e){return ju(n,"POST","/v1/accounts:signInWithEmailLink",Xr(n,e))}async function g5(n,e){return ju(n,"POST","/v1/accounts:signInWithEmailLink",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends iy{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Bu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Bu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,t,"signInWithPassword",p5);case"emailLink":return m5(e,{email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xm(e,i,"signUpPassword",h5);case"emailLink":return g5(e,{idToken:t,email:this._email,oobCode:this._password});default:Fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e){return ju(n,"POST","/v1/accounts:signInWithIdp",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5="http://localhost";class Ho extends iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new Ho(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sl(e,t)}buildRequest(){const e={requestUri:y5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v5(n){const e=Au(Iu(n)).link,t=e?Au(Iu(e)).deep_link_id:null,i=Au(Iu(n)).deep_link_id;return(i?Au(Iu(i)).link:null)||i||t||e||n}class sy{constructor(e){const t=Au(Iu(e)),i=t.apiKey??null,o=t.oobCode??null,a=_5(t.mode??null);we(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=v5(e);try{return new sy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,t){return Bu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=sy.parseLink(t);return we(i,"argument-error"),Bu._fromEmailAndCode(e,i.code,i.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends ec{constructor(){super("facebook.com")}static credential(e){return Ho._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ho._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Vr.credential(t,i)}catch{return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends ec{constructor(){super("github.com")}static credential(e){return Ho._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends ec{constructor(){super("twitter.com")}static credential(e,t){return Ho._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(n,e){return ju(n,"POST","/v1/accounts:signUp",Xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Vi._fromIdTokenResponse(e,i,o),u=YS(i);return new Go({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=YS(i);return new Go({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function YS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends Gi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new yd(e,t,i,o)}}function Ow(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(n,a,e,i):a})}async function E5(n,e,t=!1){const i=await Gu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Go._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e,t=!1){const{auth:i}=n;if(_i(i.app))return Promise.reject(Gs(i));const o="reauthenticate";try{const a=await Gu(n,Ow(i,o,e,n),t);we(a.idToken,i,"internal-error");const u=ty(a.idToken);we(u,i,"internal-error");const{sub:d}=u;return we(n.uid===d,i,"user-mismatch"),Go._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(n,e,t=!1){if(_i(n.app))return Promise.reject(Gs(n));const i="signIn",o=await Ow(n,i,e),a=await Go._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function A5(n,e){return Fw(Wo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(n){const e=Wo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I5(n,e,t){if(_i(n.app))return Promise.reject(Gs(n));const i=Wo(n),u=await Xm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T5).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&qw(n),m}),d=await Go._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function C5(n,e,t){return _i(n.app)?Promise.reject(Gs(n)):A5(rn(n),El.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qw(n),i})}function w5(n,e,t,i){return rn(n).onIdTokenChanged(e,t,i)}function R5(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function b5(n,e,t,i){return rn(n).onAuthStateChanged(e,t,i)}function N5(n){return rn(n).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=1e3,M5=10;class Gw extends Hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);$3()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,M5):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},x5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gw.type="LOCAL";const D5=Gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bw.type="SESSION";const zw=Bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Jd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),m=await P5(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,m)=>{const h=ry("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(){return window}function k5(n){hs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){return typeof hs().WorkerGlobalScope<"u"&&typeof hs().importScripts=="function"}async function L5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function O5(){return Kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="firebaseLocalStorageDb",F5=1,vd="firebaseLocalStorage",Jw="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $d(n,e){return n.transaction([vd],e?"readwrite":"readonly").objectStore(vd)}function q5(){const n=indexedDB.deleteDatabase(Yw);return new tc(n).toPromise()}function Zm(){const n=indexedDB.open(Yw,F5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(vd,{keyPath:Jw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(vd)?e(i):(i.close(),await q5(),e(await Zm()))})})}async function JS(n,e,t){const i=$d(n,!0).put({[Jw]:e,value:t});return new tc(i).toPromise()}async function H5(n,e){const t=$d(n,!1).get(e),i=await new tc(t).toPromise();return i===void 0?null:i.value}function $S(n,e){const t=$d(n,!0).delete(e);return new tc(t).toPromise()}const G5=800,B5=3;class $w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>B5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(O5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await L5(),!this.activeServiceWorker)return;this.sender=new V5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await JS(e,_d,"1"),await $S(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>JS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>H5(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$S(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=$d(o,!1).getAll();return new tc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$w.type="LOCAL";const z5=$w;new Zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(n,e){return e?qs(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends iy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y5(n){return Fw(n.auth,new oy(n),n.bypassAuthState)}function J5(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),S5(t,new oy(n),n.bypassAuthState)}async function $5(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),E5(t,new oy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y5;case"linkViaPopup":case"linkViaRedirect":return $5;case"reauthViaPopup":case"reauthViaRedirect":return J5;default:Fi(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=new Zu(2e3,1e4);class Wa extends Qw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Wa.currentPopupAction&&Wa.currentPopupAction.cancel(),Wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");const e=ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q5.get())};e()}}Wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="pendingRedirect",zf=new Map;class X5 extends Qw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zf.get(this.auth._key());if(!e){try{const i=await Z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zf.set(this.auth._key(),e)}return this.bypassAuthState||zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z5(n,e){const t=t6(e),i=e6(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function j5(n,e){zf.set(n._key(),e)}function e6(n){return qs(n._redirectPersistence)}function t6(n){return Bf(W5,n.config.apiKey,n.name)}async function n6(n,e,t=!1){if(_i(n.app))return Promise.reject(Gs(n));const i=Wo(n),o=K5(i,e),u=await new X5(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=600*1e3;class s6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ww(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(ds(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i6&&this.cachedEventUids.clear(),this.cachedEventUids.has(QS(e))}saveEventToCache(e){this.cachedEventUids.add(QS(e)),this.lastProcessedEventTime=Date.now()}}function QS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ww({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(n,e={}){return Zr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l6=/^https?/;async function u6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await o6(n);for(const t of e)try{if(c6(t))return}catch{}Fi(n,"unauthorized-domain")}function c6(n){const e=Qm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!l6.test(t))return!1;if(a6.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Zu(3e4,6e4);function WS(){const n=hs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function d6(n){return new Promise((e,t)=>{var o,a,u;function i(){WS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WS(),t(ds(n,"network-request-failed"))},timeout:f6.get()})}if((a=(o=hs().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=hs().gapi)!=null&&u.load)i();else{const d=i5("iframefcb");return hs()[d]=()=>{gapi.load?i():t(ds(n,"network-request-failed"))},Vw(`${n5()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function h6(n){return Kf=Kf||d6(n),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new Zu(5e3,15e3),m6="__/auth/iframe",g6="emulator/auth/iframe",y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v6(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ey(e,g6):`https://${n.config.authDomain}/${m6}`,i={apiKey:e.apiKey,appName:n.name,v:ml},o=_6.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${zu(i).slice(1)}`}async function T6(n){const e=await h6(n),t=hs().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:v6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y6,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=ds(n,"network-request-failed"),d=hs().setTimeout(()=>{a(u)},p6.get());function m(){hs().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S6=500,A6=600,I6="_blank",C6="http://localhost";class XS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w6(n,e,t,i=S6,o=A6){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...E6,width:i.toString(),height:o.toString(),top:a,left:u},h=Tn().toLowerCase();t&&(d=Rw(h)?I6:t),Cw(h)&&(e=e||C6,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[R,L])=>`${S}${R}=${L},`,"");if(J3(h)&&d!=="_self")return R6(e||"",d),new XS(null);const T=window.open(e||"",d,v);we(T,n,"popup-blocked");try{T.focus()}catch{}return new XS(T)}function R6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="__/auth/handler",N6="emulator/auth/handler",x6=encodeURIComponent("fac");async function ZS(n,e,t,i,o,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ml,eventId:o};if(e instanceof Uw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",IV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof ec){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),h=m?`#${x6}=${encodeURIComponent(m)}`:"";return`${M6(n)}?${zu(d).slice(1)}${h}`}function M6({config:n}){return n.emulator?ey(n,N6):`https://${n.authDomain}/${b6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class D6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zw,this._completeRedirectFn=n6,this._overrideRedirectResult=j5}async _openPopup(e,t,i,o){var u;Js((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await ZS(e,t,i,Qm(),o);return w6(e,a,ry())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await ZS(e,t,i,Qm(),o);return k5(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Js(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await T6(e),i=new s6(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cm,{type:cm},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[cm];a!==void 0&&t(!!a),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dw()||ww()||ny()}}const P6=D6;var jS="@firebase/auth",eA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(n){ps(new Ui("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pw(n)},h=new j3(i,o,a,m);return u5(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ps(new Ui("auth-internal",e=>{const t=Wo(e.getProvider("auth").getImmediate());return(i=>new V6(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(jS,eA,k6(n)),Si(jS,eA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=300,O6=iI("authIdTokenMaxAge")||U6;let tA=null;const F6=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>O6)return;const o=t==null?void 0:t.token;tA!==o&&(tA=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function q6(n=hg()){const e=Ko(n,"auth");if(e.isInitialized())return e.getImmediate();const t=l5(n,{popupRedirectResolver:P6,persistence:[z5,D5,zw]}),i=iI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=F6(a.toString());R5(t,u,()=>u(t.currentUser)),w5(t,d=>u(d))}}const o=tI("auth");return o&&c5(t,`http://${o}`),t}function H6(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}e5({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=ds("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",H6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");const nA={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var iA={};const Mo=n=>typeof import.meta<"u"&&nA&&nA[n]||typeof process<"u"&&iA&&iA[n]||"",jm={apiKey:Mo("VITE_FIREBASE_API_KEY")||"AIzaSyBxTwrBjVNESSzx1oboJXZpjPLOfAmbGJ0",authDomain:Mo("VITE_FIREBASE_AUTH_DOMAIN")||"my-trip-57036.firebaseapp.com",projectId:Mo("VITE_FIREBASE_PROJECT_ID")||"my-trip-57036",storageBucket:Mo("VITE_FIREBASE_STORAGE_BUCKET")||"my-trip-57036.firebasestorage.app",messagingSenderId:Mo("VITE_FIREBASE_MESSAGING_SENDER_ID")||"671607347102",appId:Mo("VITE_FIREBASE_APP_ID")||"1:671607347102:web:e3754fa41d10b2f758288f",measurementId:Mo("VITE_FIREBASE_MEASUREMENT_ID")||"G-K0WX69E0M8"},G6=jm.projectId&&jm.apiKey;let Pf=null,B6=null,Xo=null,qi=null,ay=!1;if(G6)try{Pf=dI(jm),Xo=r3(Pf),qi=q6(Pf),ay=!0,console.log("Firebase initialized successfully");try{typeof window<"u"&&(B6=iU(Pf))}catch(n){console.warn(" Firebase Analytics failed to initialize. This is likely due to API Key domain restrictions. The app will continue to function.",n)}}catch(n){console.error("Firebase initialization critical error:",n)}else console.warn(" Firebase configuration is missing or invalid."),console.warn("Please check firebaseConfig.ts");const ly="orders",Xw="users",jr=()=>!ay||!qi||!Xo?(console.warn("Firebase not initialized. Action skipped."),!1):!0,z6=async(n,e)=>{if(!jr())throw new Error("Cloud service unavailable");return(await I5(qi,n,e)).user},K6=async(n,e)=>{if(!jr())throw new Error("Cloud service unavailable");return(await C5(qi,n,e)).user},Y6=async()=>{jr()&&await N5(qi)},J6=n=>!ay||!qi?(n(null),()=>{}):b5(qi,n),$6=async n=>{if(!jr())return;const e=qi.currentUser;if(e)try{const t=zd(Xo,Xw,e.uid);await mw(t,{apiKey:n},{merge:!0})}catch(t){console.error("Error saving user preferences: ",t)}},Q6=async()=>{if(!jr())return{};const n=qi.currentUser;if(!n)return{};try{const e=zd(Xo,Xw,n.uid),t=await A3(e);if(t.exists())return t.data()}catch(e){console.error("Error fetching user preferences: ",e)}return{}},W6=async n=>{if(!jr())return;const e=qi.currentUser;if(e)try{await mw(zd(Xo,ly,n.id),{...n,userId:e.uid,createdAt:Tt.now()})}catch(t){console.error("Error adding document: ",t)}},X6=async()=>{if(!jr())return[];const n=qi.currentUser;if(!n)return[];try{const e=_3(s3(Xo,ly),v3("userId","==",n.uid)),t=await I3(e),i=[];return t.forEach(o=>{const a=o.data(),{userId:u,createdAt:d,...m}=a;i.push(m)}),i.sort((o,a)=>(a.id||"").localeCompare(o.id||""))}catch(e){return console.error("Error fetching documents: ",e),[]}},Z6=async n=>{if(jr())try{await C3(zd(Xo,ly,n))}catch(e){console.error("Error deleting document: ",e)}},sA=["","","","","","","","","","","","","","","","","","","",""],j6=()=>{const[n,e]=He.useState(Ne.LANDING),[t,i]=He.useState("FLAVOR"),[o,a]=He.useState("zh"),[u,d]=He.useState("Traditional Chinese"),[m,h]=He.useState(!1),[v,T]=He.useState(null),[S,R]=He.useState(!0),[L,H]=He.useState("login"),[U,W]=He.useState(""),[oe,Z]=He.useState(""),[ae,pe]=He.useState(""),[fe,M]=He.useState(!1),[x,N]=He.useState([]),[P,k]=He.useState(null),[q,D]=He.useState([]),[qe,gt]=He.useState([]),[J,ue]=He.useState(null),[Ee,ze]=He.useState(""),[je,O]=He.useState(""),[te,ce]=He.useState(!1),[de,be]=He.useState(null),[Pe,Ke]=He.useState(0),[bt,at]=He.useState(0),[Zn,Ws]=He.useState({}),[Nn,Fn]=He.useState(""),[qn,eo]=He.useState(""),[jt,to]=He.useState(!0),[Xs,Nt]=He.useState(""),At=He.useRef(null),Ii=He.useRef(null),no=He.useRef({}),Bi=He.useRef({text:"",count:0}),se=qb[o],zi=[se.loadingFlavor,se.loadingFlavor1,se.loadingFlavor2,se.loadingFlavor3,se.loadingFlavor4,se.loadingFlavor5],Zs=[se.loadingWord,se.loadingWord1,se.loadingWord2,se.loadingWord3,se.loadingWord4,se.loadingWord5];He.useEffect(()=>{[Ne.LOADING,Ne.CHECKOUT,Ne.RECEIPT].includes(n)&&Nt(sA[Math.floor(Math.random()*sA.length)])},[n]),He.useEffect(()=>{window.speechSynthesis.cancel(),Bi.current={text:"",count:0}},[n]),He.useEffect(()=>{const ee=localStorage.getItem("flavorpal_saved_email");ee&&(W(ee),M(!0));const ye=J6(async _e=>{if(T(_e),_e){R(!1);const Ie=await X6();gt(Ie);const Le=localStorage.getItem("flavorpal_api_key");Le&&Fn(Le);const xe=await Q6();xe.apiKey?(Fn(xe.apiKey),localStorage.setItem("flavorpal_api_key",xe.apiKey)):Le||(Fn(""),h(!0))}else R(!0),gt([]),Fn("")});return()=>ye()},[]);const io=async ee=>{ee.preventDefault(),pe("");try{L==="login"?(await K6(U,oe),fe?localStorage.setItem("flavorpal_saved_email",U):localStorage.removeItem("flavorpal_saved_email")):await z6(U,oe)}catch(ye){console.error(ye),pe(se.authError+(ye.message?` (${ye.message})`:""))}},Ki=async()=>{await Y6(),localStorage.removeItem("flavorpal_api_key"),h(!1)};He.useEffect(()=>{const ee=localStorage.getItem("flavorpal_ui_lang"),ye=localStorage.getItem("flavorpal_target_lang");(ee==="en"||ee==="zh")&&a(ee),ye&&d(ye)},[]);const Sl=async()=>{const ee=qn.trim();ee&&(localStorage.setItem("flavorpal_api_key",ee),Fn(ee),await $6(ee)),localStorage.setItem("flavorpal_ui_lang",o),localStorage.setItem("flavorpal_target_lang",u),h(!1)};He.useEffect(()=>{if(n===Ne.LOADING){const ee=t==="FLAVOR"?zi:Zs,ye=setInterval(()=>{Ke(_e=>(_e+1)%ee.length)},2e3);return()=>clearInterval(ye)}},[n,t]);const Zo=async()=>{var ye;if(x.length===0)return;if(!Nn){h(!0);return}e(Ne.LOADING),at(0);const ee=setInterval(()=>{at(_e=>{if(_e>=90)return _e;const Ie=Math.max(1,(90-_e)/10);return _e+Math.random()*Ie})},200);try{if(t==="FLAVOR"){const _e=await X2(x,Nn,u);clearInterval(ee),at(100),Ee.trim()?_e.restaurant_name=Ee.trim():_e.restaurant_name="",je.trim()?_e.restaurant_address=je.trim():Ee.trim()||(_e.restaurant_address=""),k(_e);const Ie=Array.from(new Set(_e.items.map(xe=>xe.currency_original))),Le={};for(const xe of Ie)Le[xe]=await j2(xe);Ws(Le),setTimeout(()=>{e(Ne.MENU)},500)}else{const _e=await Z2(x,Nn,u);clearInterval(ee),at(100),be(_e),setTimeout(()=>{e(Ne.WORDPAL_RESULT)},500)}}catch(_e){clearInterval(ee),console.error("AI Analysis failed:",_e),alert(se.failedAnalyze),((ye=_e==null?void 0:_e.message)!=null&&ye.includes("403")||_e!=null&&_e.toString().includes("API key"))&&(Fn(""),h(!0)),e(t==="FLAVOR"?Ne.UPLOAD:Ne.WORDPAL_UPLOAD)}},jo=ee=>{D(ye=>ye.find(Ie=>Ie.id===ee.name_original)?ye.map(Ie=>Ie.id===ee.name_original?{...Ie,quantity:Ie.quantity+1}:Ie):[...ye,{...ee,id:ee.name_original,quantity:1}])},ea=ee=>{D(ye=>{const _e=ye.find(Ie=>Ie.id===ee.name_original);return _e&&_e.quantity>1?ye.map(Ie=>Ie.id===ee.name_original?{...Ie,quantity:Ie.quantity-1}:Ie):ye.filter(Ie=>Ie.id!==ee.name_original)})},Hn=async()=>{var Ie;if(!P)return;const ee=q.reduce((Le,xe)=>Le+xe.price_original*xe.quantity,0),ye=q.reduce((Le,xe)=>Le+xe.price_original*xe.quantity*(Zn[xe.currency_original]||1),0),_e={id:Math.random().toString(36).substr(2,9),date:new Date().toLocaleDateString(),restaurant_name:P.restaurant_name,restaurant_address:P.restaurant_address,items:[...q],total_original:ee,currency_original:((Ie=q[0])==null?void 0:Ie.currency_original)||"HKD",total_hkd:ye,detected_language:P.detected_language};gt(Le=>[_e,...Le]),W6(_e),D([]),N([]),ze(""),O(""),e(Ne.HOME)},Wt=async ee=>{window.confirm(se.deleteHistoryConfirm)&&(gt(ye=>ye.filter(_e=>_e.id!==ee)),Z6(ee))},xn=ee=>{ue(ee),e(Ne.RECEIPT)},yt=async ee=>{const ye=ee.target.files;if(ye&&ye.length>0){const Ie=Array.from(ye).map(xe=>new Promise(en=>{const ft=new FileReader;ft.onloadend=()=>en(ft.result),ft.readAsDataURL(xe)})),Le=await Promise.all(Ie);N(xe=>[...xe,...Le].slice(0,2)),n===Ne.HOME?e(Ne.UPLOAD):n===Ne.WORDPAL_HOME&&e(Ne.WORDPAL_UPLOAD)}},so=()=>{if(!Nn){alert(se.enterKey),h(!0);return}ce(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async ee=>{const{latitude:ye,longitude:_e}=ee.coords;try{const Ie=await eV(ye,_e,Nn);O(Ie),n===Ne.CHECKOUT&&P&&k({...P,restaurant_address:Ie})}catch(Ie){console.error("Reverse geocoding failed",Ie);const Le=`${ye.toFixed(5)}, ${_e.toFixed(5)}`;O(Le),alert(se.locateError+" (AI Error)")}finally{ce(!1)}},ee=>{alert(se.locateError),console.error(ee),ce(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0}):(alert("Geolocation is not supported by this browser."),ce(!1))},js=ee=>{if(no.current[ee]){const _e=no.current[ee];if(_e){const Ie=_e.getBoundingClientRect().top+window.pageYOffset+-140;window.scrollTo({top:Ie,behavior:"smooth"})}}},gs=(ee,ye)=>{if(window.speechSynthesis.speaking&&Bi.current.text===ee){window.speechSynthesis.cancel(),Bi.current={text:"",count:0};return}window.speechSynthesis.cancel();const _e=new SpeechSynthesisUtterance(ee);ye?_e.lang=ye:P!=null&&P.detected_language&&(_e.lang=P.detected_language),_e.rate=1,Bi.current={text:ee,count:1},_e.onend=()=>{Bi.current={text:"",count:0}},window.speechSynthesis.speak(_e)},jn=ee=>({JPY:"",USD:"$",HKD:"HK$",TWD:"NT$",CNY:"",EUR:"",GBP:"",KRW:"",THB:""})[ee]||ee,Yi=ee=>{i(ee),N([]),e(ee==="FLAVOR"?Ne.HOME:Ne.WORDPAL_HOME)},xt=()=>S?w.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md",children:w.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-3xl p-8 max-w-sm w-full shadow-2xl",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"text-5xl mb-2",children:""}),w.jsx("h2",{className:"text-2xl font-bold text-white",children:L==="login"?se.login:se.signup}),w.jsx("p",{className:"text-slate-400 text-sm mt-2",children:se.loginPrompt})]}),w.jsxs("form",{onSubmit:io,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:se.email}),w.jsx("input",{type:"email",name:"email",autoComplete:"username",value:U,onChange:ee=>W(ee.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-white focus:border-teal-500 outline-none",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:se.password}),w.jsx("input",{type:"password",name:"password",autoComplete:L==="login"?"current-password":"new-password",value:oe,onChange:ee=>Z(ee.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-white focus:border-teal-500 outline-none",required:!0,minLength:6})]}),L==="login"&&w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"checkbox",id:"rememberMe",checked:fe,onChange:ee=>M(ee.target.checked),className:"w-4 h-4 rounded border-slate-700 bg-slate-950 text-teal-600 focus:ring-teal-500 accent-teal-600 cursor-pointer"}),w.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-slate-400 select-none cursor-pointer",children:se.rememberMe})]}),ae&&w.jsx("div",{className:"text-red-400 text-xs bg-red-900/20 p-2 rounded-lg border border-red-500/20",children:ae}),w.jsx("button",{type:"submit",className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg mt-2",children:L==="login"?se.login:se.signup})]}),w.jsx("div",{className:"mt-6 text-center text-sm text-slate-400",children:w.jsxs("p",{children:[L==="login"?se.noAccount:se.hasAccount," ",w.jsx("button",{onClick:()=>{H(L==="login"?"signup":"login"),pe("")},className:"text-teal-400 font-bold hover:underline",children:L==="login"?se.signup:se.login})]})})]})}):null,ei=()=>w.jsx(Mr,{title:"",actions:w.jsx("button",{onClick:()=>h(!0),className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-300",title:se.settings,children:w.jsx(Kt.Settings,{})}),children:w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] gap-8",children:[xt(),m&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:w.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-3xl p-6 max-w-sm w-full shadow-2xl overflow-y-auto max-h-[90vh]",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[w.jsx(Kt.Settings,{})," ",se.settings]}),Nn&&w.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white",children:""})]}),w.jsxs("div",{className:"mb-6 bg-slate-950 p-4 rounded-xl border border-slate-800",children:[w.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider mb-1",children:se.loggedInAs}),w.jsx("p",{className:"text-white text-sm font-medium truncate mb-3",children:v==null?void 0:v.email}),w.jsxs("button",{onClick:Ki,className:"w-full flex items-center justify-center gap-2 bg-slate-800 hover:bg-red-900/30 text-slate-300 hover:text-red-400 text-xs py-2 rounded-lg transition-colors border border-slate-700 hover:border-red-500/30",children:[w.jsx(Kt.Logout,{})," ",se.logout]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:se.uiLanguage}),w.jsxs("div",{className:"flex bg-slate-950 rounded-xl p-1 border border-slate-800",children:[w.jsx("button",{onClick:()=>a("zh"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${o==="zh"?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:""}),w.jsx("button",{onClick:()=>a("en"),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${o==="en"?"bg-slate-800 text-white shadow-sm":"text-slate-500 hover:text-slate-300"}`,children:"English"})]})]}),w.jsxs("div",{className:"mb-6 pt-6 border-t border-slate-800",children:[w.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase tracking-wider mb-2",children:se.apiKey}),w.jsxs("p",{className:"text-slate-500 text-xs mb-3 leading-relaxed",children:[se.apiKeyDesc," ",w.jsx("br",{}),w.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-teal-400 underline hover:text-teal-300",children:se.getKey})]}),w.jsx("input",{type:"password",value:qn,onChange:ee=>eo(ee.target.value),placeholder:Nn?"****************":se.apiKeyPlaceholder,className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-white mb-2 focus:border-teal-500 outline-none placeholder:text-slate-600"})]}),w.jsx("button",{onClick:Sl,className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg",children:se.save})]})}),w.jsxs("div",{className:"text-center space-y-2 mb-4",children:[w.jsx("h1",{className:"text-4xl font-black text-white tracking-tight",children:se.appTitle}),w.jsx("p",{className:"text-slate-400",children:se.chooseTool})]}),w.jsxs("button",{onClick:()=>Yi("FLAVOR"),className:"w-full bg-slate-900 hover:bg-slate-800 border border-slate-700 hover:border-teal-500/50 p-8 rounded-3xl transition-all group relative overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-500/0 via-teal-500/5 to-teal-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("span",{className:"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300 scale-x-[-1] inline-block",children:""}),w.jsx("h2",{className:"text-2xl font-bold text-teal-400 mb-2",children:se.flavorPal}),w.jsx("p",{className:"text-slate-500 text-sm",children:se.flavorPalDesc})]})]}),w.jsxs("button",{onClick:()=>Yi("WORD"),className:"w-full bg-slate-900 hover:bg-slate-800 border border-slate-700 hover:border-indigo-500/50 p-8 rounded-3xl transition-all group relative overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/0 via-indigo-500/5 to-indigo-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("span",{className:"text-6xl mb-4 group-hover:scale-110 transition-transform duration-300",children:""}),w.jsx("h2",{className:"text-2xl font-bold text-indigo-400 mb-2",children:se.wordPal}),w.jsx("p",{className:"text-slate-500 text-sm",children:se.wordPalDesc})]})]})]})}),ti=()=>w.jsx(Mr,{title:se.flavorPal,onBack:()=>e(Ne.LANDING),actions:w.jsx("div",{className:"flex gap-2",children:w.jsx("button",{onClick:()=>e(Ne.HISTORY),className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-300",children:w.jsx(Kt.History,{})})}),children:w.jsxs("div",{className:"flex flex-col items-center py-10 relative",children:[w.jsx("div",{className:"w-48 h-48 bg-slate-900 rounded-full flex items-center justify-center mb-10 shadow-[0_0_30px_rgba(13,148,136,0.2)] border border-slate-800",children:w.jsx("div",{className:"text-6xl animate-bounce",children:""})}),w.jsxs("div",{className:"w-full space-y-4",children:[w.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-800 mb-4",children:[w.jsx("h3",{className:"text-teal-400 font-semibold mb-2",children:se.targetLanguage}),w.jsxs("select",{value:u,onChange:ee=>d(ee.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-slate-200 outline-none focus:ring-2 ring-teal-500/50",children:[w.jsx("option",{value:"Traditional Chinese",children:""}),w.jsx("option",{value:"English",children:"English"}),w.jsx("option",{value:"Japanese",children:""})]})]}),w.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[w.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",ref:At,onChange:yt}),w.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",ref:Ii,onChange:yt}),w.jsxs("button",{onClick:()=>{var ee;return(ee=At.current)==null?void 0:ee.click()},className:"w-full bg-teal-600 hover:bg-teal-500 text-white font-bold py-5 rounded-3xl shadow-[0_10px_30px_-10px_rgba(13,148,136,0.5)] transition-all flex items-center justify-center gap-3 active:scale-95",children:[w.jsx(Kt.Camera,{}),w.jsx("span",{className:"text-lg",children:se.takePhoto})]}),w.jsxs("button",{onClick:()=>e(Ne.UPLOAD),className:"w-full bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold py-4 rounded-3xl border border-slate-700 transition-all flex items-center justify-center gap-3 active:scale-95",children:[w.jsx(Kt.Photo,{}),w.jsx("span",{className:"text-sm",children:se.uploadGallery})]})]})]}),qe.length>0&&w.jsxs("div",{className:"w-full mt-10",children:[w.jsx("h3",{className:"text-lg font-bold text-slate-200 mb-4",children:se.recentVisits}),w.jsx("div",{className:"space-y-4",children:qe.slice(0,2).map(ee=>w.jsxs("div",{className:"bg-slate-900 rounded-2xl p-4 shadow-sm border border-slate-800 flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"font-bold text-slate-200",children:ee.restaurant_name}),w.jsx("p",{className:"text-sm text-slate-500",children:ee.date})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{className:"font-bold text-teal-400",children:[ee.total_original," ",w.jsx("span",{className:"text-xs",children:ee.currency_original})]}),w.jsx("button",{onClick:()=>e(Ne.HISTORY),className:"text-xs text-indigo-400 underline",children:se.details})]})]},ee.id))})]})]})}),Gn=()=>w.jsx(Mr,{title:se.wordPal,onBack:()=>e(Ne.LANDING),children:w.jsxs("div",{className:"flex flex-col items-center py-10 relative",children:[w.jsx("div",{className:"w-48 h-48 bg-slate-900 rounded-full flex items-center justify-center mb-10 shadow-[0_0_30px_rgba(99,102,241,0.2)] border border-slate-800",children:w.jsx("div",{className:"text-6xl animate-bounce",children:""})}),w.jsxs("div",{className:"w-full space-y-4",children:[w.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 border border-slate-800 mb-4",children:[w.jsx("h3",{className:"text-indigo-400 font-semibold mb-2",children:se.targetLanguage}),w.jsxs("select",{value:u,onChange:ee=>d(ee.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-slate-200 outline-none focus:ring-2 ring-indigo-500/50",children:[w.jsx("option",{value:"Traditional Chinese",children:""}),w.jsx("option",{value:"English",children:"English"}),w.jsx("option",{value:"Japanese",children:""}),w.jsx("option",{value:"French",children:"French"}),w.jsx("option",{value:"Korean",children:"Korean"})]})]}),w.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[w.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",ref:At,onChange:yt}),w.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",ref:Ii,onChange:yt}),w.jsxs("button",{onClick:()=>{var ee;return(ee=At.current)==null?void 0:ee.click()},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-5 rounded-3xl shadow-[0_10px_30px_-10px_rgba(99,102,241,0.5)] transition-all flex items-center justify-center gap-3 active:scale-95",children:[w.jsx(Kt.Camera,{}),w.jsx("span",{className:"text-lg",children:se.takePhoto})]}),w.jsxs("button",{onClick:()=>e(Ne.WORDPAL_UPLOAD),className:"w-full bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold py-4 rounded-3xl border border-slate-700 transition-all flex items-center justify-center gap-3 active:scale-95",children:[w.jsx(Kt.Photo,{}),w.jsx("span",{className:"text-sm",children:se.uploadGallery})]})]})]})]})}),ta=()=>w.jsx(Mr,{title:t==="FLAVOR"?se.analyzeMenu:se.translateText,onBack:()=>e(t==="FLAVOR"?Ne.HOME:Ne.WORDPAL_HOME),children:w.jsxs("div",{className:"py-6 space-y-6",children:[w.jsx("div",{className:"grid grid-cols-2 gap-4",children:[0,1].map(ee=>w.jsx("div",{className:"aspect-[3/4] rounded-2xl border-2 border-dashed border-slate-700 bg-slate-900 relative flex items-center justify-center overflow-hidden hover:border-teal-500/50 transition-colors",children:x[ee]?w.jsxs(w.Fragment,{children:[w.jsx("img",{src:x[ee],className:"w-full h-full object-cover",alt:`Snippet ${ee}`}),w.jsx("button",{onClick:()=>N(ye=>ye.filter((_e,Ie)=>Ie!==ee)),className:"absolute top-2 right-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs backdrop-blur-sm",children:""})]}):w.jsxs("label",{className:"cursor-pointer w-full h-full flex flex-col items-center justify-center gap-2 group",children:[w.jsx("span",{className:"text-3xl text-slate-600 group-hover:text-teal-500 transition-colors",children:"+"}),w.jsx("span",{className:"text-xs text-slate-500 group-hover:text-teal-400 transition-colors",children:"Add Image"}),w.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:yt,className:"hidden"})]})},ee))}),t==="FLAVOR"&&w.jsxs("div",{className:"bg-slate-900 rounded-2xl p-5 border border-slate-800 space-y-4",children:[w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:se.restaurantName}),w.jsx("input",{type:"text",value:Ee,onChange:ee=>ze(ee.target.value),placeholder:se.enterRestName,className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-white focus:border-teal-500 outline-none text-sm placeholder:text-slate-600"})]}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:se.restaurantAddress}),w.jsxs("button",{onClick:so,disabled:te,className:"text-xs text-teal-400 flex items-center gap-1 hover:text-teal-300 disabled:opacity-50",children:[w.jsx(Kt.Locate,{})," ",te?se.locating:se.locate]})]}),w.jsx("input",{type:"text",value:je,onChange:ee=>O(ee.target.value),placeholder:se.enterRestAddr,className:"w-full bg-slate-950 border border-slate-700 rounded-xl p-3 text-white focus:border-teal-500 outline-none text-sm placeholder:text-slate-600"})]})]}),w.jsx("div",{className:"bg-indigo-900/20 rounded-2xl p-4 border border-indigo-500/20",children:w.jsxs("p",{className:"text-indigo-300 text-sm leading-relaxed",children:[" ",w.jsxs("strong",{children:[se.tip.split(":")[0],":"]})," ",se.tip.split(":")[1]]})}),w.jsxs("button",{onClick:Zo,disabled:x.length===0,className:`w-full ${t==="FLAVOR"?"bg-teal-600 hover:bg-teal-500":"bg-indigo-600 hover:bg-indigo-500"} disabled:bg-slate-800 disabled:text-slate-600 text-white font-bold py-5 rounded-3xl shadow-lg transition-all flex items-center justify-center gap-3`,children:[w.jsx(Kt.Check,{}),w.jsx("span",{className:"text-lg",children:t==="FLAVOR"?se.analyzeMenu:se.translateText})]})]})}),na=()=>w.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-slate-950 flex flex-col items-center justify-center px-8 text-center text-slate-200",children:[w.jsxs("div",{className:"w-64 h-64 mb-10 relative",children:[w.jsx("div",{className:`absolute inset-0 ${t==="FLAVOR"?"bg-teal-500/10":"bg-indigo-500/10"} rounded-full animate-pulse`}),w.jsx("div",{className:"relative text-8xl flex items-center justify-center h-full animate-bounce",children:t==="FLAVOR"?w.jsx("span",{className:"scale-x-[-1] inline-block",children:Xs}):""})]}),w.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 shadow-xl border border-slate-800 w-full mb-8",children:[w.jsx("h2",{className:`${t==="FLAVOR"?"text-teal-500":"text-indigo-500"} font-bold tracking-widest text-xs uppercase mb-2`,children:se.didYouKnow}),w.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t==="FLAVOR"?se.diningEtiquette:se.languageFact}),w.jsx("p",{className:"text-slate-400 leading-relaxed italic",children:t==="FLAVOR"?se.factFlavor:se.factWord})]}),w.jsxs("div",{className:"w-full space-y-4",children:[w.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:w.jsx("div",{className:`h-full ${t==="FLAVOR"?"bg-teal-500":"bg-indigo-500"} transition-all duration-300 ease-out`,style:{width:`${bt}%`}})}),w.jsxs("div",{className:"flex justify-between text-xs text-slate-500 font-mono mt-1",children:[w.jsx("span",{children:t==="FLAVOR"?zi[Pe]:Zs[Pe]}),w.jsxs("span",{children:[Math.round(bt),"%"]})]})]})]}),ni=()=>de?w.jsx(Mr,{title:se.wordPal,onBack:()=>e(Ne.WORDPAL_UPLOAD),actions:w.jsxs("div",{className:"text-xs bg-indigo-900/50 text-indigo-300 px-3 py-1 rounded-full border border-indigo-500/30",children:[de.detected_language,"  ",u]}),children:w.jsxs("div",{className:"flex flex-col h-[calc(100vh-140px)] gap-4 py-4",children:[w.jsxs("div",{className:"flex-1 bg-slate-900 rounded-3xl border border-slate-800 flex flex-col overflow-hidden relative group",children:[w.jsxs("div",{className:"px-6 pt-5 pb-3 bg-slate-900 border-b border-slate-800 z-10 flex justify-between items-center shrink-0",children:[w.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:se.originalText}),w.jsx("button",{onClick:()=>gs(de.original_text,de.detected_language),className:"p-2 bg-slate-800 rounded-full text-slate-400 hover:text-white transition-all opacity-0 group-hover:opacity-100",children:w.jsx(Kt.Speaker,{})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:w.jsx("p",{className:"text-slate-200 whitespace-pre-wrap leading-relaxed text-lg font-serif",children:de.original_text})})]}),w.jsxs("div",{className:"flex-1 bg-slate-900 rounded-3xl border border-indigo-500/20 flex flex-col overflow-hidden relative group",children:[w.jsxs("div",{className:"px-6 pt-5 pb-3 bg-slate-900 border-b border-indigo-500/20 z-10 flex justify-between items-center shrink-0",children:[w.jsx("h3",{className:"text-xs font-bold text-indigo-400 uppercase tracking-widest",children:se.translation}),w.jsx("button",{onClick:()=>gs(de.translated_text),className:"p-2 bg-indigo-900/30 rounded-full text-indigo-300 hover:text-white transition-all",children:w.jsx(Kt.Speaker,{})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-6 pt-4",children:w.jsx("p",{className:"text-indigo-100 whitespace-pre-wrap leading-relaxed text-lg",children:de.translated_text})})]}),w.jsx("button",{onClick:()=>e(Ne.WORDPAL_UPLOAD),className:"w-full mt-2 text-indigo-400 hover:text-indigo-300 text-sm font-bold border border-indigo-500/30 hover:bg-indigo-500/10 py-3 rounded-2xl transition-all",children:se.translateNew})]})}):null,ys=()=>{var vs,sa;if(!P)return null;const ee=P.items.reduce((Dt,rt)=>(Dt[rt.category]||(Dt[rt.category]=[]),Dt[rt.category].push(rt),Dt),{}),ye=Object.keys(ee),_e=q.reduce((Dt,rt)=>Dt+rt.quantity,0),Ie=q.reduce((Dt,rt)=>Dt+rt.price_original*rt.quantity,0),Le=((vs=q[0])==null?void 0:vs.currency_original)||((sa=P.items[0])==null?void 0:sa.currency_original),xe=Ie*(Zn[Le]||1),en=jt?Ie.toFixed(0):xe.toFixed(1),ft=jt?Le:"HKD",Mt=jt?xe.toFixed(1):Ie.toFixed(0),En=jt?"HKD":Le;return w.jsxs(Mr,{title:se.menu,onBack:()=>e(Ne.UPLOAD),actions:w.jsxs("div",{className:"flex flex-col items-end",children:[w.jsxs("button",{onClick:()=>to(!jt),className:"text-xs bg-slate-800 px-2 py-1 rounded text-teal-400 font-bold mb-1 hover:bg-slate-700",children:[se.swap,": ",jt?Le:"HKD"]}),P.restaurant_name&&w.jsx("span",{className:"text-xs font-bold text-slate-500",children:P.restaurant_name})]}),children:[w.jsxs("div",{className:"pb-32 relative",children:[w.jsx("div",{className:"sticky top-0 z-20 bg-slate-950/90 backdrop-blur pb-2 -mx-6 px-6",children:w.jsx("div",{className:"flex gap-2 overflow-x-auto py-4 no-scrollbar w-full flex-nowrap touch-pan-x",children:ye.map(Dt=>w.jsx("button",{onClick:()=>js(Dt),className:"whitespace-nowrap bg-slate-800 hover:bg-slate-700 text-slate-300 px-4 py-2 rounded-full text-sm font-medium transition-colors border border-slate-700 flex-shrink-0",children:Dt},Dt))})}),w.jsx("div",{className:"space-y-8 mt-2",children:ye.map(Dt=>w.jsxs("div",{ref:rt=>{no.current[Dt]=rt},children:[w.jsx("h3",{className:"text-xl font-bold text-teal-500 mb-4 px-2 border-l-4 border-teal-600",children:Dt}),w.jsx("div",{className:"space-y-4",children:ee[Dt].map((rt,ii)=>{const si=q.find(Ts=>Ts.id===rt.name_original),ri=Zn[rt.currency_original]||1,Sn=(rt.price_original*ri).toFixed(1),An=jt?rt.price_original:Sn,oi=jt?rt.currency_original:"HKD",Pt=jt?Sn:rt.price_original,ro=jt?"HKD":rt.currency_original;return w.jsxs("div",{className:`bg-slate-900 rounded-3xl p-5 shadow-sm border ${si?"border-teal-500/50 bg-teal-900/10":"border-slate-800"} transition-all`,children:[w.jsx("div",{className:"flex justify-between items-start mb-2",children:w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h3",{className:"text-lg font-bold text-slate-200",children:rt.name_translated}),w.jsx("button",{onClick:Ts=>{Ts.stopPropagation(),gs(rt.name_original,P.detected_language)},className:"text-slate-500 hover:text-teal-400 p-1 transition-colors",children:w.jsx(Kt.Speaker,{})})]}),w.jsx("p",{className:"text-xs text-slate-500 italic mb-1",children:rt.name_original})]})}),w.jsx("div",{className:"bg-amber-900/20 p-3 rounded-2xl border border-amber-700/30 mb-4",children:w.jsx("p",{className:"text-sm text-amber-200 leading-snug",children:rt.description})}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-baseline gap-1",children:[w.jsxs("span",{className:"text-xl font-bold text-teal-400",children:["$",An]}),w.jsx("span",{className:"text-xs font-bold text-teal-600/70",children:oi})]}),w.jsxs("p",{className:"text-[10px] text-slate-500 uppercase tracking-tight",children:[" ",Pt," ",ro]})]}),w.jsxs("div",{className:"flex items-center gap-4 bg-slate-950 p-1 rounded-2xl border border-slate-800",children:[w.jsx("button",{onClick:()=>ea(rt),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 text-slate-400 hover:text-white disabled:opacity-30 disabled:hover:text-slate-400 transition-colors",disabled:!si,children:w.jsx(Kt.Minus,{})}),w.jsx("span",{className:"font-bold text-slate-200 w-4 text-center",children:(si==null?void 0:si.quantity)||0}),w.jsx("button",{onClick:()=>jo(rt),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-teal-600 hover:bg-teal-500 shadow-lg text-white transition-colors",children:w.jsx(Kt.Plus,{})})]})]})]},ii)})})]},Dt))})]}),_e>0&&w.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto p-4 bg-gradient-to-t from-slate-950 via-slate-950 to-transparent pointer-events-none z-30",children:w.jsxs("div",{className:"pointer-events-auto bg-teal-800 rounded-3xl p-6 shadow-2xl flex items-center justify-between border border-teal-600/30",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-teal-200 text-xs font-bold tracking-widest uppercase mb-1",children:se.estTotal}),w.jsxs("div",{className:"flex flex-col",children:[w.jsxs("div",{className:"flex items-baseline gap-1 text-white",children:[w.jsxs("span",{className:"text-2xl font-black",children:["$",en]}),w.jsx("span",{className:"text-sm font-bold opacity-80",children:ft})]}),w.jsxs("div",{className:"text-[10px] text-teal-300 opacity-80",children:[" $",Mt," ",En," (",se.currencyDisclaimer,")"]})]})]}),w.jsxs("button",{onClick:()=>e(Ne.CHECKOUT),className:"bg-white text-teal-900 font-bold px-8 py-3 rounded-2xl shadow-lg active:scale-95 transition-transform flex items-center gap-2 hover:bg-slate-100",children:[se.checkout," ",w.jsx("span",{className:"bg-teal-900/10 text-teal-900 px-2 py-0.5 rounded-lg text-sm",children:_e})]})]})})]})},ia=ee=>{var Ie;let ye;if(ee==="checkout"){if(!P)return null;const Le=q.reduce((Mt,En)=>Mt+En.price_original*En.quantity,0),xe=((Ie=q[0])==null?void 0:Ie.currency_original)||"HKD",en=Zn[xe]||1,ft=Le*en;ye={restaurant_name:P.restaurant_name,restaurant_address:P.restaurant_address,date:new Date().toLocaleDateString(),items:q,total_original:Le,currency_original:xe,total_hkd:ft,rate:en,language:P.detected_language}}else{if(!J)return null;ye={restaurant_name:J.restaurant_name,restaurant_address:J.restaurant_address,date:J.date,items:J.items,total_original:J.total_original,currency_original:J.currency_original,total_hkd:J.total_hkd,rate:J.total_hkd/J.total_original||1,language:J.detected_language}}const _e=jn(ye.currency_original);return w.jsx(Mr,{title:ee==="checkout"?se.checkout:se.receipt,onBack:()=>e(ee==="checkout"?Ne.MENU:Ne.HISTORY),children:w.jsxs("div",{className:"py-6 space-y-6",children:[w.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-sm flex flex-col items-center text-center",children:[w.jsx("div",{className:"text-6xl mb-4 scale-x-[-1] inline-block",children:Xs}),w.jsx("h2",{className:"text-3xl font-black tracking-tighter text-white uppercase",children:"Flavor Pal"}),ee==="receipt"&&w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text-slate-400 font-medium mb-1",children:ye.restaurant_name}),ye.restaurant_address&&w.jsx("p",{className:"text-xs text-slate-600 mb-2 max-w-[200px] truncate",children:ye.restaurant_address}),w.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest mb-6",children:ye.date})]}),ee==="checkout"&&w.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest mb-6 mt-2",children:ye.date}),w.jsx("div",{className:"w-full border-t border-dashed border-slate-700 py-6 space-y-4",children:ye.items.map((Le,xe)=>w.jsxs("div",{className:"flex justify-between items-start text-left",children:[w.jsx("div",{className:"flex-1",children:w.jsxs("div",{className:"flex items-baseline gap-2",children:[w.jsxs("span",{className:"font-bold text-slate-300",children:[Le.quantity,"x"]}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("h4",{className:"font-bold text-slate-200 leading-tight",children:Le.name_original}),w.jsx("button",{onClick:()=>gs(Le.name_original,ye.language),className:"text-slate-500 hover:text-teal-400 transition-colors p-1",title:"Read Aloud",children:w.jsx(Kt.Speaker,{})})]}),w.jsx("p",{className:"text-xs text-slate-500",children:Le.name_translated})]})]})}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{className:"font-bold text-slate-200",children:[_e,Le.price_original*Le.quantity]}),w.jsxs("p",{className:"text-[10px] text-slate-500 uppercase",children:[" HKD ",(Le.price_original*Le.quantity*ye.rate).toFixed(1)]})]})]},xe))}),w.jsxs("div",{className:"w-full border-t-2 border-slate-800 pt-6 space-y-2",children:[w.jsxs("div",{className:"flex justify-between items-center text-slate-500 uppercase tracking-widest text-[10px] font-bold",children:[w.jsx("span",{children:se.subtotal}),w.jsxs("span",{children:[_e,ye.total_original]})]}),w.jsxs("div",{className:"flex justify-between items-center text-2xl font-black text-white",children:[w.jsx("span",{children:se.total}),w.jsxs("span",{children:[_e,ye.total_original]})]}),w.jsxs("div",{className:"bg-slate-800 text-slate-200 rounded-2xl py-3 px-4 flex justify-between items-center mt-4",children:[w.jsx("span",{className:"font-bold uppercase tracking-widest text-[10px] opacity-60",children:se.estHkd}),w.jsxs("span",{className:"text-xl font-bold text-teal-400",children:[" $",ye.total_hkd.toFixed(1)]})]}),ee==="checkout"&&w.jsx("button",{onClick:()=>e(Ne.MENU),className:"w-full mt-4 text-teal-500 hover:text-teal-400 text-sm font-bold border border-teal-500/30 hover:bg-teal-500/10 py-3 rounded-2xl transition-all",children:se.continueOrdering})]}),ee==="checkout"&&w.jsxs("div",{className:"w-full mt-6 space-y-2 p-4 bg-slate-900/50 rounded-2xl border border-slate-800 border-dashed",children:[w.jsx("input",{type:"text",value:(P==null?void 0:P.restaurant_name)||"",onChange:Le=>k(xe=>xe?{...xe,restaurant_name:Le.target.value}:null),placeholder:se.enterRestName,className:"w-full bg-slate-950/50 border border-slate-700/50 rounded-lg p-2 text-center text-slate-300 font-medium focus:border-teal-500 outline-none text-sm placeholder:text-slate-600"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"text",value:(P==null?void 0:P.restaurant_address)||"",onChange:Le=>k(xe=>xe?{...xe,restaurant_address:Le.target.value}:null),placeholder:se.enterRestAddr,className:"w-full bg-slate-950/50 border border-slate-700/50 rounded-lg p-2 text-center text-slate-500 text-xs focus:border-teal-500 outline-none placeholder:text-slate-600"}),w.jsx("button",{onClick:so,className:"absolute right-2 top-1/2 -translate-y-1/2 text-teal-400 p-2",children:w.jsx(Kt.Locate,{})})]})]}),w.jsx("div",{className:"w-full mt-6 opacity-20",children:w.jsx("p",{className:"text-[8px] tracking-[0.3em] uppercase text-slate-500",children:se.thankYou})})]}),ee==="checkout"&&w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("button",{onClick:()=>alert(se.savedToGallery),className:"bg-slate-800 text-slate-300 font-bold py-4 rounded-3xl flex items-center justify-center gap-2 hover:bg-slate-700 transition-colors",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),se.receiptImg]}),w.jsx("button",{onClick:Hn,className:"bg-teal-600 text-white font-bold py-4 rounded-3xl shadow-lg active:scale-95 transition-transform hover:bg-teal-500",children:se.finishOrder})]})]})})},_s=()=>w.jsx(Mr,{title:se.history,onBack:()=>e(Ne.HOME),children:w.jsx("div",{className:"py-6 space-y-6",children:qe.length===0?w.jsxs("div",{className:"py-20 text-center text-slate-600",children:[w.jsx("div",{className:"text-4xl mb-4 opacity-50",children:""}),w.jsx("p",{children:"No orders yet. Start scanning!"})]}):qe.map(ee=>w.jsxs("div",{className:"bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-800 space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2 text-amber-500 font-bold text-xs uppercase tracking-widest mb-1",children:[w.jsx(Kt.History,{}),ee.date]}),w.jsx("h3",{className:"text-xl font-bold text-slate-200 leading-tight",children:ee.restaurant_name})]}),w.jsx("button",{onClick:()=>Wt(ee.id),className:"text-slate-600 hover:text-red-400 transition-colors",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),w.jsx("div",{className:"space-y-1",children:ee.items.map((ye,_e)=>w.jsxs("div",{className:"flex justify-between text-sm",children:[w.jsx("span",{className:"text-slate-400",children:ye.name_translated}),w.jsxs("span",{className:"text-slate-600 italic",children:["x",ye.quantity]})]},_e))}),w.jsxs("div",{className:"pt-2 border-t border-slate-800 flex items-baseline gap-2",children:[w.jsxs("span",{className:"text-2xl font-bold text-teal-400 tracking-tighter",children:[ee.total_original," ",w.jsx("span",{className:"text-sm",children:ee.currency_original})]}),w.jsxs("span",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:["( ",ee.total_hkd.toFixed(1)," HKD)"]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[w.jsxs("button",{onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ee.restaurant_name+" "+(ee.restaurant_address||""))}`,"_blank"),className:"bg-indigo-900/30 text-indigo-400 border border-indigo-500/20 font-bold py-3 rounded-2xl flex items-center justify-center gap-2 text-sm hover:bg-indigo-900/50 transition-colors",children:[w.jsx(Kt.Navigation,{})," ",se.navigate]}),w.jsx("button",{onClick:()=>xn(ee),className:"bg-slate-800 text-slate-300 font-bold py-3 rounded-2xl flex items-center justify-center gap-2 text-sm hover:bg-slate-700 transition-colors",children:se.viewReceipt})]})]},ee.id))})});return w.jsxs("div",{className:"min-h-screen bg-slate-950",children:[n===Ne.LANDING&&ei(),n===Ne.HOME&&ti(),n===Ne.UPLOAD&&ta(),n===Ne.MENU&&ys(),n===Ne.CHECKOUT&&ia("checkout"),n===Ne.RECEIPT&&ia("receipt"),n===Ne.HISTORY&&_s(),n===Ne.WORDPAL_HOME&&Gn(),n===Ne.WORDPAL_UPLOAD&&ta(),n===Ne.WORDPAL_RESULT&&ni(),n===Ne.LOADING&&na()]})},fm=document.getElementById("root");if(!fm)console.error("Failed to find the root element");else try{Fb.createRoot(fm).render(w.jsx(Mb.StrictMode,{children:w.jsx(j6,{})}))}catch(n){console.error("Error mounting React app:",n),fm.innerHTML=`
      <div style="color: white; padding: 20px; text-align: center;">
        <h1>Something went wrong</h1>
        <p>Please check the console for details.</p>
        <p>${n}</p>
      </div>
    `}
